{"type":"queue-operation","operation":"dequeue","timestamp":"2026-01-26T16:21:09.489Z","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340"}
{"type":"file-history-snapshot","messageId":"afd99835-9d68-4c8a-820d-86605b532b92","snapshot":{"messageId":"afd99835-9d68-4c8a-820d-86605b532b92","trackedFileBackups":{},"timestamp":"2026-01-26T16:21:09.574Z"},"isSnapshotUpdate":false}
{"parentUuid":null,"isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"D26-260","type":"user","message":{"role":"user","content":[{"type":"text","text":"<ide_selection>The user selected the lines 271 to 271 from c:\\laragon\\www\\psicoalianza-2\\routes\\web.php:\nempresas-planes\n\nThis may or may not be related to the current task.</ide_selection>"},{"type":"text","text":"comando para cambirme de ramam a main y comadndo para crear una nuva rama solo dame los comandos"}]},"uuid":"afd99835-9d68-4c8a-820d-86605b532b92","timestamp":"2026-01-26T16:21:09.571Z","permissionMode":"default"}
{"parentUuid":"afd99835-9d68-4c8a-820d-86605b532b92","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"D26-260","message":{"model":"claude-opus-4-5-20251101","id":"msg_01P6qD2H94kbuffVRAGdpQNt","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"El usuario quiere los comandos de git para:\n1. Cambiarse a la rama main\n2. Crear una nueva rama\n\nSolo quiere los comandos, sin explicaciones extensas.","signature":"Er0CCkYICxgCKkDEkE4Qohgyo8xX6X0SB5Ty36q/EjsgwdbwbMwivQ9jOrW86Dc96P4P3arbJyv3tdYjBhjdN3YwNxOJtXosmd7zEgwLjm4nkvcjTQYqzF4aDBhoo/kP9zAoUJ4EeiIwBNUBXvrH2x9PlQgPao6vcmlkkrJg9k+odEiXMj6Bmr3Yn7PpYl6ya9rSBdmoonNjKqQBxSGzATAqk0yH0WYBMroxtz378//IpVNTMM9vTQuk1m8sdWheThzj/CRrWHJIgjNgmNdhfOPGCPXzGK3KYolGrzoLFqLc+Sd2gHgvvEEri8Otqc2IvXHSft1zqyPaPj3UxmCxss6BssvwUYYvVko8SHPonE6+RdTRR7Pp81DrAAvNBNvgNph/qCqPmRmD2TSFv3vgFnxGvmehbXzg62MpO8IM/n8YAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":25166,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":25166,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CXWJ6aSFRx6pQEbCPqGBY","type":"assistant","uuid":"6b53f6c7-cbd3-4041-a29b-d979c933052e","timestamp":"2026-01-26T16:21:12.303Z"}
{"parentUuid":"6b53f6c7-cbd3-4041-a29b-d979c933052e","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"D26-260","message":{"model":"claude-opus-4-5-20251101","id":"msg_01P6qD2H94kbuffVRAGdpQNt","type":"message","role":"assistant","content":[{"type":"text","text":"**Cambiar a main:**\n```bash\ngit checkout main\n```\n\n**Crear nueva rama:**\n```bash\ngit checkout -b nombre-nueva-rama\n```"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":25166,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":25166,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CXWJ6aSFRx6pQEbCPqGBY","type":"assistant","uuid":"d7a770cb-1f30-444e-af7b-d06ed5599193","timestamp":"2026-01-26T16:21:12.865Z"}
{"type":"queue-operation","operation":"dequeue","timestamp":"2026-01-26T16:27:51.591Z","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340"}
{"type":"file-history-snapshot","messageId":"f6f4131b-9b27-427c-9500-ee74852de28e","snapshot":{"messageId":"f6f4131b-9b27-427c-9500-ee74852de28e","trackedFileBackups":{},"timestamp":"2026-01-26T16:27:51.650Z"},"isSnapshotUpdate":false}
{"parentUuid":"d7a770cb-1f30-444e-af7b-d06ed5599193","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","type":"user","message":{"role":"user","content":[{"type":"text","text":"<ide_opened_file>The user opened the file c:\\laragon\\www\\psicoalianza-2\\resources\\views\\aplicantes\\completar-datos-usuario.blade.php in the IDE. This may or may not be related to the current task.</ide_opened_file>"},{"type":"text","text":"analiza este archivo con su js"}]},"uuid":"f6f4131b-9b27-427c-9500-ee74852de28e","timestamp":"2026-01-26T16:27:51.648Z","permissionMode":"default"}
{"parentUuid":"f6f4131b-9b27-427c-9500-ee74852de28e","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","message":{"model":"claude-opus-4-5-20251101","id":"msg_01BcEQ1TMoF1ezmx1BnDy19H","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"El usuario quiere que analice el archivo completar-datos-usuario.blade.php junto con su JavaScript asociado. Primero debo leer el archivo Blade y luego buscar cualquier archivo JS relacionado.","signature":"EukCCkYICxgCKkCUiDfn0kd97t2sjBrQPVTqnB7eB0rP87HVUk7y9jdRm1Orr7sVTLJbjFdxClEKoxxuapr4139AtB0BQIlBV8OeEgzGEGjfBfqeZEaWawgaDMYlDthnoxejkfxZOiIwydnjn6mbsDPkfI1t6JKd2FPK/eNLN5d5LTYgPJoO+QNduwZW2KVkj5pl1A17lYMEKtABhTqDt7QrdJ4Fu0hCHFEurfCuG0JaPXMsV4KYPXt/sM47KS4fNfvfQ849NFm4PPqaJubDzT49LpfSJh2E2y97VGHVX9z6/TgpwLpCkWLgskeQk7EkxacuItf/jyv3JzCgXuJbagJLrprge0YAeMHritiPxE3ex82KmIpCfgwyfk8sDeCbOZmK9Mkv69hm7pLSTNeY+yvux77oxBV1JuQj8L/6nCfo7Qi50c90xCC9GjqLUshEzItpb+YxXeQbyxtZm21uGZaVA98gpIBVtpnoYhgB"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":25342,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":25342,"ephemeral_1h_input_tokens":0},"output_tokens":8,"service_tier":"standard"}},"requestId":"req_011CXWJcEY1uQsAzNabd5Pg3","type":"assistant","uuid":"d89c7853-c695-4cbd-94d3-2cdb107b44bc","timestamp":"2026-01-26T16:27:54.839Z"}
{"parentUuid":"d89c7853-c695-4cbd-94d3-2cdb107b44bc","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","message":{"model":"claude-opus-4-5-20251101","id":"msg_01BcEQ1TMoF1ezmx1BnDy19H","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01REF1Xuyg1J8JMd5wX2s6at","name":"Read","input":{"file_path":"c:\\laragon\\www\\psicoalianza-2\\resources\\views\\aplicantes\\completar-datos-usuario.blade.php"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":25342,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":25342,"ephemeral_1h_input_tokens":0},"output_tokens":8,"service_tier":"standard"}},"requestId":"req_011CXWJcEY1uQsAzNabd5Pg3","type":"assistant","uuid":"1e89479a-f88b-4209-b501-2c281d2f502e","timestamp":"2026-01-26T16:27:55.456Z"}
{"parentUuid":"1e89479a-f88b-4209-b501-2c281d2f502e","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","message":{"model":"claude-opus-4-5-20251101","id":"msg_01BcEQ1TMoF1ezmx1BnDy19H","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_018ME2f3dfG6ERDxydJCn8dZ","name":"Glob","input":{"pattern":"**/completar-datos-usuario*.js"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":25342,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":25342,"ephemeral_1h_input_tokens":0},"output_tokens":8,"service_tier":"standard"}},"requestId":"req_011CXWJcEY1uQsAzNabd5Pg3","type":"assistant","uuid":"20add5cc-6b12-4e63-ad86-ddacc1e1e199","timestamp":"2026-01-26T16:27:55.753Z"}
{"parentUuid":"20add5cc-6b12-4e63-ad86-ddacc1e1e199","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","message":{"model":"claude-opus-4-5-20251101","id":"msg_01BcEQ1TMoF1ezmx1BnDy19H","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01LuaaHa2U9HRvp9CTK6YbRb","name":"Glob","input":{"pattern":"**/aplicantes/**/*.js"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":25342,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":25342,"ephemeral_1h_input_tokens":0},"output_tokens":8,"service_tier":"standard"}},"requestId":"req_011CXWJcEY1uQsAzNabd5Pg3","type":"assistant","uuid":"8f87a1a8-7ad7-4eca-9412-e9ace7f86ed4","timestamp":"2026-01-26T16:27:56.024Z"}
{"parentUuid":"1e89479a-f88b-4209-b501-2c281d2f502e","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","slug":"resilient-gathering-fog","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01REF1Xuyg1J8JMd5wX2s6at","type":"tool_result","content":"     1→@extends('layouts.portal-empleo')\n     2→@section('titulo', 'Vacantes')\n     3→\n     4→@section('estilos')\n     5→    <link rel=\"stylesheet\" href=\"{{ asset('src/aplicantes/css/datos-generales.css') }}\">\n     6→    <link rel=\"stylesheet\" href=\"{{ asset('src/portal-empleo/css/crear.css') }}\">\n     7→@endsection\n     8→\n     9→@section('contenido')\n    10→<section class=\"container-fluid p-0 h-100\">\n    11→    <div class=\"card-body mb-4 px-5\">\n    12→        @php\n    13→            $migasDePan = [\n    14→                ['nombre' => 'Completar y verificar datos', 'url' => '', 'active' => true],\n    15→            ];\n    16→        @endphp\n    17→        ${crearMigaDePan({migas:@json($migasDePan), volver:true})}\n    18→    </div>\n    19→    <div class=\"row justify-content-center bg-gray-90 py-5 overflow-auto border-top\" id=\"contenedor-formularios\">\n    20→        <div class=\"col-12 col-sm-10 col-md-8 col-lg-7 col-xl-6 col-xxl-5 pt-12 pb-6 rounded-2 bg-white shadow-1\">\n    21→            <div class=\"row align-items-center\">\n    22→                <div class=\"col-auto text-gray-10 pe-0 ps-8\">\n    23→                    <i class=\"bi bi-person text-headline-3\"></i>\n    24→                </div>\n    25→                <div class=\"col-auto text-headline-2 text-gray-30 fw-semibold\">\n    26→                    Completar y verificar datos\n    27→                </div>\n    28→                <form id=\"formulario\" action=\"/completar-datos-usuario/datos-generales\" class=\"col-12 mt-8\" data-activar-siguiente=\"false\">\n    29→                    @csrf\n    30→                    <input type=\"hidden\" id=\"id\" name=\"id\" value=\"{{ $usuario->id }}\">\n    31→                    @if ($revision_hv)\n    32→                        <input type=\"hidden\" id=\"vacante\" name=\"vacante\" value=\"{{ $revision_hv }}\">\n    33→                    @endif\n    34→                    ${crearSeccionPasos({\n    35→                        id: 'usuario',\n    36→                        tab_content_class: 'mt-10 border-top row',\n    37→                        tabs: [\n    38→                            {\n    39→                                id: 'datos-generales',\n    40→                                titulo: `1`,\n    41→                                subtitulo: `Datos generales`,\n    42→                                contenido: `@include('portales-empleo.aplicante.datos-generales')`,\n    43→                                activo: true,\n    44→                            },\n    45→                            {\n    46→                                id: 'datos-acceso',\n    47→                                titulo: `2`,\n    48→                                subtitulo: `Datos de acceso`,\n    49→                                contenido: `@include('portales-empleo.aplicante.datos-acceso')`,\n    50→                                disabled: true\n    51→                            },\n    52→                            @if ($revision_hv)\n    53→                                {\n    54→                                    id: 'perfil-laboral',\n    55→                                    titulo: `3`,\n    56→                                    subtitulo: `Hoja de vida`,\n    57→                                    contenido: `@include('portales-empleo.aplicante.perfil-laboral')`,\n    58→                                    disabled: true,\n    59→                                    contenedor: '#contenedor-perfil-laboral',\n    60→                                },\n    61→                            @endif\n    62→                        ]\n    63→                    })}\n    64→                </form>\n    65→                <div class=\"tab-content\" id=\"contenedor-perfil-laboral\"></div>\n    66→            </div>\n    67→        </div>\n    68→    </div>\n    69→</section>\n    70→@endsection\n    71→@section('scripts')\n    72→    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css\" rel=\"stylesheet\">\n    73→    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js\"></script>\n    74→    <script type=\"text/javascript\">\n    75→        const USUARIO = @json($usuario);\n    76→        let modalidades_estudios = [\n    77→            {id: 'Diurna', nombre: 'Diurna'},\n    78→            {id: 'Nocturna', nombre: 'Nocturna'}\n    79→        ];\n    80→        let niveles_educativos = @json($niveles_educativos);\n    81→        let discapacidades = @json($discapacidades);\n    82→        let revision_hv_ia = {{ $revision_hv_ia ? 'true' : 'false' }};\n    83→        let revision_hv = {{ $revision_hv ? 'true' : 'false' }};\n    84→        let validar_contrasena = true;\n    85→        let idiomas = [\n    86→            {'id': 1, 'nombre': 'Inglés'},\n    87→            {'id': 2, 'nombre': 'Portugués'},\n    88→            {'id': 3, 'nombre': 'Francés'},\n    89→            {'id': 4, 'nombre': 'Alemán'},\n    90→            {'id': 5, 'nombre': 'Mandarín'},\n    91→            {'id': 6, 'nombre': 'Italiano'},\n    92→            {'id': 7, 'nombre': 'Ruso'},\n    93→            {'id': 8, 'nombre': 'Árabe'},\n    94→        ];\n    95→        $(document).ready(function () {\n    96→            consultarPaisesListadoCompleto();\n    97→            $('#nombres').val(USUARIO.nombres.trim());\n    98→            $('#apellidos').val(USUARIO.apellidos.trim());\n    99→            $('#fecha_nacimiento')[0]._flatpickr.setDate(USUARIO?.fecha_nacimiento);\n   100→            $('#genero_id').val(USUARIO.genero_id).trigger('change').trigger('select2:select');\n   101→            $('#telefono').val(USUARIO.telefono);\n   102→            $('#direccion').val(USUARIO.direccion);\n   103→            $('#tipo_documento_id').val(USUARIO.tipo_documento_id).trigger('change').trigger('select2:select');\n   104→            $('#documento').val(USUARIO.documento);\n   105→            $('#email').val(USUARIO.email);\n   106→            $('#email-enviado').text(USUARIO.email);\n   107→            establecerDatosComponentePaisesDepartamentosCiudades({\n   108→                pais: {\n   109→                    html_id: 'pais_id',\n   110→                    value: USUARIO.ciudad?.departamento?.pais_id ? USUARIO.ciudad.departamento.pais_id : null\n   111→                },\n   112→                departamento: {\n   113→                    html_id: 'departamento_id',\n   114→                    value: USUARIO.ciudad?.departamento_id ? USUARIO.ciudad.departamento_id : null\n   115→                },\n   116→                ciudad: {\n   117→                    html_id: 'ciudad_id',\n   118→                    value: USUARIO.ciudad?.id ? USUARIO.ciudad.id : null\n   119→                },\n   120→            });\n   121→            let politicas_aceptadas = false;\n   122→            if (USUARIO.politicas_aceptadas.some(p => p.id === 1)) {\n   123→                politicas_aceptadas = true;\n   124→                $('#aceptar_politicas').prop('checked', politicas_aceptadas);\n   125→            }\n   126→            let aceptar_teminos_condiciones = false;\n   127→            if (USUARIO.politicas_aceptadas.some(p => p.id === 2)) {\n   128→                aceptar_teminos_condiciones = true;\n   129→                $('#aceptar_teminos_condiciones').prop('checked', aceptar_teminos_condiciones);\n   130→            }\n   131→            if (politicas_aceptadas && aceptar_teminos_condiciones) {\n   132→                $('#btn-siguiente-datos-generales').prop('disabled', false);\n   133→                $('#titulo-tab-pasos-usuario-datos-acceso').prop('disabled', false);\n   134→                $('#contenedor-texto-verificacion-cuenta').addClass('d-none');\n   135→                $('#contenedor-mensaje-verificar').addClass('d-none');\n   136→                $('#contenedor-boton-verificar-correo').addClass('d-none');\n   137→                usuario_verificado = true;\n   138→                validar_contrasena = false;\n   139→            }\n   140→        });\n   141→    </script>\n   142→    <script src=\"{{ asset('src/portal-empleo/crear.js') }}\" type=\"text/javascript\"></script>\n   143→    <script src=\"{{ asset('src/portal-empleo/completar-datos-perfil-ia.js') }}\" type=\"text/javascript\"></script>\n   144→    <script src=\"{{ asset('js/ofertas-laborales/funciones/funciones-seleccion.js') }}\" type=\"text/javascript\"></script>\n   145→    <script src=\"{{ asset('js/ofertas-laborales/form-informacion.js') }}\" type=\"text/javascript\"></script>\n   146→@endsection\n   147→@section('modals')\n   148→    ${crearModal({\n   149→        id: 'cancelar-creacion-usuario',\n   150→        dialog_class: 'modal-md modal-dialog-centered',\n   151→        titulo_header: 'Cancelar creación de usuario',\n   152→        subtitulo_header: 'Se perderán todos los datos ingresados en el formulario. ¿Desea continuar?',\n   153→        boton_footer1: {\n   154→            type: 'button',\n   155→            texto: 'Cancelar',\n   156→            class: 'btn-outline-primary',\n   157→            cerrar_modal: true,\n   158→        },\n   159→        boton_footer2: {\n   160→            texto: 'Aceptar',\n   161→            class: 'btn-primary',\n   162→            onclick: `event.preventDefault(); document.getElementById('logout-form').submit();`,\n   163→        },\n   164→        modal_body: ``\n   165→    })}\n   166→    ${crearModal({\n   167→        id: 'modal-generando-ia',\n   168→        dialog_class: 'modal-md modal-dialog-centered',\n   169→        adiconales_modals_header: `data-bs-backdrop=\"static\"`,\n   170→        header_cerrar: 'd-none',\n   171→        titulo_header: 'Generando...',\n   172→        modal_body: `\n   173→            <div class=\"col-12\">\n   174→                <div class=\"row justify-content-center\">\n   175→                    <div class=\"col-4\">\n   176→                        <img class=\"w-100\" src=\"{{ asset('/imagenes/gifs/cargue-ia.gif') }}\">\n   177→                    </div>\n   178→                </div>\n   179→            </div>\n   180→        `\n   181→    })}\n   182→    ${crearModal({\n   183→        id: 'modal-agregar-nivel-educativo',\n   184→        dialog_class: 'modal-lg modal-dialog-centered',\n   185→        titulo_header: '<span class=\"text-gray-10 fw-semibold\">Agregar nivel educativo</span>',\n   186→        boton_footer1: {\n   187→            type: 'button',\n   188→            texto: 'Cancelar',\n   189→            class: 'btn-outline-primary',\n   190→            cerrar_modal: true,\n   191→        },\n   192→        boton_footer2: {\n   193→            type: 'submit',\n   194→            texto: 'Agregar nivel educativo',\n   195→            class: 'btn-primary',\n   196→            form: 'formulario-nivel-educativo',\n   197→        },\n   198→        modal_body: `\n   199→            <form id=\"formulario-nivel-educativo\" class=\"px-4\" action=\"/nivel-educativo\">\n   200→                @csrf\n   201→                <div class=\"row\">\n   202→                    <div class=\"col-12\">\n   203→                        ${crearInput({\n   204→                            id: 'titulo',\n   205→                            name: 'titulo',\n   206→                            maxlength: 50,\n   207→                            required: true,\n   208→                            autocomplete: 'off',\n   209→                            label: 'Título',\n   210→                        })}\n   211→                    </div>\n   212→                    <div class=\"col-12 col-lg-6\">\n   213→                        ${crearInput({\n   214→                            id: 'institucion_educativa',\n   215→                            name: 'institucion_educativa',\n   216→                            input_container_class: 'mb-6',\n   217→                            maxlength: 50,\n   218→                            required: true,\n   219→                            autocomplete: 'off',\n   220→                            label: 'Institución educativa',\n   221→                        })}\n   222→                    </div>\n   223→                    <div class=\"col-12 col-lg-6\">\n   224→                        ${crearSelect2({\n   225→                            id: 'nivel_educativo_id',\n   226→                            name: 'nivel_educativo_id',\n   227→                            label: 'Nivel educativo',\n   228→                            placeholder: 'Nivel educativo',\n   229→                            required: true,\n   230→                            opciones: @json($niveles_educativos),\n   231→                            buscador: false\n   232→                        })}\n   233→                    </div>\n   234→                    <div class=\"col-5 text-headline-6 fw-semibold\">\n   235→                        Estoy cursando estos estudios\n   236→                    </div>\n   237→                    <div class=\"col-7 mb-5\">\n   238→                        ${crearToggle({\n   239→                            id: 'cursando_estudios',\n   240→                            name: 'graduado_cursando_estudios',\n   241→                            value: 'cursando',\n   242→                            checked: false,\n   243→                            onchange: 'seleccionarGraduadoCursando(this.checked)',\n   244→                        })}\n   245→                    </div>\n   246→                    <div class=\"col-12\" id=\"fechas-cursando-estudios\">\n   247→                        <div class=\"row align-items-center\">\n   248→                            <div class=\"col-12 col-md-6 mt-2\">\n   249→                                ${crearSelectorMesAnio({\n   250→                                    id: 'fecha_inicio_estudio',\n   251→                                    name: 'fecha_inicio_estudio',\n   252→                                    placeholder: 'mm/yyyy',\n   253→                                    disabled: false,\n   254→                                    required: true,\n   255→                                    input_container_class: 'mb-4',\n   256→                                    label: 'Fecha de inicio',\n   257→                                    icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n   258→                                })}\n   259→                            </div>\n   260→                            <div class=\"col-12 col-md-6 mt-2\">\n   261→                                ${crearSelectorMesAnio({\n   262→                                    id: 'fecha_fin_estudio',\n   263→                                    name: 'fecha_fin_estudio',\n   264→                                    placeholder: 'mm/yyyy',\n   265→                                    disabled: false,\n   266→                                    required: true,\n   267→                                    input_container_class: 'mb-4',\n   268→                                    label: 'Fecha de finalización',\n   269→                                    icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n   270→                                })}\n   271→                            </div>\n   272→                        </div>\n   273→                    </div>\n   274→                </div>\n   275→            </form>\n   276→        `\n   277→    })}\n   278→\n   279→    ${crearModal({\n   280→        id: 'modal-agregar-experiencia-laboral',\n   281→        dialog_class: 'modal-lg modal-dialog-centered',\n   282→        titulo_header: '<span class=\"text-gray-10 fw-semibold\">Agregar experiencia laboral</span>',\n   283→        boton_footer1: {\n   284→            type: 'button',\n   285→            texto: 'Cancelar',\n   286→            class: 'btn-outline-primary',\n   287→            cerrar_modal: true,\n   288→        },\n   289→        boton_footer2: {\n   290→            type: 'submit',\n   291→            texto: 'Agregar experiencia laboral',\n   292→            class: 'btn-primary',\n   293→            form: 'formulario-experiencia-laboral',\n   294→        },\n   295→        modal_body: `\n   296→            <form id=\"formulario-experiencia-laboral\" class=\"px-4\" action=\"/experiencia-laboral\">\n   297→                @csrf\n   298→                <div class=\"row\">\n   299→                    <div class=\"col-12\">\n   300→                        ${crearInput({\n   301→                            id: 'cargo',\n   302→                            name: 'cargo',\n   303→                            maxlength: 50,\n   304→                            required: true,\n   305→                            autocomplete: 'off',\n   306→                            label: 'Cargo',\n   307→                        })}\n   308→                    </div>\n   309→                    <div class=\"col-12\">\n   310→                        ${crearInput({\n   311→                            id: 'empresa',\n   312→                            name: 'empresa',\n   313→                            maxlength: 50,\n   314→                            required: true,\n   315→                            autocomplete: 'off',\n   316→                            label: 'Empresa u organización',\n   317→                        })}\n   318→                    </div>\n   319→                    <div class=\"col-12 mb-2\">\n   320→                        ${crearTextarea({\n   321→                            id: 'funciones_experiencia',\n   322→                            name: 'funciones_experiencia',\n   323→                            class: 'input-dinamico',\n   324→                            placeholder: '',\n   325→                            disabled: false,\n   326→                            required: true,\n   327→                            label: 'Funciones y responsabilidades',\n   328→                            contador: 500,\n   329→                        })}\n   330→                    </div>\n   331→                    <div class=\"col-5 text-headline-6 fw-semibold\">\n   332→                        Actualmente tengo este trabajo\n   333→                    </div>\n   334→                    <div class=\"col-7 mb-5\">\n   335→                        ${crearToggle({\n   336→                            id: 'actualmente_trabajo',\n   337→                            name: 'actualmente_trabajo',\n   338→                            value: true,\n   339→                            checked: false,\n   340→                            onchange: 'seleccionarActualmenteTrabajo(this.checked)',\n   341→                        })}\n   342→                    </div>\n   343→                    <div class=\"col-12\">\n   344→                        <div class=\"row mt-2\" id=\"fechas-trabajo-experiencia\">\n   345→                            <div class=\"col-12 col-md-6 mt-3\">\n   346→                                ${crearSelectorMesAnio({\n   347→                                    id: 'fecha_inicio_experiencia',\n   348→                                    name: 'fecha_inicio_experiencia',\n   349→                                    placeholder: 'mm/yyyy',\n   350→                                    disabled: false,\n   351→                                    required: true,\n   352→                                    input_container_class: 'mb-2',\n   353→                                    label: 'Fecha de inicio',\n   354→                                    icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n   355→                                })}\n   356→                            </div>\n   357→                            <div class=\"col-12 col-md-6 mt-3\">\n   358→                                ${crearSelectorMesAnio({\n   359→                                    id: 'fecha_fin_experiencia',\n   360→                                    name: 'fecha_fin_experiencia',\n   361→                                    placeholder: 'mm/yyyy',\n   362→                                    disabled: false,\n   363→                                    required: true,\n   364→                                    input_container_class: 'mb-2',\n   365→                                    label: 'Fecha de finalización',\n   366→                                    icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n   367→                                })}\n   368→                            </div>\n   369→                        </div>\n   370→                    </div>\n   371→                </div>\n   372→            </form>\n   373→        `\n   374→    })}\n   375→@endsection\n   376→\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"17deaa3f-d7ba-4bd9-ab4b-e73259993b1c","timestamp":"2026-01-26T16:27:59.665Z","toolUseResult":{"type":"text","file":{"filePath":"c:\\laragon\\www\\psicoalianza-2\\resources\\views\\aplicantes\\completar-datos-usuario.blade.php","content":"@extends('layouts.portal-empleo')\n@section('titulo', 'Vacantes')\n\n@section('estilos')\n    <link rel=\"stylesheet\" href=\"{{ asset('src/aplicantes/css/datos-generales.css') }}\">\n    <link rel=\"stylesheet\" href=\"{{ asset('src/portal-empleo/css/crear.css') }}\">\n@endsection\n\n@section('contenido')\n<section class=\"container-fluid p-0 h-100\">\n    <div class=\"card-body mb-4 px-5\">\n        @php\n            $migasDePan = [\n                ['nombre' => 'Completar y verificar datos', 'url' => '', 'active' => true],\n            ];\n        @endphp\n        ${crearMigaDePan({migas:@json($migasDePan), volver:true})}\n    </div>\n    <div class=\"row justify-content-center bg-gray-90 py-5 overflow-auto border-top\" id=\"contenedor-formularios\">\n        <div class=\"col-12 col-sm-10 col-md-8 col-lg-7 col-xl-6 col-xxl-5 pt-12 pb-6 rounded-2 bg-white shadow-1\">\n            <div class=\"row align-items-center\">\n                <div class=\"col-auto text-gray-10 pe-0 ps-8\">\n                    <i class=\"bi bi-person text-headline-3\"></i>\n                </div>\n                <div class=\"col-auto text-headline-2 text-gray-30 fw-semibold\">\n                    Completar y verificar datos\n                </div>\n                <form id=\"formulario\" action=\"/completar-datos-usuario/datos-generales\" class=\"col-12 mt-8\" data-activar-siguiente=\"false\">\n                    @csrf\n                    <input type=\"hidden\" id=\"id\" name=\"id\" value=\"{{ $usuario->id }}\">\n                    @if ($revision_hv)\n                        <input type=\"hidden\" id=\"vacante\" name=\"vacante\" value=\"{{ $revision_hv }}\">\n                    @endif\n                    ${crearSeccionPasos({\n                        id: 'usuario',\n                        tab_content_class: 'mt-10 border-top row',\n                        tabs: [\n                            {\n                                id: 'datos-generales',\n                                titulo: `1`,\n                                subtitulo: `Datos generales`,\n                                contenido: `@include('portales-empleo.aplicante.datos-generales')`,\n                                activo: true,\n                            },\n                            {\n                                id: 'datos-acceso',\n                                titulo: `2`,\n                                subtitulo: `Datos de acceso`,\n                                contenido: `@include('portales-empleo.aplicante.datos-acceso')`,\n                                disabled: true\n                            },\n                            @if ($revision_hv)\n                                {\n                                    id: 'perfil-laboral',\n                                    titulo: `3`,\n                                    subtitulo: `Hoja de vida`,\n                                    contenido: `@include('portales-empleo.aplicante.perfil-laboral')`,\n                                    disabled: true,\n                                    contenedor: '#contenedor-perfil-laboral',\n                                },\n                            @endif\n                        ]\n                    })}\n                </form>\n                <div class=\"tab-content\" id=\"contenedor-perfil-laboral\"></div>\n            </div>\n        </div>\n    </div>\n</section>\n@endsection\n@section('scripts')\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css\" rel=\"stylesheet\">\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js\"></script>\n    <script type=\"text/javascript\">\n        const USUARIO = @json($usuario);\n        let modalidades_estudios = [\n            {id: 'Diurna', nombre: 'Diurna'},\n            {id: 'Nocturna', nombre: 'Nocturna'}\n        ];\n        let niveles_educativos = @json($niveles_educativos);\n        let discapacidades = @json($discapacidades);\n        let revision_hv_ia = {{ $revision_hv_ia ? 'true' : 'false' }};\n        let revision_hv = {{ $revision_hv ? 'true' : 'false' }};\n        let validar_contrasena = true;\n        let idiomas = [\n            {'id': 1, 'nombre': 'Inglés'},\n            {'id': 2, 'nombre': 'Portugués'},\n            {'id': 3, 'nombre': 'Francés'},\n            {'id': 4, 'nombre': 'Alemán'},\n            {'id': 5, 'nombre': 'Mandarín'},\n            {'id': 6, 'nombre': 'Italiano'},\n            {'id': 7, 'nombre': 'Ruso'},\n            {'id': 8, 'nombre': 'Árabe'},\n        ];\n        $(document).ready(function () {\n            consultarPaisesListadoCompleto();\n            $('#nombres').val(USUARIO.nombres.trim());\n            $('#apellidos').val(USUARIO.apellidos.trim());\n            $('#fecha_nacimiento')[0]._flatpickr.setDate(USUARIO?.fecha_nacimiento);\n            $('#genero_id').val(USUARIO.genero_id).trigger('change').trigger('select2:select');\n            $('#telefono').val(USUARIO.telefono);\n            $('#direccion').val(USUARIO.direccion);\n            $('#tipo_documento_id').val(USUARIO.tipo_documento_id).trigger('change').trigger('select2:select');\n            $('#documento').val(USUARIO.documento);\n            $('#email').val(USUARIO.email);\n            $('#email-enviado').text(USUARIO.email);\n            establecerDatosComponentePaisesDepartamentosCiudades({\n                pais: {\n                    html_id: 'pais_id',\n                    value: USUARIO.ciudad?.departamento?.pais_id ? USUARIO.ciudad.departamento.pais_id : null\n                },\n                departamento: {\n                    html_id: 'departamento_id',\n                    value: USUARIO.ciudad?.departamento_id ? USUARIO.ciudad.departamento_id : null\n                },\n                ciudad: {\n                    html_id: 'ciudad_id',\n                    value: USUARIO.ciudad?.id ? USUARIO.ciudad.id : null\n                },\n            });\n            let politicas_aceptadas = false;\n            if (USUARIO.politicas_aceptadas.some(p => p.id === 1)) {\n                politicas_aceptadas = true;\n                $('#aceptar_politicas').prop('checked', politicas_aceptadas);\n            }\n            let aceptar_teminos_condiciones = false;\n            if (USUARIO.politicas_aceptadas.some(p => p.id === 2)) {\n                aceptar_teminos_condiciones = true;\n                $('#aceptar_teminos_condiciones').prop('checked', aceptar_teminos_condiciones);\n            }\n            if (politicas_aceptadas && aceptar_teminos_condiciones) {\n                $('#btn-siguiente-datos-generales').prop('disabled', false);\n                $('#titulo-tab-pasos-usuario-datos-acceso').prop('disabled', false);\n                $('#contenedor-texto-verificacion-cuenta').addClass('d-none');\n                $('#contenedor-mensaje-verificar').addClass('d-none');\n                $('#contenedor-boton-verificar-correo').addClass('d-none');\n                usuario_verificado = true;\n                validar_contrasena = false;\n            }\n        });\n    </script>\n    <script src=\"{{ asset('src/portal-empleo/crear.js') }}\" type=\"text/javascript\"></script>\n    <script src=\"{{ asset('src/portal-empleo/completar-datos-perfil-ia.js') }}\" type=\"text/javascript\"></script>\n    <script src=\"{{ asset('js/ofertas-laborales/funciones/funciones-seleccion.js') }}\" type=\"text/javascript\"></script>\n    <script src=\"{{ asset('js/ofertas-laborales/form-informacion.js') }}\" type=\"text/javascript\"></script>\n@endsection\n@section('modals')\n    ${crearModal({\n        id: 'cancelar-creacion-usuario',\n        dialog_class: 'modal-md modal-dialog-centered',\n        titulo_header: 'Cancelar creación de usuario',\n        subtitulo_header: 'Se perderán todos los datos ingresados en el formulario. ¿Desea continuar?',\n        boton_footer1: {\n            type: 'button',\n            texto: 'Cancelar',\n            class: 'btn-outline-primary',\n            cerrar_modal: true,\n        },\n        boton_footer2: {\n            texto: 'Aceptar',\n            class: 'btn-primary',\n            onclick: `event.preventDefault(); document.getElementById('logout-form').submit();`,\n        },\n        modal_body: ``\n    })}\n    ${crearModal({\n        id: 'modal-generando-ia',\n        dialog_class: 'modal-md modal-dialog-centered',\n        adiconales_modals_header: `data-bs-backdrop=\"static\"`,\n        header_cerrar: 'd-none',\n        titulo_header: 'Generando...',\n        modal_body: `\n            <div class=\"col-12\">\n                <div class=\"row justify-content-center\">\n                    <div class=\"col-4\">\n                        <img class=\"w-100\" src=\"{{ asset('/imagenes/gifs/cargue-ia.gif') }}\">\n                    </div>\n                </div>\n            </div>\n        `\n    })}\n    ${crearModal({\n        id: 'modal-agregar-nivel-educativo',\n        dialog_class: 'modal-lg modal-dialog-centered',\n        titulo_header: '<span class=\"text-gray-10 fw-semibold\">Agregar nivel educativo</span>',\n        boton_footer1: {\n            type: 'button',\n            texto: 'Cancelar',\n            class: 'btn-outline-primary',\n            cerrar_modal: true,\n        },\n        boton_footer2: {\n            type: 'submit',\n            texto: 'Agregar nivel educativo',\n            class: 'btn-primary',\n            form: 'formulario-nivel-educativo',\n        },\n        modal_body: `\n            <form id=\"formulario-nivel-educativo\" class=\"px-4\" action=\"/nivel-educativo\">\n                @csrf\n                <div class=\"row\">\n                    <div class=\"col-12\">\n                        ${crearInput({\n                            id: 'titulo',\n                            name: 'titulo',\n                            maxlength: 50,\n                            required: true,\n                            autocomplete: 'off',\n                            label: 'Título',\n                        })}\n                    </div>\n                    <div class=\"col-12 col-lg-6\">\n                        ${crearInput({\n                            id: 'institucion_educativa',\n                            name: 'institucion_educativa',\n                            input_container_class: 'mb-6',\n                            maxlength: 50,\n                            required: true,\n                            autocomplete: 'off',\n                            label: 'Institución educativa',\n                        })}\n                    </div>\n                    <div class=\"col-12 col-lg-6\">\n                        ${crearSelect2({\n                            id: 'nivel_educativo_id',\n                            name: 'nivel_educativo_id',\n                            label: 'Nivel educativo',\n                            placeholder: 'Nivel educativo',\n                            required: true,\n                            opciones: @json($niveles_educativos),\n                            buscador: false\n                        })}\n                    </div>\n                    <div class=\"col-5 text-headline-6 fw-semibold\">\n                        Estoy cursando estos estudios\n                    </div>\n                    <div class=\"col-7 mb-5\">\n                        ${crearToggle({\n                            id: 'cursando_estudios',\n                            name: 'graduado_cursando_estudios',\n                            value: 'cursando',\n                            checked: false,\n                            onchange: 'seleccionarGraduadoCursando(this.checked)',\n                        })}\n                    </div>\n                    <div class=\"col-12\" id=\"fechas-cursando-estudios\">\n                        <div class=\"row align-items-center\">\n                            <div class=\"col-12 col-md-6 mt-2\">\n                                ${crearSelectorMesAnio({\n                                    id: 'fecha_inicio_estudio',\n                                    name: 'fecha_inicio_estudio',\n                                    placeholder: 'mm/yyyy',\n                                    disabled: false,\n                                    required: true,\n                                    input_container_class: 'mb-4',\n                                    label: 'Fecha de inicio',\n                                    icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n                                })}\n                            </div>\n                            <div class=\"col-12 col-md-6 mt-2\">\n                                ${crearSelectorMesAnio({\n                                    id: 'fecha_fin_estudio',\n                                    name: 'fecha_fin_estudio',\n                                    placeholder: 'mm/yyyy',\n                                    disabled: false,\n                                    required: true,\n                                    input_container_class: 'mb-4',\n                                    label: 'Fecha de finalización',\n                                    icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n                                })}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </form>\n        `\n    })}\n\n    ${crearModal({\n        id: 'modal-agregar-experiencia-laboral',\n        dialog_class: 'modal-lg modal-dialog-centered',\n        titulo_header: '<span class=\"text-gray-10 fw-semibold\">Agregar experiencia laboral</span>',\n        boton_footer1: {\n            type: 'button',\n            texto: 'Cancelar',\n            class: 'btn-outline-primary',\n            cerrar_modal: true,\n        },\n        boton_footer2: {\n            type: 'submit',\n            texto: 'Agregar experiencia laboral',\n            class: 'btn-primary',\n            form: 'formulario-experiencia-laboral',\n        },\n        modal_body: `\n            <form id=\"formulario-experiencia-laboral\" class=\"px-4\" action=\"/experiencia-laboral\">\n                @csrf\n                <div class=\"row\">\n                    <div class=\"col-12\">\n                        ${crearInput({\n                            id: 'cargo',\n                            name: 'cargo',\n                            maxlength: 50,\n                            required: true,\n                            autocomplete: 'off',\n                            label: 'Cargo',\n                        })}\n                    </div>\n                    <div class=\"col-12\">\n                        ${crearInput({\n                            id: 'empresa',\n                            name: 'empresa',\n                            maxlength: 50,\n                            required: true,\n                            autocomplete: 'off',\n                            label: 'Empresa u organización',\n                        })}\n                    </div>\n                    <div class=\"col-12 mb-2\">\n                        ${crearTextarea({\n                            id: 'funciones_experiencia',\n                            name: 'funciones_experiencia',\n                            class: 'input-dinamico',\n                            placeholder: '',\n                            disabled: false,\n                            required: true,\n                            label: 'Funciones y responsabilidades',\n                            contador: 500,\n                        })}\n                    </div>\n                    <div class=\"col-5 text-headline-6 fw-semibold\">\n                        Actualmente tengo este trabajo\n                    </div>\n                    <div class=\"col-7 mb-5\">\n                        ${crearToggle({\n                            id: 'actualmente_trabajo',\n                            name: 'actualmente_trabajo',\n                            value: true,\n                            checked: false,\n                            onchange: 'seleccionarActualmenteTrabajo(this.checked)',\n                        })}\n                    </div>\n                    <div class=\"col-12\">\n                        <div class=\"row mt-2\" id=\"fechas-trabajo-experiencia\">\n                            <div class=\"col-12 col-md-6 mt-3\">\n                                ${crearSelectorMesAnio({\n                                    id: 'fecha_inicio_experiencia',\n                                    name: 'fecha_inicio_experiencia',\n                                    placeholder: 'mm/yyyy',\n                                    disabled: false,\n                                    required: true,\n                                    input_container_class: 'mb-2',\n                                    label: 'Fecha de inicio',\n                                    icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n                                })}\n                            </div>\n                            <div class=\"col-12 col-md-6 mt-3\">\n                                ${crearSelectorMesAnio({\n                                    id: 'fecha_fin_experiencia',\n                                    name: 'fecha_fin_experiencia',\n                                    placeholder: 'mm/yyyy',\n                                    disabled: false,\n                                    required: true,\n                                    input_container_class: 'mb-2',\n                                    label: 'Fecha de finalización',\n                                    icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n                                })}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </form>\n        `\n    })}\n@endsection\n","numLines":376,"startLine":1,"totalLines":376}},"sourceToolAssistantUUID":"1e89479a-f88b-4209-b501-2c281d2f502e"}
{"parentUuid":"8f87a1a8-7ad7-4eca-9412-e9ace7f86ed4","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","slug":"resilient-gathering-fog","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01LuaaHa2U9HRvp9CTK6YbRb","type":"tool_result","content":"c:\\laragon\\www\\psicoalianza-2\\public\\src\\aplicantes\\js\\demograficas.js\nc:\\laragon\\www\\psicoalianza-2\\public\\src\\aplicantes\\js\\completar-datos-usuario.js\nc:\\laragon\\www\\psicoalianza-2\\public\\src\\aplicantes\\js\\formato-entrevista.js\nc:\\laragon\\www\\psicoalianza-2\\public\\src\\aplicantes\\js\\funciones-preguntas.js\nc:\\laragon\\www\\psicoalianza-2\\public\\src\\aplicantes\\js\\preguntas.js\nc:\\laragon\\www\\psicoalianza-2\\public\\src\\aplicantes\\js\\realizar-prueba.js\nc:\\laragon\\www\\psicoalianza-2\\public\\src\\aplicantes\\js\\responder-preguntas-prefiltro.js\nc:\\laragon\\www\\psicoalianza-2\\public\\src\\aplicantes\\js\\responder-preguntas-videoentrevista.js"}]},"uuid":"8b34dda6-ddc1-4627-8328-f25011cc3e62","timestamp":"2026-01-26T16:28:01.145Z","toolUseResult":{"filenames":["c:\\laragon\\www\\psicoalianza-2\\public\\src\\aplicantes\\js\\demograficas.js","c:\\laragon\\www\\psicoalianza-2\\public\\src\\aplicantes\\js\\completar-datos-usuario.js","c:\\laragon\\www\\psicoalianza-2\\public\\src\\aplicantes\\js\\formato-entrevista.js","c:\\laragon\\www\\psicoalianza-2\\public\\src\\aplicantes\\js\\funciones-preguntas.js","c:\\laragon\\www\\psicoalianza-2\\public\\src\\aplicantes\\js\\preguntas.js","c:\\laragon\\www\\psicoalianza-2\\public\\src\\aplicantes\\js\\realizar-prueba.js","c:\\laragon\\www\\psicoalianza-2\\public\\src\\aplicantes\\js\\responder-preguntas-prefiltro.js","c:\\laragon\\www\\psicoalianza-2\\public\\src\\aplicantes\\js\\responder-preguntas-videoentrevista.js"],"durationMs":2899,"numFiles":8,"truncated":false},"sourceToolAssistantUUID":"8f87a1a8-7ad7-4eca-9412-e9ace7f86ed4"}
{"parentUuid":"20add5cc-6b12-4e63-ad86-ddacc1e1e199","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","slug":"resilient-gathering-fog","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_018ME2f3dfG6ERDxydJCn8dZ","type":"tool_result","content":"c:\\laragon\\www\\psicoalianza-2\\public\\src\\aplicantes\\js\\completar-datos-usuario.js"}]},"uuid":"82a23231-4f05-4d48-b350-83e236df1a27","timestamp":"2026-01-26T16:28:01.155Z","toolUseResult":{"filenames":["c:\\laragon\\www\\psicoalianza-2\\public\\src\\aplicantes\\js\\completar-datos-usuario.js"],"durationMs":2910,"numFiles":1,"truncated":false},"sourceToolAssistantUUID":"20add5cc-6b12-4e63-ad86-ddacc1e1e199"}
{"parentUuid":"82a23231-4f05-4d48-b350-83e236df1a27","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","slug":"resilient-gathering-fog","message":{"model":"claude-opus-4-5-20251101","id":"msg_01UhqyhxSc41CKtyRxA2i8hx","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Encontré el archivo JS principal. Ahora debo leer el JS principal y también los archivos JS que se incluyen en la vista:\n1. `src/portal-empleo/crear.js`\n2. `src/portal-empleo/completar-datos-perfil-ia.js`\n3. `js/ofertas-laborales/funciones/funciones-seleccion.js`\n4. `js/ofertas-laborales/form-informacion.js`\n\nTambién hay un archivo específico `completar-datos-usuario.js` que encontré pero no está referenciado directamente en el blade (quizás sea un archivo legacy o se carga de otra manera).\n\nVoy a leer los archivos JS más relevantes.","signature":"EskFCkYICxgCKkB/zW7bd9xX7BKLe+TYmKKRiOyCU06bd6yJ9cFpAHcHe355jMGZRceMFhV239XAK4F+5uLFZuIwQPzLIutMzSCpEgzIqwyLX+kMLehjlTYaDHeQN6QHZT6fZY6tQiIwoRzZ/YlnRayCIOjV69vAMPVwgxvSUhKSFAa8lHyGw3H50enl7j3ok09ee2fww3OhKrAEOOYCn5OEirPOdrcr4efub8Od1VJMlXaXroszqyss1C/O1okguxl4MYWiekxP/nGNWoB4pUhAKExh5NVr55ET3LbNXvGKeP+N6g6dagx5nsQIgi9VXCDrELuecOkAMIyZZTI5P9EiyFLaGt418N4CYMB+ybVizmub8je0ZofNKmABd7sV53naav38QKBm0TI7iX//cBuwfN5/vbLw7epr6kKrzplveYG5GpDfzmZfxTuUsxYrTYomlh97ejSwqG0G9NVT8hA5DeazD0VvJfPPJ3KYYxvsaS/Xmo0bwwOUaHFTPA58JLXsCawFDY4Qy2p1AGtMDgvOTXHbDfv9AunzjP6JgC32jPviAMzPLTxn5ssw2Lo75+FyK26gxoIliYtJAMqkfZ4OhZu55mcNwDio+E8Fantpi+hMJg0YvVKQzuN1uqlLQhVlB0wxDzzJwEA+vPryXs7fHDOOLR+M6Kb4sWFV2TsscGfRD3AMj4fmP8+tB05liD7SGvgyC+MQyY4FFy5rsl1JK0EYMDuwmGdHbv39KTGwzDfsLa987kscZec4/MV/Wa0jJtk2nUcCNcSO+nJj5CV8cUx26unlwr6qwHFzsfYUTPTm+iqEQu0YYJ6aZ3L+K2HXBbY/ywUy4RfL04TDvRHXAx+Oljf5ddTZuItxrF3KljbX1kP/v7lwgK02eDmRo9/PrhcGPXdt9fi9kG1z5O6KhI1tDl7FsHiK1rKTt5LD+gD6pqYZLYjsd+wYAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":300,"cache_creation_input_tokens":6199,"cache_read_input_tokens":25342,"cache_creation":{"ephemeral_5m_input_tokens":6199,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CXWJcvYKCuRcssUEbY4aF","type":"assistant","uuid":"7644e842-1e60-4551-aca7-0c6654796b6e","timestamp":"2026-01-26T16:28:06.761Z"}
{"parentUuid":"7644e842-1e60-4551-aca7-0c6654796b6e","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","slug":"resilient-gathering-fog","message":{"model":"claude-opus-4-5-20251101","id":"msg_01UhqyhxSc41CKtyRxA2i8hx","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_0111F18Vv7GKudSkoFpfuxmZ","name":"Read","input":{"file_path":"c:\\laragon\\www\\psicoalianza-2\\public\\src\\portal-empleo\\crear.js"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":300,"cache_creation_input_tokens":6199,"cache_read_input_tokens":25342,"cache_creation":{"ephemeral_5m_input_tokens":6199,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CXWJcvYKCuRcssUEbY4aF","type":"assistant","uuid":"0473097f-2d5f-411e-b007-86077438f7dd","timestamp":"2026-01-26T16:28:07.281Z"}
{"parentUuid":"0473097f-2d5f-411e-b007-86077438f7dd","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","slug":"resilient-gathering-fog","message":{"model":"claude-opus-4-5-20251101","id":"msg_01UhqyhxSc41CKtyRxA2i8hx","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01CoP1mKBnXM7WFcvQ13Abwa","name":"Read","input":{"file_path":"c:\\laragon\\www\\psicoalianza-2\\public\\src\\portal-empleo\\completar-datos-perfil-ia.js"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":300,"cache_creation_input_tokens":6199,"cache_read_input_tokens":25342,"cache_creation":{"ephemeral_5m_input_tokens":6199,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CXWJcvYKCuRcssUEbY4aF","type":"assistant","uuid":"4922adca-e81d-4996-a547-560a6a4b95fe","timestamp":"2026-01-26T16:28:07.779Z"}
{"parentUuid":"4922adca-e81d-4996-a547-560a6a4b95fe","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","slug":"resilient-gathering-fog","message":{"model":"claude-opus-4-5-20251101","id":"msg_01UhqyhxSc41CKtyRxA2i8hx","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01Jr4Ghzjph45sVmAoSfAmUu","name":"Read","input":{"file_path":"c:\\laragon\\www\\psicoalianza-2\\public\\src\\aplicantes\\js\\completar-datos-usuario.js"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":300,"cache_creation_input_tokens":6199,"cache_read_input_tokens":25342,"cache_creation":{"ephemeral_5m_input_tokens":6199,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CXWJcvYKCuRcssUEbY4aF","type":"assistant","uuid":"0224aefd-9afe-4281-a16f-8ce10076fea8","timestamp":"2026-01-26T16:28:08.232Z"}
{"parentUuid":"4922adca-e81d-4996-a547-560a6a4b95fe","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","slug":"resilient-gathering-fog","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01CoP1mKBnXM7WFcvQ13Abwa","type":"tool_result","content":"     1→/**\n     2→ * Función para enviar la hoja de vida a procesar por la IA.\n     3→ *\n     4→ * @param {string} elemento_html_archivo - ID del elemento HTML que contiene el archivo de la hoja de vida.\n     5→ * @returns {void}\n     6→ * @author José Manuel Jiménez\n     7→ */\n     8→function generarPerfilHVPorIA(elemento_html_archivo) {\n     9→    let archivo = $(`#${elemento_html_archivo}`).prop('files')[0];\n    10→    let formulario_hoja_vida = new FormData();\n    11→    formulario_hoja_vida.append('_token', $('meta[name=\"csrf-token\"]').attr('content'));\n    12→    formulario_hoja_vida.append('archivo', archivo);\n    13→    formulario_hoja_vida.append('_method', 'POST');\n    14→\n    15→    const vacanteId = new URLSearchParams(window.location.search).get('vacante_id') || '';\n    16→    if (vacanteId) {\n    17→        formulario_hoja_vida.append('vacante_id', vacanteId);\n    18→    }\n    19→\n    20→    $('#modal-generando-ia').modal('show');\n    21→    $.ajax({\n    22→        url: `/perfiles-laborales-leer-hv-ia`,\n    23→        type: 'POST',\n    24→        data: formulario_hoja_vida,\n    25→        processData: false,\n    26→        contentType: false,\n    27→        success: function(respuesta) {\n    28→            let hoja_vida_ia = respuesta.data;\n    29→            estudios = hoja_vida_ia.estudios;\n    30→            $.each(estudios, function(indice, estudio) {\n    31→                let nivel_educativo_encontrado = niveles_educativos.find(function(nivel) {\n    32→                    if (nivel.nombre.toLowerCase() === estudio.nivel_educativo.toLowerCase()) {\n    33→                        return nivel.id;\n    34→                    }\n    35→                });\n    36→                if (nivel_educativo_encontrado) {\n    37→                    estudios[indice].nivel_educativo_id = nivel_educativo_encontrado.id;\n    38→                } else {\n    39→                    estudios[indice].nivel_educativo_id = null;\n    40→                }\n    41→                if (estudio.fecha_fin) {\n    42→                    estudios[indice].graduado = true;\n    43→                } else {\n    44→                    estudios[indice].graduado = false;\n    45→                }\n    46→                if (estudio.jornada == null) {\n    47→                    estudio.jornada = 'Diurna';\n    48→                }\n    49→            });\n    50→            mostrarNivelesEducativos();\n    51→            experiencias = hoja_vida_ia.experiencias_laborales;\n    52→            $.each(experiencias, function(indice, experiencia) {\n    53→                if (experiencia.fecha_fin) {\n    54→                    experiencias[indice].actualmente_trabajo = false;\n    55→                } else {\n    56→                    experiencias[indice].actualmente_trabajo = true;\n    57→                }\n    58→            });\n    59→            mostrarExperienciasLaborales();\n    60→            $('#select_habilidades').val([]);\n    61→            let habilidades = hoja_vida_ia.habilidades.split(',');\n    62→            for (let i = 0; i < habilidades.length; i++) {\n    63→                if (habilidades[i]) {\n    64→                    $('#select_habilidades').append(new Option(habilidades[i], habilidades[i], false, true));\n    65→                }\n    66→            }\n    67→            $('#select_herramientas_tecnologicas').val([]);\n    68→            let herramientas_tecnologicas = hoja_vida_ia.herramientas_tecnologicas.split(',');\n    69→            for (let i = 0; i < herramientas_tecnologicas.length; i++) {\n    70→                if (herramientas_tecnologicas[i]) {\n    71→                    $('#select_herramientas_tecnologicas').append(new Option(herramientas_tecnologicas[i], herramientas_tecnologicas[i], false, true));\n    72→                }\n    73→            }\n    74→            $('#idiomas_seleccionados').val([]);\n    75→            if (hoja_vida_ia.idiomas && Array.isArray(hoja_vida_ia.idiomas)) {\n    76→                let idiomas_ids = hoja_vida_ia.idiomas.map(function(item) {\n    77→                    let idioma = idiomas.find(function(idioma) {\n    78→                        return idioma.nombre === item.idioma;\n    79→                    });\n    80→                    if (idioma && idioma.id) {\n    81→                        return idioma.id;\n    82→                    }\n    83→                });\n    84→                if (idiomas_ids.length > 0) {\n    85→                    $('#idiomas_seleccionados').val(idiomas_ids);\n    86→                    $('#idiomas_seleccionados').multiselect(\"refresh\");\n    87→                    $('#idiomas_seleccionados').trigger('change');\n    88→                }\n    89→                $.each(idiomas_ids, function(indice, id_idioma) {\n    90→                    $(`#nivel_idioma_${id_idioma}`).val(hoja_vida_ia.idiomas[indice].nivel).trigger('change.select2');\n    91→                });\n    92→            }\n    93→            revision_hv_ia = false;\n    94→            $('#contenedor-alerta-ia').addClass('d-none');\n    95→            $('#contenedor-campos-perfil').removeClass('d-none');\n    96→            $('#contenedor-opciones-crear-ia').addClass('d-none');\n    97→            $('#modal-generando-ia').modal('hide');\n    98→        },\n    99→        error: function(error) {\n   100→            mostrarToast('danger', 'Ocurrió un error al leer la hoja de vida por medio de la IA');\n   101→            $('#modal-generando-ia').modal('hide');\n   102→        }\n   103→    });\n   104→}\n   105→\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"580d3909-1568-4bce-9ab6-108397fc6241","timestamp":"2026-01-26T16:28:09.571Z","toolUseResult":{"type":"text","file":{"filePath":"c:\\laragon\\www\\psicoalianza-2\\public\\src\\portal-empleo\\completar-datos-perfil-ia.js","content":"/**\n * Función para enviar la hoja de vida a procesar por la IA.\n *\n * @param {string} elemento_html_archivo - ID del elemento HTML que contiene el archivo de la hoja de vida.\n * @returns {void}\n * @author José Manuel Jiménez\n */\nfunction generarPerfilHVPorIA(elemento_html_archivo) {\n    let archivo = $(`#${elemento_html_archivo}`).prop('files')[0];\n    let formulario_hoja_vida = new FormData();\n    formulario_hoja_vida.append('_token', $('meta[name=\"csrf-token\"]').attr('content'));\n    formulario_hoja_vida.append('archivo', archivo);\n    formulario_hoja_vida.append('_method', 'POST');\n\n    const vacanteId = new URLSearchParams(window.location.search).get('vacante_id') || '';\n    if (vacanteId) {\n        formulario_hoja_vida.append('vacante_id', vacanteId);\n    }\n\n    $('#modal-generando-ia').modal('show');\n    $.ajax({\n        url: `/perfiles-laborales-leer-hv-ia`,\n        type: 'POST',\n        data: formulario_hoja_vida,\n        processData: false,\n        contentType: false,\n        success: function(respuesta) {\n            let hoja_vida_ia = respuesta.data;\n            estudios = hoja_vida_ia.estudios;\n            $.each(estudios, function(indice, estudio) {\n                let nivel_educativo_encontrado = niveles_educativos.find(function(nivel) {\n                    if (nivel.nombre.toLowerCase() === estudio.nivel_educativo.toLowerCase()) {\n                        return nivel.id;\n                    }\n                });\n                if (nivel_educativo_encontrado) {\n                    estudios[indice].nivel_educativo_id = nivel_educativo_encontrado.id;\n                } else {\n                    estudios[indice].nivel_educativo_id = null;\n                }\n                if (estudio.fecha_fin) {\n                    estudios[indice].graduado = true;\n                } else {\n                    estudios[indice].graduado = false;\n                }\n                if (estudio.jornada == null) {\n                    estudio.jornada = 'Diurna';\n                }\n            });\n            mostrarNivelesEducativos();\n            experiencias = hoja_vida_ia.experiencias_laborales;\n            $.each(experiencias, function(indice, experiencia) {\n                if (experiencia.fecha_fin) {\n                    experiencias[indice].actualmente_trabajo = false;\n                } else {\n                    experiencias[indice].actualmente_trabajo = true;\n                }\n            });\n            mostrarExperienciasLaborales();\n            $('#select_habilidades').val([]);\n            let habilidades = hoja_vida_ia.habilidades.split(',');\n            for (let i = 0; i < habilidades.length; i++) {\n                if (habilidades[i]) {\n                    $('#select_habilidades').append(new Option(habilidades[i], habilidades[i], false, true));\n                }\n            }\n            $('#select_herramientas_tecnologicas').val([]);\n            let herramientas_tecnologicas = hoja_vida_ia.herramientas_tecnologicas.split(',');\n            for (let i = 0; i < herramientas_tecnologicas.length; i++) {\n                if (herramientas_tecnologicas[i]) {\n                    $('#select_herramientas_tecnologicas').append(new Option(herramientas_tecnologicas[i], herramientas_tecnologicas[i], false, true));\n                }\n            }\n            $('#idiomas_seleccionados').val([]);\n            if (hoja_vida_ia.idiomas && Array.isArray(hoja_vida_ia.idiomas)) {\n                let idiomas_ids = hoja_vida_ia.idiomas.map(function(item) {\n                    let idioma = idiomas.find(function(idioma) {\n                        return idioma.nombre === item.idioma;\n                    });\n                    if (idioma && idioma.id) {\n                        return idioma.id;\n                    }\n                });\n                if (idiomas_ids.length > 0) {\n                    $('#idiomas_seleccionados').val(idiomas_ids);\n                    $('#idiomas_seleccionados').multiselect(\"refresh\");\n                    $('#idiomas_seleccionados').trigger('change');\n                }\n                $.each(idiomas_ids, function(indice, id_idioma) {\n                    $(`#nivel_idioma_${id_idioma}`).val(hoja_vida_ia.idiomas[indice].nivel).trigger('change.select2');\n                });\n            }\n            revision_hv_ia = false;\n            $('#contenedor-alerta-ia').addClass('d-none');\n            $('#contenedor-campos-perfil').removeClass('d-none');\n            $('#contenedor-opciones-crear-ia').addClass('d-none');\n            $('#modal-generando-ia').modal('hide');\n        },\n        error: function(error) {\n            mostrarToast('danger', 'Ocurrió un error al leer la hoja de vida por medio de la IA');\n            $('#modal-generando-ia').modal('hide');\n        }\n    });\n}\n","numLines":105,"startLine":1,"totalLines":105}},"sourceToolAssistantUUID":"4922adca-e81d-4996-a547-560a6a4b95fe"}
{"parentUuid":"0224aefd-9afe-4281-a16f-8ce10076fea8","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","slug":"resilient-gathering-fog","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01Jr4Ghzjph45sVmAoSfAmUu","type":"tool_result","content":"     1→$(document).ready(function () {\n     2→    if (DATOS_USUARIO_DEFINIDOS && !CON_MIGRACION_DATOS_USUARIO) {\n     3→        $('#boton-pestana-formulario-datos-acceso').click();\n     4→        $('#boton-pestana-formulario-datos-generales').attr('disabled', true);\n     5→        $('#boton-regresar-formulario-datos-generales').attr('disabled', true);\n     6→    } else {\n     7→        $('#boton-regresar-formulario-datos-generales').on('click', function () {\n     8→            $('#boton-pestana-formulario-datos-acceso').click();\n     9→        });\n    10→    }\n    11→\n    12→    $('#formulario-datos-generales').on('submit', async function (evento) {\n    13→        evento.preventDefault();\n    14→        await guardarDatosGenerales($(this).serialize());\n    15→    });\n    16→\n    17→    $('#formulario-datos-acceso').on('submit', async function (evento) {\n    18→        evento.preventDefault();\n    19→        await guardarDatosAcceso($(this).serialize());\n    20→    });\n    21→});\n    22→\n    23→/**\n    24→ * Enviar código de autorización.\n    25→ *\n    26→ * @param {number} id ID del usuario.\n    27→ * @returns {Promise<void>}\n    28→ * @author Daniel Beltrán\n    29→ */\n    30→async function enviarCodigoAutorizacion(id) {\n    31→    $.ajax({\n    32→        type: 'POST',\n    33→        url : '/enviar-codigo-autorizacion',\n    34→        data: {\n    35→            _token: $('meta[name=\"csrf-token\"]').attr('content'),\n    36→            id    : id,\n    37→            email : $('#email').val()\n    38→        }\n    39→    }).done(function (respuesta) {\n    40→        $('#alerta-error').removeClass('d-block').addClass('d-none');\n    41→        $('#alerta-exito').removeClass('d-none').addClass('d-block');\n    42→        $('#alerta-exito').html(`Hemos enviado un código de confirmación a <span style=\"font-weight: bold\">${USUARIO_EMAIL}</span>. Revisa tu bandeja de entrada y, si no lo ves, revisa la carpeta de spam. Ingresa el código aquí para confirmar tu dirección de correo.`);\n    43→        console.log(respuesta);\n    44→    }).fail(function (error) {\n    45→        $('#alerta-exito').removeClass('d-block').addClass('d-none');\n    46→        $('#alerta-error').removeClass('d-none').addClass('d-block');\n    47→        $('#alerta-error').html('Ocurrio un error al intentar enviar el código de verificación por correo electrónico.');\n    48→        console.error(error);\n    49→    });\n    50→}\n    51→\n    52→/**\n    53→ * Verificar el código de autorización.\n    54→ *\n    55→ * @param {number} id ID del usuario.\n    56→ * @returns {Promise<void>}\n    57→ * @author Daniel Beltrán\n    58→ */\n    59→async function verificarCodigoAutorizacion(id) {\n    60→    $.ajax({\n    61→        type: 'POST',\n    62→        url : '/verificar-codigo-autorizacion',\n    63→        data: {\n    64→            _token: $('meta[name=\"csrf-token\"]').attr('content'),\n    65→            id    : id,\n    66→            codigo: $('#codigo_autorizacion').val()\n    67→        }\n    68→    }).done(function (respuesta) {\n    69→        if (respuesta.message === 'El código no es válido') {\n    70→            $('#alerta-exito').removeClass('d-block').addClass('d-none');\n    71→            $('#alerta-error').removeClass('d-none').addClass('d-block');\n    72→            $('#alerta-error').html('Código de verificación incorrecto, por favor revisa bien la información.');\n    73→        } else {\n    74→            $('#alerta-error').removeClass('d-block').addClass('d-none');\n    75→            $('#alerta-exito').removeClass('d-none').addClass('d-block');\n    76→            $('#alerta-exito').html('Cuenta verificada exitosamente.');\n    77→        }\n    78→        console.log(respuesta);\n    79→    }).fail(function (error) {\n    80→        $('#alerta-exito').removeClass('d-block').addClass('d-none');\n    81→        $('#alerta-error').removeClass('d-none').addClass('d-block');\n    82→        $('#alerta-error').html('Ocurrió un error al intentar verificar el código de autorización.');\n    83→        console.error(error);\n    84→    });\n    85→}\n    86→\n    87→/**\n    88→ * Guardar los datos generales del usuario.\n    89→ *\n    90→ * @param {string} datos_serializados_formulario Datos serializados del formulario de datos generales del usuario.\n    91→ * @return {Promise<void>}\n    92→ * @author Fahibram Cárcamo\n    93→ */\n    94→async function guardarDatosGenerales(datos_serializados_formulario) {\n    95→    await $.ajax({\n    96→        type: 'POST',\n    97→        url: `/completar-datos-usuario/datos-generales/${USUARIO_ID}`,\n    98→        data: datos_serializados_formulario + `&_token=${$('meta[name=\"csrf-token\"]').attr('content')}&_method=PUT&datos_generales=on`\n    99→    }).done(function (respuesta, status, xhr) {\n   100→        if (xhr && xhr.status >= 200 && xhr.status < 300) {\n   101→            mostrarToast('success', 'Datos generales de usuario almacenados con éxito');\n   102→            $('#boton-pestana-formulario-datos-acceso').click();\n   103→        }\n   104→    }).fail(function (error) {\n   105→        $('#alerta-exito').removeClass('d-block');\n   106→        $('#alerta-exito').addClass('d-none');\n   107→        mostrarToast('danger', error.responseJSON.message);\n   108→        console.error(error.responseJSON.message);\n   109→    });\n   110→}\n   111→\n   112→/**\n   113→ * Guardar los datos de acceso del usuario.\n   114→ *\n   115→ * @param {string} datos_serializados_formulario Datos serializados del formulario de datos de acceso del usuario.\n   116→ * @return {Promise<void>}\n   117→ * @author Fahibram Cárcamo\n   118→ */\n   119→async function guardarDatosAcceso(datos_serializados_formulario) {\n   120→    await $.ajax({\n   121→        type: 'POST',\n   122→        url : `/completar-datos-usuario/datos-acceso/${USUARIO_ID}`,\n   123→        data: datos_serializados_formulario + `&_token=${$('meta[name=\"csrf-token\"]').attr('content')}&_method=PUT&datos_acceso=on`\n   124→    }).done(function (respuesta, status, xhr) {\n   125→        if (xhr && xhr.status >= 200 && xhr.status < 300) {\n   126→            $('#alerta-error').removeClass('d-block').addClass('d-none');\n   127→            $('#alerta-exito').removeClass('d-block').addClass('d-none');\n   128→            mostrarToast('success', 'Datos de acceso de usuario almacenados con éxito');\n   129→            window.location.href = '/recomendaciones';\n   130→        }\n   131→    }).fail(function (error) {\n   132→        $('#alerta-error').removeClass('d-block').addClass('d-none');\n   133→        $('#alerta-exito').removeClass('d-block').addClass('d-none');\n   134→        mostrarToast('danger', error.responseJSON.message);\n   135→        console.error(error.responseJSON.message);\n   136→    });\n   137→}\n   138→\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"cbb735b5-b791-4e0e-ac86-be6dbc0fb12f","timestamp":"2026-01-26T16:28:11.820Z","toolUseResult":{"type":"text","file":{"filePath":"c:\\laragon\\www\\psicoalianza-2\\public\\src\\aplicantes\\js\\completar-datos-usuario.js","content":"$(document).ready(function () {\n    if (DATOS_USUARIO_DEFINIDOS && !CON_MIGRACION_DATOS_USUARIO) {\n        $('#boton-pestana-formulario-datos-acceso').click();\n        $('#boton-pestana-formulario-datos-generales').attr('disabled', true);\n        $('#boton-regresar-formulario-datos-generales').attr('disabled', true);\n    } else {\n        $('#boton-regresar-formulario-datos-generales').on('click', function () {\n            $('#boton-pestana-formulario-datos-acceso').click();\n        });\n    }\n\n    $('#formulario-datos-generales').on('submit', async function (evento) {\n        evento.preventDefault();\n        await guardarDatosGenerales($(this).serialize());\n    });\n\n    $('#formulario-datos-acceso').on('submit', async function (evento) {\n        evento.preventDefault();\n        await guardarDatosAcceso($(this).serialize());\n    });\n});\n\n/**\n * Enviar código de autorización.\n *\n * @param {number} id ID del usuario.\n * @returns {Promise<void>}\n * @author Daniel Beltrán\n */\nasync function enviarCodigoAutorizacion(id) {\n    $.ajax({\n        type: 'POST',\n        url : '/enviar-codigo-autorizacion',\n        data: {\n            _token: $('meta[name=\"csrf-token\"]').attr('content'),\n            id    : id,\n            email : $('#email').val()\n        }\n    }).done(function (respuesta) {\n        $('#alerta-error').removeClass('d-block').addClass('d-none');\n        $('#alerta-exito').removeClass('d-none').addClass('d-block');\n        $('#alerta-exito').html(`Hemos enviado un código de confirmación a <span style=\"font-weight: bold\">${USUARIO_EMAIL}</span>. Revisa tu bandeja de entrada y, si no lo ves, revisa la carpeta de spam. Ingresa el código aquí para confirmar tu dirección de correo.`);\n        console.log(respuesta);\n    }).fail(function (error) {\n        $('#alerta-exito').removeClass('d-block').addClass('d-none');\n        $('#alerta-error').removeClass('d-none').addClass('d-block');\n        $('#alerta-error').html('Ocurrio un error al intentar enviar el código de verificación por correo electrónico.');\n        console.error(error);\n    });\n}\n\n/**\n * Verificar el código de autorización.\n *\n * @param {number} id ID del usuario.\n * @returns {Promise<void>}\n * @author Daniel Beltrán\n */\nasync function verificarCodigoAutorizacion(id) {\n    $.ajax({\n        type: 'POST',\n        url : '/verificar-codigo-autorizacion',\n        data: {\n            _token: $('meta[name=\"csrf-token\"]').attr('content'),\n            id    : id,\n            codigo: $('#codigo_autorizacion').val()\n        }\n    }).done(function (respuesta) {\n        if (respuesta.message === 'El código no es válido') {\n            $('#alerta-exito').removeClass('d-block').addClass('d-none');\n            $('#alerta-error').removeClass('d-none').addClass('d-block');\n            $('#alerta-error').html('Código de verificación incorrecto, por favor revisa bien la información.');\n        } else {\n            $('#alerta-error').removeClass('d-block').addClass('d-none');\n            $('#alerta-exito').removeClass('d-none').addClass('d-block');\n            $('#alerta-exito').html('Cuenta verificada exitosamente.');\n        }\n        console.log(respuesta);\n    }).fail(function (error) {\n        $('#alerta-exito').removeClass('d-block').addClass('d-none');\n        $('#alerta-error').removeClass('d-none').addClass('d-block');\n        $('#alerta-error').html('Ocurrió un error al intentar verificar el código de autorización.');\n        console.error(error);\n    });\n}\n\n/**\n * Guardar los datos generales del usuario.\n *\n * @param {string} datos_serializados_formulario Datos serializados del formulario de datos generales del usuario.\n * @return {Promise<void>}\n * @author Fahibram Cárcamo\n */\nasync function guardarDatosGenerales(datos_serializados_formulario) {\n    await $.ajax({\n        type: 'POST',\n        url: `/completar-datos-usuario/datos-generales/${USUARIO_ID}`,\n        data: datos_serializados_formulario + `&_token=${$('meta[name=\"csrf-token\"]').attr('content')}&_method=PUT&datos_generales=on`\n    }).done(function (respuesta, status, xhr) {\n        if (xhr && xhr.status >= 200 && xhr.status < 300) {\n            mostrarToast('success', 'Datos generales de usuario almacenados con éxito');\n            $('#boton-pestana-formulario-datos-acceso').click();\n        }\n    }).fail(function (error) {\n        $('#alerta-exito').removeClass('d-block');\n        $('#alerta-exito').addClass('d-none');\n        mostrarToast('danger', error.responseJSON.message);\n        console.error(error.responseJSON.message);\n    });\n}\n\n/**\n * Guardar los datos de acceso del usuario.\n *\n * @param {string} datos_serializados_formulario Datos serializados del formulario de datos de acceso del usuario.\n * @return {Promise<void>}\n * @author Fahibram Cárcamo\n */\nasync function guardarDatosAcceso(datos_serializados_formulario) {\n    await $.ajax({\n        type: 'POST',\n        url : `/completar-datos-usuario/datos-acceso/${USUARIO_ID}`,\n        data: datos_serializados_formulario + `&_token=${$('meta[name=\"csrf-token\"]').attr('content')}&_method=PUT&datos_acceso=on`\n    }).done(function (respuesta, status, xhr) {\n        if (xhr && xhr.status >= 200 && xhr.status < 300) {\n            $('#alerta-error').removeClass('d-block').addClass('d-none');\n            $('#alerta-exito').removeClass('d-block').addClass('d-none');\n            mostrarToast('success', 'Datos de acceso de usuario almacenados con éxito');\n            window.location.href = '/recomendaciones';\n        }\n    }).fail(function (error) {\n        $('#alerta-error').removeClass('d-block').addClass('d-none');\n        $('#alerta-exito').removeClass('d-block').addClass('d-none');\n        mostrarToast('danger', error.responseJSON.message);\n        console.error(error.responseJSON.message);\n    });\n}\n","numLines":138,"startLine":1,"totalLines":138}},"sourceToolAssistantUUID":"0224aefd-9afe-4281-a16f-8ce10076fea8"}
{"parentUuid":"0473097f-2d5f-411e-b007-86077438f7dd","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","slug":"resilient-gathering-fog","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_0111F18Vv7GKudSkoFpfuxmZ","type":"tool_result","content":"     1→$(document).ready(function () {\n     2→    configurarFormulario(\"formulario-creacion-aplicante\");\n     3→    configurarFormulario(\"formulario-nivel-educativo\");\n     4→    configurarFormulario(\"formulario-experiencia-laboral\");\n     5→    configurarFormulario(\"formulario-perfiles-laborales\");\n     6→    moment.locale('es');\n     7→\n     8→    $('#password').on('input', function() {\n     9→        var contrasena = $(this).val();\n    10→        \n    11→        // Validar longitud (mínimo 8)\n    12→        estado_validacion_contrasena.longitud_minima = contrasena.length >= 8;\n    13→        actualizarElementoValidacion('longitud-contrasena', estado_validacion_contrasena.longitud_minima);\n    14→        \n    15→        // Validar mayúscula\n    16→        estado_validacion_contrasena.letra_mayuscula = /[A-Z]/.test(contrasena);\n    17→        actualizarElementoValidacion('mayuscula-contrasena', estado_validacion_contrasena.letra_mayuscula);\n    18→        \n    19→        // Validar minúscula\n    20→        estado_validacion_contrasena.letra_minuscula = /[a-z]/.test(contrasena);\n    21→        actualizarElementoValidacion('minuscula-contrasena', estado_validacion_contrasena.letra_minuscula);\n    22→        \n    23→        // Validar número\n    24→        estado_validacion_contrasena.tiene_numero = /\\d/.test(contrasena);\n    25→        actualizarElementoValidacion('numero-contrasena', estado_validacion_contrasena.tiene_numero);\n    26→        \n    27→        // Validar carácter especial\n    28→        estado_validacion_contrasena.caracter_especial = /[!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?]/.test(contrasena);\n    29→        actualizarElementoValidacion('caracter-especial-contrasena', estado_validacion_contrasena.caracter_especial);\n    30→        \n    31→        verificarCoincidenciaContrasenas();\n    32→        verificarTodasLasValidacionesContrasena();\n    33→    });\n    34→\n    35→    $('#password_confirmation').on('input', function() {\n    36→        verificarCoincidenciaContrasenas();\n    37→        verificarTodasLasValidacionesContrasena();\n    38→    });\n    39→\n    40→    verificarTodasLasValidacionesContrasena();\n    41→    inputsCleave();\n    42→    actualizarSelect2();\n    43→    inizializarMultiselect();\n    44→    inicializarTooltips();\n    45→    inicializarIputsFile();\n    46→});\n    47→\n    48→let usuario_verificado = false;\n    49→let respuesta_codigo = [];\n    50→let validando_codigo = false;\n    51→let estudios = [];\n    52→let experiencias = [];\n    53→let certificados_laborales = [];\n    54→let indice_editar = null;\n    55→\n    56→let estado_validacion_contrasena = {\n    57→    longitud_minima:       false,\n    58→    letra_mayuscula:       false,\n    59→    letra_minuscula:       false,\n    60→    tiene_numero:          false,\n    61→    caracter_especial:     false,\n    62→    contrasenas_coinciden: false\n    63→};\n    64→\n    65→/**\n    66→ * Función para cancelar la creación de un usuario por medio de la apertura de un modal.\n    67→ * \n    68→ * @returns {void}\n    69→ * @author José Manuel Jiménez\n    70→ */\n    71→function cancelarCreacionUsuario() {\n    72→    $('#cancelar-creacion-usuario').modal('show');\n    73→}\n    74→\n    75→/**\n    76→ * Función para validar las políticas de tratamiento de datos personales.\n    77→ * @returns {void}\n    78→ * @author José Manuel Jiménez\n    79→ * @author Andres Gonzalez\n    80→ */\n    81→function validarPoliticas() {\n    82→    let politicas_aceptadas  = $('#aceptar_politicas').is(':checked');\n    83→    let terminos_condiciones = $('#aceptar_teminos_condiciones').is(':checked');\n    84→    $('#btn-siguiente-datos-generales').prop('disabled', !(politicas_aceptadas && terminos_condiciones));\n    85→}\n    86→\n    87→/**\n    88→ * Función para validar el correo electrónico ingresado por el usuario.\n    89→ * @returns {void}\n    90→ * @author José Manuel Jiménez\n    91→ */\n    92→function validarEmail() {\n    93→    $('#email-enviado').text($('#email').val());\n    94→}\n    95→\n    96→/**\n    97→ * Función para enviar una notificación de un código para verificar el usuario.\n    98→ * \n    99→ * @param {string} tipo_verificacion Tipo de verificación (correo o celular).\n   100→ * @returns {void}\n   101→ * @author José Manuel Jiménez\n   102→ */\n   103→function enviarVerificacion(tipo_verificacion) {\n   104→    let email = $('#email').val();\n   105→    let expresion_regular_email = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n   106→    if (expresion_regular_email.test(email) && email.length > 0) {\n   107→        if (typeof USUARIO !== 'undefined') {\n   108→            $.ajax({\n   109→                type: 'POST',\n   110→                url : '/enviar-codigo-autorizacion',\n   111→                data: {\n   112→                    _token: $('meta[name=\"csrf-token\"]').attr('content'),\n   113→                    id    : USUARIO.id,\n   114→                    email : email\n   115→                }\n   116→            }).done(function (respuesta) {\n   117→                mostrarAlertasCodigoEnviado();\n   118→            }).fail(function (error) {\n   119→                $('#alerta-exito').removeClass('d-block').addClass('d-none');\n   120→                $('#alerta-error').removeClass('d-none').addClass('d-block');\n   121→                $('#alerta-error').html('Ocurrio un error al intentar enviar el código de verificación por correo electrónico.');\n   122→                console.error(error);\n   123→            });\n   124→        } else {\n   125→            $.ajax({\n   126→                type: 'POST',\n   127→                url : '/portales-empleo-enviar-codigo-autorizacion',\n   128→                data: {\n   129→                    _token: $('meta[name=\"csrf-token\"]').attr('content'),\n   130→                    email : $('#email').val()\n   131→                }\n   132→            }).done(function (respuesta) {\n   133→                respuesta_codigo = respuesta.respuesta;\n   134→                mostrarAlertasCodigoEnviado();\n   135→            }).fail(function (error) {\n   136→                console.error(error);\n   137→            });\n   138→        }\n   139→    } else {\n   140→        mostrarToast('danger', 'Por favor, ingresa un correo electrónico válido.', '', '', 'bi bi-exclamation-lg');\n   141→    }\n   142→}\n   143→\n   144→/**\n   145→ * Función para mostrar las alertas cuando se ha enviado el código de confirmación.\n   146→ * \n   147→ * @returns {void}\n   148→ * @author José Manuel Jiménez\n   149→ */\n   150→function mostrarAlertasCodigoEnviado() {\n   151→    $('#contenedor-mensaje-verificar').addClass('d-none');\n   152→    $('#contenedor-mensaje-enviado').removeClass('d-none');\n   153→    $('#contenedor-info-mensaje-enviado').removeClass('d-none');\n   154→    $('#contenedor-codigo-confirmacion').removeClass('d-none col-lg-6');\n   155→    $('#contenedor-reenviar-mensaje').addClass('d-none');\n   156→    $('.boton-verificacion').prop('disabled', true);\n   157→    let segundos_para_reenviar = 59;\n   158→    let intervalo = setInterval(function () {\n   159→    $('#contador-segundos').text(segundos_para_reenviar);\n   160→        if (segundos_para_reenviar <= 0) {\n   161→            clearInterval(intervalo);\n   162→            if (!usuario_verificado) {\n   163→                $('.boton-verificacion').prop('disabled', false);\n   164→                $('#contenedor-info-mensaje-enviado').addClass('d-none');\n   165→                $('#contenedor-mensaje-enviado').addClass('d-none');\n   166→                $('#contenedor-reenviar-mensaje').removeClass('d-none');\n   167→                $('#contenedor-codigo-confirmacion').addClass('col-lg-6');\n   168→                $('#contenedor-boton-reenviar-mensaje').removeClass('d-none');\n   169→            }\n   170→        }\n   171→        segundos_para_reenviar--;\n   172→    }, 1000);\n   173→}\n   174→\n   175→/**\n   176→ * Función para validar el código de confirmación ingresado por el usuario.\n   177→ * \n   178→ * @param {string} codigo Código de confirmación ingresado por el usuario.\n   179→ * @return {void}\n   180→ * @author José Manuel Jiménez\n   181→ */\n   182→function validarCodigoConfirmacion(codigo) {\n   183→    if (codigo.length == 6) {\n   184→        $('#contenedor-codigo-incorrecto').addClass('d-none');\n   185→        if (typeof USUARIO !== 'undefined') {\n   186→            if (!validando_codigo) {\n   187→                validando_codigo = true;\n   188→                $.ajax({\n   189→                    type: 'POST',\n   190→                    url : '/verificar-codigo-autorizacion',\n   191→                    data: {\n   192→                        _token: $('meta[name=\"csrf-token\"]').attr('content'),\n   193→                        id    : USUARIO.id,\n   194→                        codigo: codigo\n   195→                    }\n   196→                }).done(function (respuesta) {\n   197→                    validando_codigo = false;\n   198→                    if (respuesta.message === 'El código no es válido') {\n   199→                        $('#contenedor-codigo-incorrecto').removeClass('d-none');\n   200→                    } else {\n   201→                        mostrarAlertasUsuarioVerificado();\n   202→                    }\n   203→                }).fail(function (error) {\n   204→                    mostrarToast('danger', 'Ocurrió un error al intentar verificar el código de autorización.', '', '', '');\n   205→                });\n   206→            }\n   207→        } else {\n   208→            if (codigo == respuesta_codigo.codigo_autorizacion) {\n   209→                mostrarAlertasUsuarioVerificado();\n   210→            } else {\n   211→                $('#contenedor-codigo-incorrecto').removeClass('d-none');\n   212→            }\n   213→        }\n   214→    } else {\n   215→        $('#contenedor-codigo-incorrecto').addClass('d-none');\n   216→    }\n   217→}\n   218→\n   219→/**\n   220→ * Función para mostrar las alertas cuando el usuario ha sido verificado.\n   221→ * \n   222→ * @returns {void}\n   223→ * @author José Manuel Jiménez\n   224→ */\n   225→function mostrarAlertasUsuarioVerificado() {\n   226→    usuario_verificado = true;\n   227→    $('.boton-verificacion').prop('disabled', true);\n   228→    $('#contenedor-codigo-confirmacion').addClass('d-none');\n   229→    $('#contenedor-mensaje-enviado').addClass('d-none');\n   230→    $('#contenedor-info-mensaje-enviado').addClass('d-none');\n   231→    $('#contenedor-boton-reenviar-mensaje').addClass('d-none');\n   232→    $('#contenedor-mensaje-confirmacion').removeClass('d-none');\n   233→    $('#contenedor-reenviar-mensaje').addClass('d-none');\n   234→    $('#contenedor-cuenta-verificada').removeClass('d-none');\n   235→    $('#contenedor-contrasenas').removeClass('d-none');\n   236→    $('#contenedor-codigo-incorrecto').addClass('d-none');\n   237→    $('#contenedor-boton-verificar-correo').addClass('d-none');\n   238→}\n   239→\n   240→/**\n   241→ * Ejecutar la acción cuando la petición no es exitosa.\n   242→ *\n   243→ * @param {Object} respuesta Respuesta de la solicitud.\n   244→ * @returns {Promise<Array>}\n   245→ * @author Andres Gonzalez\n   246→ * @author Jair Carvajal\n   247→ */\n   248→function postError(respuesta) {\n   249→    if (respuesta.errors) {\n   250→        let errores_mostrados = false;\n   251→\n   252→        if (Array.isArray(respuesta.errors) && respuesta.errors.length > 0) {\n   253→            respuesta.errors.forEach((error) => {\n   254→                mostrarToast('danger', error);\n   255→            });\n   256→            errores_mostrados = true;\n   257→        }\n   258→        else if (typeof respuesta.errors === 'object' && Object.keys(respuesta.errors).length > 0) {\n   259→            Object.values(respuesta.errors).forEach((error_mensajes) => {\n   260→                if (Array.isArray(error_mensajes)) {\n   261→                    error_mensajes.forEach((mensaje) => {\n   262→                        mostrarToast('danger', mensaje);\n   263→                    });\n   264→                } else {\n   265→                    mostrarToast('danger', error_mensajes);\n   266→                }\n   267→            });\n   268→            errores_mostrados = true;\n   269→        }\n   270→\n   271→        if (!errores_mostrados && respuesta.message) {\n   272→            mostrarToast('danger', respuesta.message);\n   273→        }\n   274→    } else if (respuesta.message) {\n   275→        mostrarToast('danger', respuesta.message);\n   276→    } else {\n   277→        mostrarToast('danger', 'Ocurrió un error al procesar la solicitud.');\n   278→    }\n   279→}\n   280→\n   281→\n   282→/**\n   283→ * Función para cambiar al siguiénte formulario implementando validaciones\n   284→ *\n   285→ * @returns {void}\n   286→ * @author José Manuel Jiménez\n   287→ */\n   288→let mostrar_modal_horario = true;\n   289→let cambio_horario = false;\n   290→let siguiente_paso = false;\n   291→function siguienteFormularioPaso() {\n   292→    $('.tab-pane').addClass('d-block');\n   293→    $('#formulario').submit();\n   294→    let formulario_actual = $('#formulario .nav-pasos.active').first();\n   295→    let formulario_actual_id = $(formulario_actual).attr('href');\n   296→    let errores = $(formulario_actual.attr('href')).find('input.error , select.error , textarea.error');\n   297→    if (errores.length == 0) {\n   298→        if (formulario_actual_id == '#tab-pasos-usuario-datos-generales') {\n   299→            let fecha_nacimiento = moment($('#fecha_nacimiento').val(), 'YYYY-MM-DD');\n   300→            let fecha_hoy = moment();\n   301→            let edad = fecha_hoy.diff(fecha_nacimiento, 'years');\n   302→            if (edad < 15) {\n   303→                mostrarToast('danger', 'Debes tener más de 15 años.');\n   304→                return;\n   305→            }\n   306→        }\n   307→        let formulario_siguiente = $(formulario_actual).closest('.tab-pasos').next().next('.tab-pasos').find('.nav-pasos');\n   308→        if ($(formulario_siguiente).attr('href') != '#tab-pasos-usuario-perfil-laboral' || usuario_verificado) {\n   309→            $(formulario_siguiente.attr('href')).find('input.error , select.error , textarea.error').removeClass('error');\n   310→            $(formulario_siguiente.attr('href')).find('label.error').remove();\n   311→            $(formulario_siguiente).prop('disabled', false);\n   312→            $(formulario_siguiente).attr('aria-disabled', false);\n   313→            $(formulario_siguiente).tab('show');\n   314→        }\n   315→    } else {\n   316→        mostrarToast('danger', 'Parece que faltan algunos datos obligatorios. Por favor, revisa la información e intenta nuevamente', '', '', 'bi bi-exclamation-lg');\n   317→    }\n   318→    $('.tab-pane').removeClass('d-block');\n   319→}\n   320→\n   321→/**\n   322→ * Función para validar el formulario antes de enviarlo.\n   323→ *\n   324→ * @param {Object} formulario Formulario a validar.\n   325→ * @returns {boolean} Retorna true si el formulario es válido, de lo contrario false.\n   326→ * @author José Manuel Jiménez\n   327→  * @author Andres Gonzalez\n   328→ */\n   329→function validacionAdicional(formulario) {\n   330→    let valido = true;\n   331→    if (formulario == 'formulario-nivel-educativo') {\n   332→        let errores = $('#formulario-nivel-educativo').find('input.error , select.error , textarea.error');\n   333→        if (errores.length == 0) {\n   334→            let fecha_inicio = $('#fecha_inicio_estudio').val() ? moment($('#fecha_inicio_estudio').val(), 'YYYY-MM-DD') : null;\n   335→            let fecha_fin = $('#fecha_fin_estudio').val() ? moment($('#fecha_fin_estudio').val(), 'YYYY-MM-DD') : null;\n   336→            let fecha_actual = moment();\n   337→            if (fecha_inicio && fecha_inicio.isAfter(fecha_actual)) {\n   338→                mostrarToast('danger', 'La fecha de inicio del estudio no puede ser una fecha futura.');\n   339→                valido = false;\n   340→            } else if (fecha_fin && fecha_fin.isAfter(fecha_actual)) {\n   341→                mostrarToast('danger', 'La fecha de finalización del estudio no puede ser una fecha futura.');\n   342→                valido = false;\n   343→            } else if (fecha_inicio && fecha_fin && fecha_fin.isBefore(fecha_inicio)) {\n   344→                mostrarToast('danger', 'La fecha de finalización del estudio no puede ser anterior a la fecha de inicio.');\n   345→                valido = false;\n   346→            } else {\n   347→                let estudio = {\n   348→                    titulo: $('#titulo').val(),\n   349→                    institucion_educativa: $('#institucion_educativa').val(),\n   350→                    nivel_educativo_id: parseInt($('#nivel_educativo_id').val()),\n   351→                    nivel_educativo: $('#nivel_educativo_id option:selected').text().trim(),\n   352→                    graduado: $('#cursando_estudios').prop('checked') ? false : true,\n   353→                    fecha_inicio: $('#fecha_inicio_estudio').val(),\n   354→                    fecha_fin: $('#fecha_fin_estudio').val() || null,\n   355→                    jornada: $('#jornada').val() || null,\n   356→                }\n   357→                if (indice_editar == null) {\n   358→                    estudios.push(estudio);\n   359→                } else {\n   360→                    estudios[indice_editar] = estudio;\n   361→                    indice_editar = null;\n   362→                }\n   363→                mostrarNivelesEducativos();\n   364→                $('#modal-agregar-nivel-educativo').modal('hide');\n   365→                limpiarFormulario('formulario-nivel-educativo');\n   366→                mostrarToast('success', 'Nivel educativo agregado exitosamente.');\n   367→                setTimeout(() => {\n   368→                    $('#formulario-nivel-educativo').find('input.error , select.error , textarea.error').removeClass('error');\n   369→                    $('#formulario-nivel-educativo').find('label.error').remove();\n   370→                }, 100);\n   371→            }\n   372→        } else {\n   373→            mostrarToast('danger', 'Faltan datos obligatorios. Revisa la información e inténtalo de nuevo.');\n   374→        }\n   375→        valido = false;\n   376→    } else if (formulario == 'formulario-experiencia-laboral') {\n   377→        let errores = $('#formulario-experiencia-laboral').find('input.error , select.error , textarea.error');\n   378→        if (errores.length == 0) {\n   379→            let fecha_inicio = $('#fecha_inicio_experiencia').val() ? moment($('#fecha_inicio_experiencia').val(), 'YYYY-MM-DD') : null;\n   380→            let fecha_fin = $('#fecha_fin_experiencia').val() ? moment($('#fecha_fin_experiencia').val(), 'YYYY-MM-DD') : null;\n   381→            let fecha_actual = moment();\n   382→            if (fecha_inicio && fecha_inicio.isAfter(fecha_actual)) {\n   383→                mostrarToast('danger', 'La fecha de inicio de la experiencia laboral no puede ser una fecha futura.');\n   384→                valido = false;\n   385→            } else if (fecha_fin && fecha_fin.isAfter(fecha_actual)) {\n   386→                mostrarToast('danger', 'La fecha de finalización de la experiencia laboral no puede ser una fecha futura.');\n   387→                valido = false;\n   388→            } else if (fecha_inicio && fecha_fin && fecha_fin.isBefore(fecha_inicio)) {\n   389→                mostrarToast('danger', 'La fecha de finalización de la experiencia laboral no puede ser anterior a la fecha de inicio.');\n   390→                valido = false;\n   391→            } else {\n   392→                let experiencia = {\n   393→                    cargo: $('#cargo').val(),\n   394→                    empresa: $('#empresa').val(),\n   395→                    actualmente_trabajo: $('#actualmente_trabajo').prop('checked') ? 1 : 0,\n   396→                    fecha_inicio: $('#fecha_inicio_experiencia').val(),\n   397→                    fecha_fin: $('#fecha_fin_experiencia').val() || null,\n   398→                    funciones: $('#funciones_experiencia').val(),\n   399→                }\n   400→                if (indice_editar == null) {\n   401→                    experiencias.push(experiencia);\n   402→                } else {\n   403→                    experiencias[indice_editar] = experiencia;\n   404→                    indice_editar = null;\n   405→                    certificados_laborales = [];\n   406→                }\n   407→                mostrarExperienciasLaborales();\n   408→                $('#modal-agregar-experiencia-laboral').modal('hide');\n   409→                limpiarFormulario('formulario-experiencia-laboral');\n   410→                mostrarToast('success', 'Experiencia laboral agregada exitosamente.');\n   411→                setTimeout(() => {\n   412→                    $('#formulario-experiencia-laboral').find('input.error , select.error , textarea.error').removeClass('error');\n   413→                    $('#formulario-experiencia-laboral').find('label.error').remove();\n   414→                }, 100);\n   415→            }\n   416→        } else {\n   417→            mostrarToast('danger', 'Faltan datos obligatorios. Revisa la información e inténtalo de nuevo.');\n   418→        }\n   419→        valido = false;\n   420→    } else {\n   421→        let formulario_actual = $('#formulario .nav-pasos.active').first();\n   422→        let id_formulario_actual = $(formulario_actual).attr('href');\n   423→        let errores = $(id_formulario_actual).find('input.error , select.error , textarea.error');\n   424→        if (id_formulario_actual == '#tab-pasos-usuario-datos-generales') {\n   425→            let politicas_aceptadas = $('#aceptar_politicas').is(':checked');\n   426→            if (!politicas_aceptadas) {\n   427→                mostrarToast('danger', 'Debes aceptar las políticas de tratamiento de datos personales.', '', '', 'bi bi-exclamation-lg');\n   428→            }\n   429→            valido = false;\n   430→        } else if (id_formulario_actual == '#tab-pasos-usuario-datos-acceso') {\n   431→            if (validar_contrasena) {\n   432→                if (!usuario_verificado && valido) {\n   433→                    mostrarToast('danger', 'Debes verificar tu cuenta antes de continuar.', '', '', 'bi bi-exclamation-lg');\n   434→                    valido = false;\n   435→                }\n   436→                if (Object.values(estado_validacion_contrasena).includes(false) && valido) {\n   437→                    mostrarToast('danger', 'Tu contraseña no cumple con todos los requisitos de seguridad. Por favor, revisa los elementos marcados en rojo.', '', '', 'bi bi-exclamation-lg');\n   438→                    valido = false;\n   439→                }\n   440→            } else {\n   441→                valido = false;\n   442→            }\n   443→        } else if (id_formulario_actual == '#tab-pasos-usuario-perfil-laboral') {\n   444→            if (errores.length > 0) {\n   445→                mostrarToast('danger', 'Faltan algunos datos obligatorios. Por favor, revisa la información e intenta nuevamente');\n   446→                valido = false;\n   447→            }\n   448→            let salario = parseFloat(limpiarCleave($('#salario').val())) || 0;\n   449→            if (salario < 0) {\n   450→                mostrarToast('danger', 'El salario no puede ser un valor negativo.');\n   451→                valido = false;\n   452→            }\n   453→            if ($('#salario_maximo').length > 0) {\n   454→                let salario_maximo = parseFloat(limpiarCleave($('#salario_maximo').val())) || 0;\n   455→                if (salario_maximo < 0) {\n   456→                    mostrarToast('danger', 'El salario máximo no puede ser un valor negativo.');\n   457→                    valido = false;\n   458→                }\n   459→                if (salario_maximo < salario) {\n   460→                    if (salario_maximo > 0) {\n   461→                        mostrarToast('danger', 'El salario máximo no puede ser menor que el salario mínimo.');\n   462→                    }\n   463→                    valido = false;\n   464→                }\n   465→            }\n   466→            validarRangoSalario();\n   467→            let habilidades_seleccionadas = $('#select_habilidades').val();\n   468→            $('#habilidades').val(Array.isArray(habilidades_seleccionadas) ? habilidades_seleccionadas.join(', ') : '');\n   469→            let herramientas_seleccionadas = $('#select_herramientas_tecnologicas').val();\n   470→            $('#herramientas_tecnologicas').val(Array.isArray(herramientas_seleccionadas) ? herramientas_seleccionadas.join(', ') : '');\n   471→            $('#estudios').val(JSON.stringify(estudios.map(({ nivel_educativo, graduado, ...estudio }) => estudio)));\n   472→            if ($('#no_experiencia').is(':checked')) {\n   473→                $('#experiencias_laborales').val('');\n   474→            } else {\n   475→                $('#experiencias_laborales').val(JSON.stringify(experiencias.map(({ actualmente_trabajo, ...experiencia }) => experiencia)));\n   476→            }\n   477→            let idiomas = $('.idioma');\n   478→            let niveles = $('.nivel-idioma');\n   479→            let idiomas_seleccionados = [];\n   480→            for (let i = 0; i < idiomas.length; i++) {\n   481→                idiomas_seleccionados.push({\n   482→                    idioma_id: parseInt($(idiomas[i]).val()),\n   483→                    nivel    : $(niveles[i]).val()\n   484→                });\n   485→            }\n   486→            if (idiomas_seleccionados.length == 0) {\n   487→                $('#idiomas').val('');\n   488→            } else {\n   489→                $('#idiomas').val(JSON.stringify(idiomas_seleccionados));\n   490→            }\n   491→            let discapacidades_seleccionadas = $('#select_discapacidades').val();\n   492→            let discapacidades_finales = [];\n   493→            if (discapacidades_seleccionadas) {\n   494→                discapacidades_seleccionadas.forEach(discapacidad_id => {\n   495→                    let discapacidad = discapacidades.find(d => d.id == discapacidad_id);\n   496→                    if (discapacidad) {\n   497→                        let otra_discapacidad = null;\n   498→                        if (discapacidad.id == '5') {\n   499→                            otra_discapacidad = $('#otra_discapacidad').val().trim();\n   500→                        }\n   501→                        discapacidades_finales.push({\n   502→                            usuario_id: USUARIO.id,\n   503→                            discapacidad_id: parseInt(discapacidad_id),\n   504→                            otra_discapacidad: otra_discapacidad\n   505→                        });\n   506→                    }\n   507→                });\n   508→                $('#discapacidades').val(JSON.stringify(discapacidades_finales));\n   509→            } else {\n   510→                $('#discapacidades').val('');\n   511→            }\n   512→\n   513→            if (estudios.length == 0) {\n   514→                mostrarToast('danger', 'Debes agregar al menos un nivel educativo para continuar.');\n   515→                valido = false;\n   516→            }\n   517→\n   518→            // Validar que todos los estudios tengan fecha de inicio\n   519→            for (let i = 0; i < estudios.length; i++) {\n   520→                let estudio = estudios[i];\n   521→                if (!estudio.fecha_inicio || estudio.fecha_inicio.trim() === '') {\n   522→                    mostrarToast('danger', `El estudio \"${estudio.titulo || 'Sin título'}\" requiere una fecha de inicio.`);\n   523→                    valido = false;\n   524→                    break;\n   525→                }\n   526→            }\n   527→\n   528→            if (experiencias.length == 0 && !$('#no_experiencia').is(':checked')) {\n   529→                mostrarToast('danger', 'Debes agregar al menos una experiencia laboral para continuar.');\n   530→                valido = false;\n   531→            }\n   532→        }\n   533→    }\n   534→    return valido;\n   535→}\n   536→\n   537→/**\n   538→ * Función para ejecutar la acción cuando la petición es exitosa.\n   539→ * @param {Object} respuesta Respuesta de la solicitud.\n   540→ * @returns {void}\n   541→ * @author José Manuel Jiménez\n   542→ * @author Andres Gonzalez\n   543→ */\n   544→function postSuccess(respuesta) {\n   545→    if (respuesta.formulario == 'formulario-perfiles-laborales' || !revision_hv) {\n   546→        localStorage.setItem('notificacionToast', JSON.stringify({\n   547→            tipo_alerta: 'success',\n   548→            texto_1: 'Hoja de vida creada exitosamente',\n   549→        }));\n   550→\n   551→        if (revision_hv) {\n   552→            localStorage.setItem('mostrar_modal_hv', 'true');\n   553→            window.location.href = '/vacantes-postulaciones-aplicantes';\n   554→        } else {\n   555→            window.location.href = '/tareas-pendientes-aplicantes';\n   556→        }\n   557→    } else {\n   558→        mostrarToast('success', respuesta.message);\n   559→    }\n   560→}\n   561→\n   562→function abrirModalNivelEducativo() {\n   563→    $('#modal-agregar-nivel-educativo').modal('show');\n   564→    limpiarFormulario('formulario-nivel-educativo');\n   565→    indice_editar = null;\n   566→}\n   567→\n   568→/**\n   569→ * Función para seleccionar un nivel de educación.\n   570→ *\n   571→ * @param {string} nivel Nivel de educación.\n   572→ * @returns {void}\n   573→ * @author José Manuel Jiménez\n   574→ */\n   575→function seleccionarNivelEducacionAplicante(nivel) {\n   576→    $('#niveles').empty();\n   577→    let niveles = [];\n   578→    if (nivel === 'Básica y media') {\n   579→        $('#niveles').append(`\n   580→            <div class=\"row align-items-center\">\n   581→                <div class=\"col-12\">\n   582→                    ${crearSelect2({\n   583→                        opciones: niveles_basica_primaria,\n   584→                        id: 'nivel_estudio_id',\n   585→                        name: 'nivel_estudio_id',\n   586→                        class: 'input-dinamico',\n   587→                        input_container_class: 'mb-4',\n   588→                        label: 'Nivel',\n   589→                        required: true,\n   590→                    })}\n   591→                </div>\n   592→            </div>\n   593→        `);\n   594→    } else if (nivel === 'Superior') {\n   595→        $('#niveles').append(`\n   596→            <div class=\"row align-items-center\">\n   597→                <div class=\"col-6\">\n   598→                    ${crearSelect2({\n   599→                        opciones: niveles_superior,\n   600→                        id: 'nivel_estudio_id',\n   601→                        name: 'nivel_estudio_id',\n   602→                        class: 'input-dinamico',\n   603→                        input_container_class: 'mb-4',\n   604→                        label: 'Nivel',\n   605→                        required: true,\n   606→                    })}\n   607→                </div>\n   608→                <div class=\"col-6\">\n   609→                    ${crearSelect2({\n   610→                        opciones: areas_estudio,\n   611→                        id: 'area_estudio_id',\n   612→                        name: 'area_estudio_id',\n   613→                        class: 'input-dinamico',\n   614→                        input_container_class: 'mb-4',\n   615→                        label: 'Área de estudio',\n   616→                        required: true,\n   617→                    })}\n   618→                </div>\n   619→            </div>\n   620→        `);\n   621→    }\n   622→    actualizarSelect2();\n   623→}\n   624→\n   625→/**\n   626→ * Función para seleccionar si el usuario es graduado o está cursando estudios.\n   627→ * \n   628→ * @returns {void}\n   629→ * @author José Manuel Jiménez\n   630→ * @author Andres Morales\n   631→*/\n   632→function seleccionarGraduadoCursando() {\n   633→    let graduado_cursando_estudios = $('#cursando_estudios').prop('checked');\n   634→    $('#fechas-cursando-estudios').empty();\n   635→    if (graduado_cursando_estudios) {\n   636→        $('#fechas-cursando-estudios').append(`\n   637→            <div class=\"row align-items-center\">\n   638→                <div class=\"col-12 col-md-6 mt-2\">\n   639→                    ${crearSelectorMesAnio({\n   640→                        id: 'fecha_inicio_estudio',\n   641→                        name: 'fecha_inicio_estudio',\n   642→                        placeholder: 'mm/yyyy',\n   643→                        disabled: false,\n   644→                        required: true,\n   645→                        input_container_class: 'mb-4',\n   646→                        label: 'Fecha de inicio',\n   647→                        icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n   648→                    })}\n   649→                </div>\n   650→                <div class=\"col-12 col-md-6 mt-2\">\n   651→                    ${crearSelect2({\n   652→                        opciones: modalidades_estudios,\n   653→                        id: 'jornada',\n   654→                        name: 'jornada',\n   655→                        class: 'input-dinamico',\n   656→                        input_container_class: 'mb-4',\n   657→                        label: 'Modalidad',\n   658→                        required: true,\n   659→                    })}\n   660→                </div>\n   661→            </div>\n   662→        `);\n   663→        actualizarSelect2();\n   664→    } else {\n   665→        $('#fechas-cursando-estudios').append(`\n   666→            <div class=\"row align-items-center\">\n   667→                <div class=\"col-12 col-md-6 mt-2\">\n   668→                    ${crearSelectorMesAnio({\n   669→                        id: 'fecha_inicio_estudio',\n   670→                        name: 'fecha_inicio_estudio',\n   671→                        placeholder: 'mm/yyyy',\n   672→                        disabled: false,\n   673→                        required: true,\n   674→                        input_container_class: 'mb-4',\n   675→                        label: 'Fecha de inicio',\n   676→                        icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n   677→                    })}\n   678→                </div>\n   679→                <div class=\"col-12 col-md-6 mt-2\">\n   680→                    ${crearSelectorMesAnio({\n   681→                        id: 'fecha_fin_estudio',\n   682→                        name: 'fecha_fin_estudio',\n   683→                        placeholder: 'mm/yyyy',\n   684→                        disabled: false,\n   685→                        required: true,\n   686→                        input_container_class: 'mb-4',\n   687→                        label: 'Fecha de finalización',\n   688→                        icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n   689→                    })}\n   690→                </div>\n   691→            </div>\n   692→        `);\n   693→    }\n   694→    inicializarFlatpickr();\n   695→}\n   696→\n   697→/**\n   698→ * Función para mostrar los niveles educativos del usuario.\n   699→ * \n   700→ * @returns {void}\n   701→ * @author José Manuel Jiménez\n   702→ * @author Jair Carvajal\n   703→ * */\n   704→function mostrarNivelesEducativos() {\n   705→    $('#contenedor-niveles-educativos').empty();\n   706→    if (estudios.length > 0) {\n   707→        // Ordenar estudios usando función global reutilizable\n   708→        let estudios_ordenados = ordenarEstudiosPorFecha(estudios);\n   709→\n   710→        estudios_ordenados.forEach((estudio) => {\n   711→            $('#contenedor-niveles-educativos').append(`\n   712→                <div class=\"col-12 pt-3 px-3 mt-4 border rounded-3\" id=\"nivel-educativo-${estudio.indice_original}\">\n   713→                    <div class=\"row mb-2\">\n   714→                        <div class=\"col-12 col-lg\">\n   715→                            <p class=\"mb-1 fw-bold text-gray-20\">${estudio.titulo}</p>\n   716→                            <p class=\"text-body-3 mb-1\">\n   717→                            ${estudio.fecha_inicio || estudio.fecha_fin ? `<i class=\"bi bi-calendar4 text-headline-5 me-2\"></i>` : ''}\n   718→                            ${\n   719→                                estudio.fecha_inicio\n   720→                                ? moment(estudio.fecha_inicio).format(\"MMM YYYY\")\n   721→                                : ''\n   722→                            }\n   723→                            ${\n   724→                                estudio.fecha_inicio && !estudio.fecha_fin\n   725→                                ? ' - Actualmente'\n   726→                                : estudio.fecha_fin\n   727→                                    ? ` - ${moment(estudio.fecha_fin).format(\"MMM YYYY\")}`\n   728→                                    : ''\n   729→                            }\n   730→                            ${estudio.modalidad_estudio ? ` - ${estudio.modalidad_estudio}` : ''}\n   731→                            </p>\n   732→                            <p class=\"text-body-3 mb-1\"><i class=\"bi bi-buildings text-headline-5 me-2\"></i> ${estudio.institucion_educativa}</p>\n   733→                        </div>\n   734→                        <div class=\"col-auto\">\n   735→                            <div class=\"row justify-content-end\">\n   736→                                ${estudio.certificado ? `\n   737→                                    <div class=\"col-auto ps-0\">\n   738→                                        ${crearBoton({\n   739→                                            clases: 'btn-outline-primary',\n   740→                                            texto: `<i class=\"bi bi-paperclip\"></i> Ver certificado`,\n   741→                                            onclick: `verCertificadoEstudio(${estudio.indice_original})`,\n   742→                                        })}\n   743→                                    </div>\n   744→                                ` : ''}\n   745→                                <div class=\"col-auto ps-0\">\n   746→                                    ${crearBoton({\n   747→                                        clases: 'btn-outline-primary btn-circle',\n   748→                                        texto: '<i class=\"bi bi-pencil-fill\"></i>',\n   749→                                        onclick: `editarNivelEducativo(${estudio.indice_original})`\n   750→                                    })}\n   751→                                </div>\n   752→                                <div class=\"col-auto ps-0\">\n   753→                                    ${crearBoton({\n   754→                                        clases: 'btn-outline-danger btn-circle',\n   755→                                        texto: '<i class=\"bi bi-trash-fill\"></i>',\n   756→                                        onclick: `eliminarNivelEducativo(${estudio.indice_original})`\n   757→                                    })}\n   758→                                </div>\n   759→                            </div>\n   760→                        </div>\n   761→                        <div class=\"col-12 mt-3\">\n   762→                            <div class=\"row justify-content-between\">\n   763→                                <div class=\"col-auto\">\n   764→                                    <p class=\"text-body-3 text-gray-10 mb-0\">${estudio.nivel_educativo}</p>\n   765→                                </div>\n   766→                                <div class=\"col-auto\">\n   767→                                    <div class=\"row justify-content-end align-items-center\">\n   768→                                        ${estudio.graduado ? `\n   769→                                            <div class=\"col-auto pe-0\">\n   770→                                                <i class=\"bi bi-mortarboard text-headline-5 text-cta-blue\"></i>\n   771→                                            </div>\n   772→                                            <div class=\"col-auto text-body-3 text-gray-10\">\n   773→                                                Graduado\n   774→                                            </div>\n   775→                                        ` : `\n   776→                                            <div class=\"col-auto pe-0\">\n   777→                                                <i class=\"bi ${estudio.jornada == 'Diurna' ? 'bi-sun' : estudio.jornada == 'Nocturna' ? 'bi-moon' : ''} text-headline-5 text-cta-blue\"></i>\n   778→                                            </div>\n   779→                                            <div class=\"col-auto text-body-3 text-gray-10\">\n   780→                                                ${estudio.jornada ? 'Modalidad:' : ''} ${estudio.jornada || ''}\n   781→                                            </div>\n   782→                                        `}\n   783→                                    </div>\n   784→                                </div>\n   785→                            </div>\n   786→                        </div>\n   787→                    </div>\n   788→                </div>\n   789→            `);\n   790→        });\n   791→    }\n   792→}\n   793→\n   794→/**\n   795→ * Función para abrir el modal de agregar o editar un nivel educativo.\n   796→ * \n   797→ * @param {number|null} index Índice del nivel educativo a editar. Si es null, se agrega un nuevo nivel educativo.\n   798→ * @return {void}\n   799→ * @author José Manuel Jiménez\n   800→ */\n   801→function editarNivelEducativo(index) {\n   802→    indice_editar = index;\n   803→    let estudio = estudios[index];\n   804→    $('#titulo').val(estudio.titulo);\n   805→    $('#institucion_educativa').val(estudio.institucion_educativa);\n   806→    $('#cursando_estudios').prop('checked', !estudio.graduado).trigger('change');\n   807→    $('#nivel_educativo_id').val(estudio.nivel_educativo_id).trigger('change');\n   808→    $('#fecha_inicio_estudio')[0]._flatpickr.setDate(estudio.fecha_inicio);\n   809→    if ($('#fecha_fin_estudio').length > 0) {\n   810→        $('#fecha_fin_estudio')[0]._flatpickr.setDate(estudio.fecha_fin || '');\n   811→    }\n   812→    $('#jornada').val(estudio.jornada || '').trigger('change');\n   813→    establecerDatosComponentePaisesDepartamentosCiudades({\n   814→        pais: { html_id: 'estudio_pais_id', value: estudio.pais_id },\n   815→        departamento: { html_id: 'estudio_departamento_id', value: estudio.departamento_id },\n   816→        ciudad: { html_id: 'estudio_ciudad_id', value: estudio.ciudad_id },\n   817→    });\n   818→    $('#certificado').attr('data-base64', estudio.certificado || '');\n   819→    $('#modal-agregar-nivel-educativo').modal('show');\n   820→    $('#modal-agregar-nivel-educativo').find('input.error , select.error , textarea.error').removeClass('error');\n   821→    $('#modal-agregar-nivel-educativo').find('label.error').remove();\n   822→}\n   823→\n   824→/**\n   825→ * Función para eliminar un nivel educativo.\n   826→ * \n   827→ * @param {number} index Índice del nivel educativo a eliminar.\n   828→ * @return {void}\n   829→ * @author José Manuel Jiménez\n   830→ */\n   831→function eliminarNivelEducativo(index) {\n   832→    estudios.splice(index, 1);\n   833→    mostrarNivelesEducativos();\n   834→}\n   835→\n   836→/**\n   837→ * Función para ver el certificado de estudio en una nueva ventana.\n   838→ * \n   839→ * @param {number} index Índice del nivel educativo cuyo certificado se desea ver.\n   840→ * @return {void}\n   841→ * @author José Manuel Jiménez\n   842→ */\n   843→function verCertificadoEstudio(index) {\n   844→    let certificado = estudios[index].certificado;\n   845→    if (certificado) {\n   846→        try {\n   847→            let certificado_base64 = certificado.split(',')[1] || certificado;\n   848→            const binaryString = atob(certificado_base64);\n   849→            const bytes = new Uint8Array(binaryString.length);\n   850→            for (let i = 0; i < binaryString.length; i++) {\n   851→                bytes[i] = binaryString.charCodeAt(i);\n   852→            }\n   853→            let blob = new Blob([bytes], { type: 'application/pdf' });\n   854→            let url = URL.createObjectURL(blob);\n   855→            let nuevaVentana = window.open(url, '_blank');\n   856→            if (nuevaVentana) {\n   857→                nuevaVentana.onload = function() {\n   858→                    setTimeout(() => URL.revokeObjectURL(url), 1000);\n   859→                };\n   860→            }\n   861→        } catch (error) {\n   862→            mostrarToast('danger', 'Error al abrir el certificado.', '', '', 'bi bi-exclamation-lg');\n   863→        }\n   864→    } else {\n   865→        mostrarToast('danger', 'No se encontró el certificado de estudio.', '', '', 'bi bi-exclamation-lg');\n   866→    }\n   867→}\n   868→\n   869→function abrirModalExperienciaLaboral() {\n   870→    $('#modal-agregar-experiencia-laboral').modal('show');\n   871→    limpiarFormulario('formulario-experiencia-laboral');\n   872→    indice_editar = null;\n   873→}\n   874→\n   875→/**\n   876→ * Función para agregar o editar una experiencia laboral.\n   877→ * \n   878→ * @param {number|null} index Índice de la experiencia laboral a editar. Si es null, se agrega una nueva experiencia laboral.\n   879→ * @return {void}\n   880→ * @author José Manuel Jiménez\n   881→ * @author Jair Carvajal\n   882→ */\n   883→function mostrarExperienciasLaborales() {\n   884→    $('#contenedor-experiencias-laborales').empty();\n   885→    if (experiencias.length > 0) {\n   886→        $('#no_experiencia').prop('disabled', true);\n   887→        // Ordenar experiencias usando función global reutilizable\n   888→        let experiencias_ordenadas = ordenarExperienciasPorFecha(experiencias);\n   889→\n   890→        experiencias_ordenadas.forEach((experiencia) => {\n   891→            $('#contenedor-experiencias-laborales').append(`\n   892→                <div class=\"col-12 pt-3 px-3 mt-4 border rounded-3\" id=\"nivel-educativo-${experiencia.indice_original}\">\n   893→                    <div class=\"row mb-2\">\n   894→                        <div class=\"col-lg\">\n   895→                            <p class=\"mb-1 fw-bold text-gray-20\">${experiencia.cargo}</p>\n   896→                            <p class=\"text-body-3 mb-2\">\n   897→                                ${experiencia.fecha_inicio || experiencia.fecha_fin ? `<i class=\"bi bi-calendar4 text-headline-5 me-2\"></i>` : ''}\n   898→                                ${\n   899→                                    experiencia.fecha_inicio\n   900→                                    ? moment(experiencia.fecha_inicio).format(\"MMM YYYY\") +\n   901→                                        (experiencia.fecha_fin\n   902→                                        ? ` - ${moment(experiencia.fecha_fin).format(\"MMM YYYY\")}`\n   903→                                        : \" - Actualmente\")\n   904→                                    : \"\"\n   905→                                }\n   906→                                ${\n   907→                                    experiencia.fecha_inicio && experiencia.fecha_fin\n   908→                                    ? (() => {\n   909→                                        let inicio = moment(experiencia.fecha_inicio);\n   910→                                        let fin = moment(experiencia.fecha_fin);\n   911→\n   912→                                        let anios = fin.diff(inicio, 'years');\n   913→                                        let meses = fin.diff(inicio.add(anios, 'years'), 'months');\n   914→\n   915→                                        let texto = '';\n   916→                                        if (anios > 0) texto += `${anios} año${anios > 1 ? 's' : ''}`;\n   917→                                        if (meses > 0) texto += `${anios > 0 ? ' y ' : ''}${meses} mes${meses > 1 ? 'es' : ''}`;\n   918→\n   919→                                        return texto ? ` | ${texto}` : '';\n   920→                                        })()\n   921→                                    : ''\n   922→                                }\n   923→                            </p>\n   924→                            <p class=\"text-body-3 mb-1 fw-semibold text-gray-10\">${experiencia.empresa}</p>\n   925→                            ${experiencia.funciones ? `\n   926→                                <p class=\"text-body-2 fw-semibold text-gray-10 mt-3 mb-0\">Funciones y responsabilidades</p>\n   927→                                <div class=\"w-100 text-body-3\">${experiencia.funciones}</div>\n   928→                            `\n   929→                            : ''}\n   930→                        </div>\n   931→                        <div class=\"col-auto\">\n   932→                            <div class=\"row justify-content-end\">\n   933→                                <div class=\"col-auto ps-0\">\n   934→                                    ${crearBoton({\n   935→                                        clases: 'btn-outline-primary btn-circle',\n   936→                                        texto: '<i class=\"bi bi-pencil-fill\"></i>',\n   937→                                        onclick: `editarExperienciaLaboral(${experiencia.indice_original})`\n   938→                                    })}\n   939→                                </div>\n   940→                                <div class=\"col-auto ps-0\">\n   941→                                    ${crearBoton({\n   942→                                        clases: 'btn-outline-danger btn-circle',\n   943→                                        texto: '<i class=\"bi bi-trash-fill\"></i>',\n   944→                                        onclick: `eliminarExperienciaLaboral(${experiencia.indice_original})`\n   945→                                    })}\n   946→                                </div>\n   947→                            </div>\n   948→                        </div>\n   949→                        ${experiencia.funciones_principales ? `\n   950→                            <div class=\"col-12 mt-5 mb-3 text-body-2 fw-semibold text-gray-10\">Funciones principales</div>\n   951→                            <div class=\"col-12\">${experiencia.funciones_principales}</div>\n   952→                        ` : ''}\n   953→                    </div>\n   954→                </div>\n   955→            `);\n   956→        });\n   957→    } else {\n   958→        $('#no_experiencia').prop('disabled', false);\n   959→    }\n   960→}\n   961→\n   962→/**\n   963→ * Función para abrir el modal de agregar o editar una experiencia laboral.\n   964→ * \n   965→ * @param {number|null} index Índice de la experiencia laboral a editar. Si es null, se agrega una nueva experiencia laboral.\n   966→ * @return {void}\n   967→ * @author José Manuel Jiménez\n   968→ */\n   969→function editarExperienciaLaboral(index) {\n   970→    indice_editar = index;\n   971→    let experiencia = experiencias[index];\n   972→    certificados_laborales = experiencia.certificados || [];\n   973→    $('#cargo').val(experiencia.cargo);\n   974→    $('#empresa').val(experiencia.empresa);\n   975→    $(`input[name=\"cargo_modalidad_trabajo_id\"][value=\"${experiencia.modalidad_trabajo_id}\"]`).prop('checked', true).trigger('change');\n   976→    establecerDatosComponentePaisesDepartamentosCiudades({\n   977→        pais: { html_id: 'experiencia_pais_id', value: experiencia.pais_id },\n   978→        departamento: { html_id: 'experiencia_departamento_id', value: experiencia.departamento_id },\n   979→        ciudad: { html_id: 'experiencia_ciudad_id', value: experiencia.ciudad_id },\n   980→    });\n   981→    $('#funciones_experiencia').val(experiencia.funciones);\n   982→    $(`input[name=\"cargo_jornada_id\"][value=\"${experiencia.jornada_id}\"]`).prop('checked', true);\n   983→    $('#actualmente_trabajo').prop('checked', experiencia.actualmente_trabajo == 1).trigger('change');\n   984→    $('#fecha_inicio_experiencia')[0]._flatpickr.setDate(experiencia.fecha_inicio);\n   985→    if ($('#fecha_fin_experiencia').length) {\n   986→        $('#fecha_fin_experiencia')[0]._flatpickr.setDate(experiencia.fecha_fin || '');\n   987→    }\n   988→    establecerDatosClassicEditor('funciones_principales', experiencia.funciones_principales || '');\n   989→    $('#certificado_laboral').attr('data-base64', experiencia.certificado || '');\n   990→    $('#modal-agregar-experiencia-laboral').modal('show');\n   991→    $('#modal-agregar-experiencia-laboral').find('input.error , select.error , textarea.error').removeClass('error');\n   992→    $('#modal-agregar-experiencia-laboral').find('label.error').remove();\n   993→}\n   994→\n   995→/**\n   996→ * Función para eliminar una experiencia laboral.\n   997→ * \n   998→ * @param {number} index Índice de la experiencia laboral a eliminar.\n   999→ * @return {void}\n  1000→ * @author José Manuel Jiménez\n  1001→ */\n  1002→function eliminarExperienciaLaboral(index) {\n  1003→    experiencias.splice(index, 1);\n  1004→    mostrarExperienciasLaborales();\n  1005→}\n  1006→\n  1007→function mostrarCertificadosLaborales() {\n  1008→    $('#tbody-certificados-laborales').empty();\n  1009→    if (certificados_laborales.length > 0) {\n  1010→        certificados_laborales.forEach((certificado, index) => {\n  1011→            $('#tbody-certificados-laborales').append(`\n  1012→                <tr id=\"certificado-laboral-${index}\">\n  1013→                    <td>\n  1014→                        <span onclick=\"verCertificadoExperiencia(${index})\">\n  1015→                            ${certificado.nombre}\n  1016→                        </span>\n  1017→                    </td>\n  1018→                    <td>\n  1019→                        ${crearBoton({\n  1020→                            clases: 'btn-outline-danger btn-circle',\n  1021→                            texto: '<i class=\"bi bi-trash-fill\"></i>',\n  1022→                            onclick: `eliminarCertificadoLaboral(${index})`\n  1023→                        })}\n  1024→                    </td>\n  1025→                </tr>\n  1026→            `);\n  1027→        });\n  1028→    }\n  1029→}\n  1030→\n  1031→function eliminarCertificadoLaboral(index) {\n  1032→    certificados_laborales.splice(index, 1);\n  1033→    mostrarCertificadosLaborales();\n  1034→}\n  1035→\n  1036→/**\n  1037→ * Función para ver el certificado de experiencia laboral en una nueva ventana.\n  1038→ * @param {number} index Índice de la experiencia laboral cuyo certificado se desea ver.\n  1039→ * @return {void}\n  1040→ * @author José Manuel Jiménez\n  1041→ */\n  1042→function verCertificadoExperiencia(index) {\n  1043→    let certificado = certificados_laborales[index].certificado;\n  1044→    if (certificado) {\n  1045→        try {\n  1046→            let certificado_base64 = certificado.split(',')[1] || certificado;\n  1047→            const binaryString = atob(certificado_base64);\n  1048→            const bytes = new Uint8Array(binaryString.length);\n  1049→            for (let i = 0; i < binaryString.length; i++) {\n  1050→                bytes[i] = binaryString.charCodeAt(i);\n  1051→            }\n  1052→            let blob = new Blob([bytes], { type: 'application/pdf' });\n  1053→            let url = URL.createObjectURL(blob);\n  1054→            let nuevaVentana = window.open(url, '_blank');\n  1055→            if (nuevaVentana) {\n  1056→                nuevaVentana.onload = function() {\n  1057→                    setTimeout(() => URL.revokeObjectURL(url), 1000);\n  1058→                };\n  1059→            }\n  1060→        } catch (error) {\n  1061→            mostrarToast('danger', 'Error al abrir el certificado.', '', '', 'bi bi-exclamation-lg');\n  1062→        }\n  1063→    } else {\n  1064→        mostrarToast('danger', 'No se encontró el certificado de experiencia laboral.', '', '', 'bi bi-exclamation-lg');\n  1065→    }\n  1066→}\n  1067→\n  1068→/**\n  1069→ * Función para seleccionar si el usuario no tiene experiencia laboral.\n  1070→ *\n  1071→ * @param {boolean} marcado Indica si el checkbox \"No tengo experiencia laboral\" está seleccionado.\n  1072→ * @return {void}\n  1073→ * @author José Manuel Jiménez\n  1074→ * @author Andres Morales\n  1075→ */\n  1076→function seleccionarNoTengoExperiencia(marcado) {\n  1077→    if (marcado) {\n  1078→        $('#btn-agregar-experiencia-laboral').addClass('d-none');\n  1079→    } else {\n  1080→        $('#btn-agregar-experiencia-laboral').removeClass('d-none');\n  1081→    }\n  1082→}\n  1083→\n  1084→/**\n  1085→ * Función para autocompletar los campos del formulario de pruebas de desarrollo.\n  1086→ * \n  1087→ * @return {void}\n  1088→ * @author José Manuel Jiménez\n  1089→ */\n  1090→function autocompletarPruebasDesarrollo() {\n  1091→    $('#nombres').val('JOSE MANUEL');\n  1092→    $('#apellidos').val('JIMENEZ AVILA');\n  1093→    $('#fecha_nacimiento')[0]._flatpickr.setDate('1992-03-05');\n  1094→    $('#genero_id').val('1').trigger('change').trigger('select2:select');\n  1095→    $('#telefono').val('3125532022');\n  1096→    establecerDatosComponentePaisesDepartamentosCiudades({\n  1097→        pais: {\n  1098→            html_id: 'pais_id',\n  1099→            value: '13'\n  1100→        },\n  1101→        departamento: {\n  1102→            html_id: 'departamento_id',\n  1103→            value: '243'\n  1104→        },\n  1105→        ciudad: {\n  1106→            html_id: 'ciudad_id',\n  1107→            value: '2047'\n  1108→        },\n  1109→    });\n  1110→    $('#tipo_documento_id').val('1').trigger('change').trigger('select2:select');\n  1111→    $('#documento').val('1232598686');\n  1112→    $('#email').val('thejosemanu2@gmail.com');\n  1113→    $('#email-enviado').text('thejosemanu2@gmail.com');\n  1114→    //Modal de estudios\n  1115→    $('#titulo').val('Título de ejemplo');\n  1116→    $('#institucion_educativa').val('Institución Educativa Ejemplo');\n  1117→    $('#educacion_Superior').click();\n  1118→    $('#graduado').click();\n  1119→    $('#fecha_inicio_estudio')[0]._flatpickr.setDate('2025-06-15');\n  1120→    $('#fecha_fin_estudio')[0]._flatpickr.setDate('2025-06-18');\n  1121→    $('#nivel_estudio_id').val('8').trigger('change').trigger('select2:select');\n  1122→    $('#area_estudio_id').val('4').trigger('change').trigger('select2:select');\n  1123→    establecerDatosComponentePaisesDepartamentosCiudades({\n  1124→        pais: {\n  1125→            html_id: 'estudio_pais_id',\n  1126→            value: '5'\n  1127→        },\n  1128→        departamento: {\n  1129→            html_id: 'estudio_departamento_id',\n  1130→            value: '105'\n  1131→        },\n  1132→        ciudad: {\n  1133→            html_id: 'estudio_ciudad_id',\n  1134→            value: '1262'\n  1135→        },\n  1136→    });\n  1137→    //Modal de experiencia\n  1138→    $('#cargo').val('Cargo de ejemplo');\n  1139→    $('#empresa').val('Empresa Ejemplo S.A.');\n  1140→    establecerDatosComponentePaisesDepartamentosCiudades({\n  1141→        pais: {\n  1142→            html_id: 'experiencia_pais_id',\n  1143→            value: '1'\n  1144→        },\n  1145→        departamento: {\n  1146→            html_id: 'experiencia_departamento_id',\n  1147→            value: '16'\n  1148→        },\n  1149→        ciudad: {\n  1150→            html_id: 'experiencia_ciudad_id',\n  1151→            value: '597'\n  1152→        },\n  1153→    });\n  1154→    $('#cargo_jornada_id_1').click();\n  1155→    $('#fecha_inicio_experiencia')[0]._flatpickr.setDate('2025-06-16');\n  1156→    $('#fecha_fin_experiencia')[0]._flatpickr.setDate('2025-06-19');\n  1157→\n  1158→    $('#cantidad_vacantes').val('2');\n  1159→    $('#salario').val('3');\n  1160→    $('#tipo_contrato_id').val('1').trigger('change').trigger('select2:select');\n  1161→    $('#dias_laborar').val('Fines de semana').trigger('change').trigger('select2:select');\n  1162→    $('#horas_laborar').val('07:00-17:00').trigger('change').trigger('select2:select');\n  1163→    $('#experiencia_laboral').val('3').trigger('change').trigger('select2:select');\n  1164→    $('#dia_semana_Domingo').prop('checked', false).trigger('change');\n  1165→    $('#dia_semana_compensatorio').prop('checked', false).trigger('change');\n  1166→    $('#hora_entrada_Sábado').val('07:00').trigger('change').trigger('select2:select');\n  1167→    $('#hora_salida_Sábado').val('09:30').trigger('change').trigger('select2:select');\n  1168→}\n  1169→\n  1170→function cambioArchivo(archivo, nombre_archivo, tipo_archivo) {\n  1171→    if ($(archivo).prop('id') == 'certificado_laboral') {\n  1172→        setTimeout(() => {\n  1173→            let certificado_laboral = $('#certificado_laboral').attr('data-base64') || null;\n  1174→            if (certificado_laboral != null) {\n  1175→                certificados_laborales.push({\n  1176→                    certificado: certificado_laboral,\n  1177→                    nombre: nombre_archivo,\n  1178→                });\n  1179→                mostrarCertificadosLaborales();\n  1180→                $('#certificado_laboral').val('').trigger('change');\n  1181→            }\n  1182→        }, 1000);\n  1183→    }\n  1184→}\n  1185→\n  1186→/**\n  1187→ * Función para seleccionar si el usuario actualmente trabaja en la experiencia laboral.\n  1188→ * \n  1189→ * @param {boolean} seleccionado Indica si el checkbox \"Actualmente trabajo aquí\" está seleccionado.\n  1190→ * @return {void}\n  1191→ * @author José Manuel Jiménez\n  1192→ * @author Andres Morales\n  1193→ */\n  1194→function seleccionarActualmenteTrabajo(seleccionado) {\n  1195→    $('#fechas-trabajo-experiencia').empty();\n  1196→    if (seleccionado) {\n  1197→        $('#fechas-trabajo-experiencia').append(`\n  1198→            <div class=\"col-12 mt-3\">\n  1199→                ${crearSelectorMesAnio({\n  1200→                    id: 'fecha_inicio_experiencia',\n  1201→                    name: 'fecha_inicio_experiencia',\n  1202→                    placeholder: 'mm/yyyy',\n  1203→                    disabled: false,\n  1204→                    required: true,\n  1205→                    input_container_class: 'mb-2',\n  1206→                    label: 'Fecha de inicio',\n  1207→                    icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n  1208→                })}\n  1209→            </div>\n  1210→        `);\n  1211→    } else {\n  1212→        $('#fechas-trabajo-experiencia').append(`\n  1213→            <div class=\"col-12 col-md-6 mt-3\">\n  1214→                ${crearSelectorMesAnio({\n  1215→                    id: 'fecha_inicio_experiencia',\n  1216→                    name: 'fecha_inicio_experiencia',\n  1217→                    placeholder: 'mm/yyyy',\n  1218→                    disabled: false,\n  1219→                    required: true,\n  1220→                    input_container_class: 'mb-2',\n  1221→                    label: 'Fecha de inicio',\n  1222→                    icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n  1223→                })}\n  1224→            </div>\n  1225→            <div class=\"col-12 col-md-6 mt-3\">\n  1226→                ${crearSelectorMesAnio({\n  1227→                    id: 'fecha_fin_experiencia',\n  1228→                    name: 'fecha_fin_experiencia',\n  1229→                    placeholder: 'mm/yyyy',\n  1230→                    disabled: false,\n  1231→                    required: true,\n  1232→                    input_container_class: 'mb-2',\n  1233→                    label: 'Fecha de finalización',\n  1234→                    icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n  1235→                })}\n  1236→            </div>\n  1237→        `);\n  1238→    }\n  1239→    inicializarFlatpickr();\n  1240→}\n  1241→\n  1242→/**\n  1243→ * Función para actualizar el estado visual de una validación de contraseña.\n  1244→ * \n  1245→ * @return {void}\n  1246→ * @author Andres Gonzalez\n  1247→ */\n  1248→function actualizarElementoValidacion(elemento_id, es_valido) {\n  1249→    const elemento_validacion = $('#' + elemento_id);\n  1250→    const icono_validacion = elemento_validacion.find('i');\n  1251→\n  1252→    if (es_valido) {\n  1253→        elemento_validacion.removeClass('invalido').addClass('valido');\n  1254→        icono_validacion.removeClass('bi-x-circle').addClass('bi-check-circle');\n  1255→    } else {\n  1256→        elemento_validacion.removeClass('valido').addClass('invalido');\n  1257→        icono_validacion.removeClass('bi-check-circle').addClass('bi-x-circle');\n  1258→    }\n  1259→}\n  1260→/**\n  1261→ * Función para verificar si todas las validaciones de la contraseña pasan.\n  1262→ * \n  1263→ * @return {void}\n  1264→ * @author Andres Gonzalez\n  1265→ * @author Jair Carvajal\n  1266→ */\n  1267→function verificarTodasLasValidacionesContrasena() {\n  1268→    var todas_las_validaciones_pasan = Object.values(estado_validacion_contrasena).every(estado_item => estado_item === true);\n  1269→    $('#submit-btn').prop('disabled', !todas_las_validaciones_pasan);\n  1270→    \n  1271→    if (todas_las_validaciones_pasan) {\n  1272→        $('#btn-datos-acceso').prop('disabled', false);\n  1273→        $('#submit-btn').removeClass('btn-secondary').addClass('btn-success');\n  1274→    } else {\n  1275→        $('#btn-datos-acceso').prop('disabled', true);\n  1276→        $('#submit-btn').removeClass('btn-success').addClass('btn-primary');\n  1277→    }\n  1278→}\n  1279→\n  1280→/**\n  1281→ * Función para verificar coincidencia de contraseñas.\n  1282→ * \n  1283→ * @return {void}\n  1284→ * @author Andres Gonzalez\n  1285→ */\n  1286→function verificarCoincidenciaContrasenas() {\n  1287→    const contrasena_original = $('#password').val();\n  1288→    const contrasena_confirmacion = $('#password_confirmation').val();\n  1289→    \n  1290→    if (contrasena_confirmacion.length > 0) {\n  1291→        estado_validacion_contrasena.contrasenas_coinciden = contrasena_original === contrasena_confirmacion && contrasena_original.length > 0;\n  1292→        actualizarElementoValidacion('contrasena-igual', estado_validacion_contrasena.contrasenas_coinciden);\n  1293→    } else {\n  1294→        estado_validacion_contrasena.contrasenas_coinciden = false;\n  1295→        actualizarElementoValidacion('contrasena-igual', false);\n  1296→    }\n  1297→}\n  1298→\n  1299→/**\n  1300→ * Agregar o modificar datos de la petición.\n  1301→ *\n  1302→ * @param {FormData} datos_formulario Objeto FormData que contiene los datos del formulario a procesar\n  1303→ * @returns {Promise<Array>}\n  1304→ * @author Andres Gonzalez\n  1305→ */\n  1306→function agregarDataForm(datos_formulario) {\n  1307→    datos_formulario.delete('undefined');\n  1308→    datos_formulario.delete('archivo-avatar-usuario-acciones-imagen');\n  1309→    datos_formulario.delete('archivos');\n  1310→    return datos_formulario;\n  1311→}\n  1312→\n  1313→/**\n  1314→ * Función para seleccionar el tipo de salario.\n  1315→ * \n  1316→ * @param {string} tipo Tipo de salario seleccionado ('especifico' o 'rango')\n  1317→ * @returns {void}\n  1318→ * @author José Manuel Jiménez\n  1319→ */\n  1320→function seleccionarSalario(tipo) {\n  1321→    $('#contenedor-campos-salario').empty();\n  1322→    if (tipo == 'especifico') {\n  1323→        $('#contenedor-campos-salario').append(`\n  1324→            <div class=\"col-12 col-md-6\">\n  1325→                ${crearInput({\n  1326→                    id: 'salario',\n  1327→                    name: 'salario',\n  1328→                    class: 'cleave',\n  1329→                    input_container_class: 'mb-0',\n  1330→                    label: 'Cantidad',\n  1331→                    placeholder: '',\n  1332→                    min: 0,\n  1333→                    step: 0.01,\n  1334→                    required: true,\n  1335→                    minlength: 3,\n  1336→                    maxlength: 10,\n  1337→                    data: [{\n  1338→                        texto: 'simbolo-cleave',\n  1339→                        value: ''\n  1340→                    }],\n  1341→                    icono: '<i class=\"bi bi-currency-dollar input-icono1\"></i>',\n  1342→                })}\n  1343→            </div>\n  1344→        `);\n  1345→    } else if (tipo == 'rango') {\n  1346→        $('#contenedor-campos-salario').append(`\n  1347→            <div class=\"col-12 col-md-6\">\n  1348→                ${crearInput({\n  1349→                    id: 'salario',\n  1350→                    name: 'salario',\n  1351→                    class: 'cleave',\n  1352→                    input_container_class: 'mb-0',\n  1353→                    label: 'Desde',\n  1354→                    placeholder: '',\n  1355→                    step: 0.01,\n  1356→                    required: true,\n  1357→                    minlength: 3,\n  1358→                    maxlength: 10,\n  1359→                    onchange: `validarRangoSalario()`,\n  1360→                    data: [{\n  1361→                        texto: 'simbolo-cleave',\n  1362→                        value: ''\n  1363→                    }],\n  1364→                    icono: '<i class=\"bi bi-currency-dollar input-icono1\"></i>',\n  1365→                })}\n  1366→            </div>\n  1367→            <div class=\"col-12 col-md-6\">\n  1368→                ${crearInput({\n  1369→                    id: 'salario_maximo',\n  1370→                    name: 'salario_maximo',\n  1371→                    class: 'cleave',\n  1372→                    input_container_class: 'mb-0',\n  1373→                    label: 'Hasta',\n  1374→                    placeholder: '',\n  1375→                    min: 0,\n  1376→                    step: 0.01,\n  1377→                    required: true,\n  1378→                    minlength: 3,\n  1379→                    maxlength: 10,\n  1380→                    onchange: `validarRangoSalario()`,\n  1381→                    data: [{\n  1382→                        texto: 'simbolo-cleave',\n  1383→                        value: ''\n  1384→                    }],\n  1385→                    icono: '<i class=\"bi bi-currency-dollar input-icono1\"></i>',\n  1386→                })}\n  1387→            </div>\n  1388→        `);\n  1389→    }\n  1390→    inputsCleave();\n  1391→}\n  1392→\n  1393→/**\n  1394→ * Valida el rango de salario\n  1395→ * @description Verifica que el salario máximo sea mayor o igual al salario mínimo\n  1396→ * @returns {boolean} true si es válido, false en caso contrario\n  1397→ * @author José Manuel Jiménez\n  1398→ */\n  1399→function validarRangoSalario() {\n  1400→    if ($('input[name=\"tipo_salario\"]:checked').val() !== 'rango') {\n  1401→        return true;\n  1402→    }\n  1403→    let salario_desde = parseFloat(limpiarCleave($('#salario').val())) || 0;\n  1404→    let salario_maximo = parseFloat(limpiarCleave($('#salario_maximo').val())) || 0;\n  1405→    let $input_hasta = $('#salario_maximo');\n  1406→    let $contenedor_hasta = $input_hasta.closest('.input-container');\n  1407→    $input_hasta.removeClass('error');\n  1408→    $contenedor_hasta.siblings('label[for=\"salario_maximo\"].error').remove();\n  1409→    if (salario_desde > 99 && salario_maximo > 99 && salario_desde >= salario_maximo) {\n  1410→        setTimeout(() => {\n  1411→            $input_hasta.addClass('error');\n  1412→            $contenedor_hasta.after('<label for=\"salario_maximo\" class=\"error text-red-cta\">El salario hasta no debe ser menor o igual al salario desde</label>');\n  1413→            return false;\n  1414→        }, 100);\n  1415→    }\n  1416→    return true;\n  1417→}\n  1418→\n  1419→/**\n  1420→ * Función para seleccionar si el usuario posee discapacidad.\n  1421→ * \n  1422→ * @param {boolean} posee_discapacidad Indica si el usuario posee discapacidad.\n  1423→ * @returns {void}\n  1424→ * @author José Manuel Jiménez\n  1425→ */\n  1426→function seleccionarTengoDiscapacidad(posee_discapacidad) {\n  1427→    $('#contenedor-discapacidad').empty();\n  1428→    if (posee_discapacidad) {\n  1429→        $('#contenedor-discapacidad').append(`\n  1430→            <div class=\"col-12 p-4 border rounded-3\">\n  1431→                <div class=\"row align-items-center pb-2\">\n  1432→                    <div class=\"col-12\">\n  1433→                        <label class=\"form-label fw-semibold\">Discapacidad</label>\n  1434→                    </div>\n  1435→                    <div class=\"col-6\">\n  1436→                        ${crearMultiselect({\n  1437→                            opciones: discapacidades,\n  1438→                            id: 'select_discapacidades',\n  1439→                            name: 'select_discapacidades',\n  1440→                            class: 'input-dinamico',\n  1441→                            input_container_class: 'mb-0',\n  1442→                            placeholder: 'Discapacidad',\n  1443→                            onchange: 'seleccionarDiscapacidad(this.value)',\n  1444→                            required: true,\n  1445→                        })}\n  1446→                    </div>\n  1447→                    <div class=\"col-6\" id=\"contenedor-otra-discapacidad\"></div>\n  1448→                </div>\n  1449→            </div>\n  1450→        `);\n  1451→        inizializarMultiselect();\n  1452→    }\n  1453→}\n  1454→\n  1455→/**\n  1456→ * Función para seleccionar otra discapacidad.\n  1457→ * \n  1458→ * @param {number} discapacidad_id ID de la discapacidad seleccionada.\n  1459→ * @returns {void}\n  1460→ * @author José Manuel Jiménez\n  1461→ */\n  1462→function seleccionarDiscapacidad(discapacidad_id) {\n  1463→    let discapacidades_seleccionadas = $('#select_discapacidades').val() || [];\n  1464→    if (discapacidades_seleccionadas.includes('5')) {\n  1465→        let otra_discapacidad_existente = $('#otra_discapacidad').length > 0;\n  1466→        if (!otra_discapacidad_existente) {\n  1467→            $('#contenedor-otra-discapacidad').append(`\n  1468→                ${crearInput({\n  1469→                    id: 'otra_discapacidad',\n  1470→                    name: 'otra_discapacidad',\n  1471→                    class: 'input-dinamico',\n  1472→                    input_container_class: 'mb-0',\n  1473→                    label: '¿Cuál?',\n  1474→                    required: true,\n  1475→                })}\n  1476→            `);\n  1477→        }\n  1478→    } else {\n  1479→        $('#contenedor-otra-discapacidad').empty();\n  1480→    }\n  1481→}\n  1482→\n  1483→/**\n  1484→ * Función para crear el perfil manualmente.\n  1485→ * \n  1486→ * @returns {void}\n  1487→ * @author José Manuel Jiménez\n  1488→ */\n  1489→function crearPerfilManualmente() {\n  1490→    $('#contenedor-campos-perfil').removeClass('d-none');\n  1491→    $('#contenedor-opciones-crear-ia').addClass('d-none');\n  1492→}\n  1493→\n  1494→/**\n  1495→ * Función para manejar el cambio de archivo.\n  1496→ * \n  1497→ * @param {HTMLElement} archivo Elemento HTML del archivo cargado.\n  1498→ * @returns {void}\n  1499→ * @author José Manuel Jiménez\n  1500→ */\n  1501→function cambioArchivo(archivo) {\n  1502→    let elemento_html_archivo = $(archivo).prop('id');\n  1503→    if (revision_hv_ia && elemento_html_archivo == 'hoja_vida') {\n  1504→        generarPerfilHVPorIA(elemento_html_archivo);\n  1505→    }\n  1506→}\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"8ccb8d91-9410-47c3-a74c-4ab0450e5f70","timestamp":"2026-01-26T16:28:12.184Z","toolUseResult":{"type":"text","file":{"filePath":"c:\\laragon\\www\\psicoalianza-2\\public\\src\\portal-empleo\\crear.js","content":"$(document).ready(function () {\n    configurarFormulario(\"formulario-creacion-aplicante\");\n    configurarFormulario(\"formulario-nivel-educativo\");\n    configurarFormulario(\"formulario-experiencia-laboral\");\n    configurarFormulario(\"formulario-perfiles-laborales\");\n    moment.locale('es');\n\n    $('#password').on('input', function() {\n        var contrasena = $(this).val();\n        \n        // Validar longitud (mínimo 8)\n        estado_validacion_contrasena.longitud_minima = contrasena.length >= 8;\n        actualizarElementoValidacion('longitud-contrasena', estado_validacion_contrasena.longitud_minima);\n        \n        // Validar mayúscula\n        estado_validacion_contrasena.letra_mayuscula = /[A-Z]/.test(contrasena);\n        actualizarElementoValidacion('mayuscula-contrasena', estado_validacion_contrasena.letra_mayuscula);\n        \n        // Validar minúscula\n        estado_validacion_contrasena.letra_minuscula = /[a-z]/.test(contrasena);\n        actualizarElementoValidacion('minuscula-contrasena', estado_validacion_contrasena.letra_minuscula);\n        \n        // Validar número\n        estado_validacion_contrasena.tiene_numero = /\\d/.test(contrasena);\n        actualizarElementoValidacion('numero-contrasena', estado_validacion_contrasena.tiene_numero);\n        \n        // Validar carácter especial\n        estado_validacion_contrasena.caracter_especial = /[!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?]/.test(contrasena);\n        actualizarElementoValidacion('caracter-especial-contrasena', estado_validacion_contrasena.caracter_especial);\n        \n        verificarCoincidenciaContrasenas();\n        verificarTodasLasValidacionesContrasena();\n    });\n\n    $('#password_confirmation').on('input', function() {\n        verificarCoincidenciaContrasenas();\n        verificarTodasLasValidacionesContrasena();\n    });\n\n    verificarTodasLasValidacionesContrasena();\n    inputsCleave();\n    actualizarSelect2();\n    inizializarMultiselect();\n    inicializarTooltips();\n    inicializarIputsFile();\n});\n\nlet usuario_verificado = false;\nlet respuesta_codigo = [];\nlet validando_codigo = false;\nlet estudios = [];\nlet experiencias = [];\nlet certificados_laborales = [];\nlet indice_editar = null;\n\nlet estado_validacion_contrasena = {\n    longitud_minima:       false,\n    letra_mayuscula:       false,\n    letra_minuscula:       false,\n    tiene_numero:          false,\n    caracter_especial:     false,\n    contrasenas_coinciden: false\n};\n\n/**\n * Función para cancelar la creación de un usuario por medio de la apertura de un modal.\n * \n * @returns {void}\n * @author José Manuel Jiménez\n */\nfunction cancelarCreacionUsuario() {\n    $('#cancelar-creacion-usuario').modal('show');\n}\n\n/**\n * Función para validar las políticas de tratamiento de datos personales.\n * @returns {void}\n * @author José Manuel Jiménez\n * @author Andres Gonzalez\n */\nfunction validarPoliticas() {\n    let politicas_aceptadas  = $('#aceptar_politicas').is(':checked');\n    let terminos_condiciones = $('#aceptar_teminos_condiciones').is(':checked');\n    $('#btn-siguiente-datos-generales').prop('disabled', !(politicas_aceptadas && terminos_condiciones));\n}\n\n/**\n * Función para validar el correo electrónico ingresado por el usuario.\n * @returns {void}\n * @author José Manuel Jiménez\n */\nfunction validarEmail() {\n    $('#email-enviado').text($('#email').val());\n}\n\n/**\n * Función para enviar una notificación de un código para verificar el usuario.\n * \n * @param {string} tipo_verificacion Tipo de verificación (correo o celular).\n * @returns {void}\n * @author José Manuel Jiménez\n */\nfunction enviarVerificacion(tipo_verificacion) {\n    let email = $('#email').val();\n    let expresion_regular_email = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (expresion_regular_email.test(email) && email.length > 0) {\n        if (typeof USUARIO !== 'undefined') {\n            $.ajax({\n                type: 'POST',\n                url : '/enviar-codigo-autorizacion',\n                data: {\n                    _token: $('meta[name=\"csrf-token\"]').attr('content'),\n                    id    : USUARIO.id,\n                    email : email\n                }\n            }).done(function (respuesta) {\n                mostrarAlertasCodigoEnviado();\n            }).fail(function (error) {\n                $('#alerta-exito').removeClass('d-block').addClass('d-none');\n                $('#alerta-error').removeClass('d-none').addClass('d-block');\n                $('#alerta-error').html('Ocurrio un error al intentar enviar el código de verificación por correo electrónico.');\n                console.error(error);\n            });\n        } else {\n            $.ajax({\n                type: 'POST',\n                url : '/portales-empleo-enviar-codigo-autorizacion',\n                data: {\n                    _token: $('meta[name=\"csrf-token\"]').attr('content'),\n                    email : $('#email').val()\n                }\n            }).done(function (respuesta) {\n                respuesta_codigo = respuesta.respuesta;\n                mostrarAlertasCodigoEnviado();\n            }).fail(function (error) {\n                console.error(error);\n            });\n        }\n    } else {\n        mostrarToast('danger', 'Por favor, ingresa un correo electrónico válido.', '', '', 'bi bi-exclamation-lg');\n    }\n}\n\n/**\n * Función para mostrar las alertas cuando se ha enviado el código de confirmación.\n * \n * @returns {void}\n * @author José Manuel Jiménez\n */\nfunction mostrarAlertasCodigoEnviado() {\n    $('#contenedor-mensaje-verificar').addClass('d-none');\n    $('#contenedor-mensaje-enviado').removeClass('d-none');\n    $('#contenedor-info-mensaje-enviado').removeClass('d-none');\n    $('#contenedor-codigo-confirmacion').removeClass('d-none col-lg-6');\n    $('#contenedor-reenviar-mensaje').addClass('d-none');\n    $('.boton-verificacion').prop('disabled', true);\n    let segundos_para_reenviar = 59;\n    let intervalo = setInterval(function () {\n    $('#contador-segundos').text(segundos_para_reenviar);\n        if (segundos_para_reenviar <= 0) {\n            clearInterval(intervalo);\n            if (!usuario_verificado) {\n                $('.boton-verificacion').prop('disabled', false);\n                $('#contenedor-info-mensaje-enviado').addClass('d-none');\n                $('#contenedor-mensaje-enviado').addClass('d-none');\n                $('#contenedor-reenviar-mensaje').removeClass('d-none');\n                $('#contenedor-codigo-confirmacion').addClass('col-lg-6');\n                $('#contenedor-boton-reenviar-mensaje').removeClass('d-none');\n            }\n        }\n        segundos_para_reenviar--;\n    }, 1000);\n}\n\n/**\n * Función para validar el código de confirmación ingresado por el usuario.\n * \n * @param {string} codigo Código de confirmación ingresado por el usuario.\n * @return {void}\n * @author José Manuel Jiménez\n */\nfunction validarCodigoConfirmacion(codigo) {\n    if (codigo.length == 6) {\n        $('#contenedor-codigo-incorrecto').addClass('d-none');\n        if (typeof USUARIO !== 'undefined') {\n            if (!validando_codigo) {\n                validando_codigo = true;\n                $.ajax({\n                    type: 'POST',\n                    url : '/verificar-codigo-autorizacion',\n                    data: {\n                        _token: $('meta[name=\"csrf-token\"]').attr('content'),\n                        id    : USUARIO.id,\n                        codigo: codigo\n                    }\n                }).done(function (respuesta) {\n                    validando_codigo = false;\n                    if (respuesta.message === 'El código no es válido') {\n                        $('#contenedor-codigo-incorrecto').removeClass('d-none');\n                    } else {\n                        mostrarAlertasUsuarioVerificado();\n                    }\n                }).fail(function (error) {\n                    mostrarToast('danger', 'Ocurrió un error al intentar verificar el código de autorización.', '', '', '');\n                });\n            }\n        } else {\n            if (codigo == respuesta_codigo.codigo_autorizacion) {\n                mostrarAlertasUsuarioVerificado();\n            } else {\n                $('#contenedor-codigo-incorrecto').removeClass('d-none');\n            }\n        }\n    } else {\n        $('#contenedor-codigo-incorrecto').addClass('d-none');\n    }\n}\n\n/**\n * Función para mostrar las alertas cuando el usuario ha sido verificado.\n * \n * @returns {void}\n * @author José Manuel Jiménez\n */\nfunction mostrarAlertasUsuarioVerificado() {\n    usuario_verificado = true;\n    $('.boton-verificacion').prop('disabled', true);\n    $('#contenedor-codigo-confirmacion').addClass('d-none');\n    $('#contenedor-mensaje-enviado').addClass('d-none');\n    $('#contenedor-info-mensaje-enviado').addClass('d-none');\n    $('#contenedor-boton-reenviar-mensaje').addClass('d-none');\n    $('#contenedor-mensaje-confirmacion').removeClass('d-none');\n    $('#contenedor-reenviar-mensaje').addClass('d-none');\n    $('#contenedor-cuenta-verificada').removeClass('d-none');\n    $('#contenedor-contrasenas').removeClass('d-none');\n    $('#contenedor-codigo-incorrecto').addClass('d-none');\n    $('#contenedor-boton-verificar-correo').addClass('d-none');\n}\n\n/**\n * Ejecutar la acción cuando la petición no es exitosa.\n *\n * @param {Object} respuesta Respuesta de la solicitud.\n * @returns {Promise<Array>}\n * @author Andres Gonzalez\n * @author Jair Carvajal\n */\nfunction postError(respuesta) {\n    if (respuesta.errors) {\n        let errores_mostrados = false;\n\n        if (Array.isArray(respuesta.errors) && respuesta.errors.length > 0) {\n            respuesta.errors.forEach((error) => {\n                mostrarToast('danger', error);\n            });\n            errores_mostrados = true;\n        }\n        else if (typeof respuesta.errors === 'object' && Object.keys(respuesta.errors).length > 0) {\n            Object.values(respuesta.errors).forEach((error_mensajes) => {\n                if (Array.isArray(error_mensajes)) {\n                    error_mensajes.forEach((mensaje) => {\n                        mostrarToast('danger', mensaje);\n                    });\n                } else {\n                    mostrarToast('danger', error_mensajes);\n                }\n            });\n            errores_mostrados = true;\n        }\n\n        if (!errores_mostrados && respuesta.message) {\n            mostrarToast('danger', respuesta.message);\n        }\n    } else if (respuesta.message) {\n        mostrarToast('danger', respuesta.message);\n    } else {\n        mostrarToast('danger', 'Ocurrió un error al procesar la solicitud.');\n    }\n}\n\n\n/**\n * Función para cambiar al siguiénte formulario implementando validaciones\n *\n * @returns {void}\n * @author José Manuel Jiménez\n */\nlet mostrar_modal_horario = true;\nlet cambio_horario = false;\nlet siguiente_paso = false;\nfunction siguienteFormularioPaso() {\n    $('.tab-pane').addClass('d-block');\n    $('#formulario').submit();\n    let formulario_actual = $('#formulario .nav-pasos.active').first();\n    let formulario_actual_id = $(formulario_actual).attr('href');\n    let errores = $(formulario_actual.attr('href')).find('input.error , select.error , textarea.error');\n    if (errores.length == 0) {\n        if (formulario_actual_id == '#tab-pasos-usuario-datos-generales') {\n            let fecha_nacimiento = moment($('#fecha_nacimiento').val(), 'YYYY-MM-DD');\n            let fecha_hoy = moment();\n            let edad = fecha_hoy.diff(fecha_nacimiento, 'years');\n            if (edad < 15) {\n                mostrarToast('danger', 'Debes tener más de 15 años.');\n                return;\n            }\n        }\n        let formulario_siguiente = $(formulario_actual).closest('.tab-pasos').next().next('.tab-pasos').find('.nav-pasos');\n        if ($(formulario_siguiente).attr('href') != '#tab-pasos-usuario-perfil-laboral' || usuario_verificado) {\n            $(formulario_siguiente.attr('href')).find('input.error , select.error , textarea.error').removeClass('error');\n            $(formulario_siguiente.attr('href')).find('label.error').remove();\n            $(formulario_siguiente).prop('disabled', false);\n            $(formulario_siguiente).attr('aria-disabled', false);\n            $(formulario_siguiente).tab('show');\n        }\n    } else {\n        mostrarToast('danger', 'Parece que faltan algunos datos obligatorios. Por favor, revisa la información e intenta nuevamente', '', '', 'bi bi-exclamation-lg');\n    }\n    $('.tab-pane').removeClass('d-block');\n}\n\n/**\n * Función para validar el formulario antes de enviarlo.\n *\n * @param {Object} formulario Formulario a validar.\n * @returns {boolean} Retorna true si el formulario es válido, de lo contrario false.\n * @author José Manuel Jiménez\n  * @author Andres Gonzalez\n */\nfunction validacionAdicional(formulario) {\n    let valido = true;\n    if (formulario == 'formulario-nivel-educativo') {\n        let errores = $('#formulario-nivel-educativo').find('input.error , select.error , textarea.error');\n        if (errores.length == 0) {\n            let fecha_inicio = $('#fecha_inicio_estudio').val() ? moment($('#fecha_inicio_estudio').val(), 'YYYY-MM-DD') : null;\n            let fecha_fin = $('#fecha_fin_estudio').val() ? moment($('#fecha_fin_estudio').val(), 'YYYY-MM-DD') : null;\n            let fecha_actual = moment();\n            if (fecha_inicio && fecha_inicio.isAfter(fecha_actual)) {\n                mostrarToast('danger', 'La fecha de inicio del estudio no puede ser una fecha futura.');\n                valido = false;\n            } else if (fecha_fin && fecha_fin.isAfter(fecha_actual)) {\n                mostrarToast('danger', 'La fecha de finalización del estudio no puede ser una fecha futura.');\n                valido = false;\n            } else if (fecha_inicio && fecha_fin && fecha_fin.isBefore(fecha_inicio)) {\n                mostrarToast('danger', 'La fecha de finalización del estudio no puede ser anterior a la fecha de inicio.');\n                valido = false;\n            } else {\n                let estudio = {\n                    titulo: $('#titulo').val(),\n                    institucion_educativa: $('#institucion_educativa').val(),\n                    nivel_educativo_id: parseInt($('#nivel_educativo_id').val()),\n                    nivel_educativo: $('#nivel_educativo_id option:selected').text().trim(),\n                    graduado: $('#cursando_estudios').prop('checked') ? false : true,\n                    fecha_inicio: $('#fecha_inicio_estudio').val(),\n                    fecha_fin: $('#fecha_fin_estudio').val() || null,\n                    jornada: $('#jornada').val() || null,\n                }\n                if (indice_editar == null) {\n                    estudios.push(estudio);\n                } else {\n                    estudios[indice_editar] = estudio;\n                    indice_editar = null;\n                }\n                mostrarNivelesEducativos();\n                $('#modal-agregar-nivel-educativo').modal('hide');\n                limpiarFormulario('formulario-nivel-educativo');\n                mostrarToast('success', 'Nivel educativo agregado exitosamente.');\n                setTimeout(() => {\n                    $('#formulario-nivel-educativo').find('input.error , select.error , textarea.error').removeClass('error');\n                    $('#formulario-nivel-educativo').find('label.error').remove();\n                }, 100);\n            }\n        } else {\n            mostrarToast('danger', 'Faltan datos obligatorios. Revisa la información e inténtalo de nuevo.');\n        }\n        valido = false;\n    } else if (formulario == 'formulario-experiencia-laboral') {\n        let errores = $('#formulario-experiencia-laboral').find('input.error , select.error , textarea.error');\n        if (errores.length == 0) {\n            let fecha_inicio = $('#fecha_inicio_experiencia').val() ? moment($('#fecha_inicio_experiencia').val(), 'YYYY-MM-DD') : null;\n            let fecha_fin = $('#fecha_fin_experiencia').val() ? moment($('#fecha_fin_experiencia').val(), 'YYYY-MM-DD') : null;\n            let fecha_actual = moment();\n            if (fecha_inicio && fecha_inicio.isAfter(fecha_actual)) {\n                mostrarToast('danger', 'La fecha de inicio de la experiencia laboral no puede ser una fecha futura.');\n                valido = false;\n            } else if (fecha_fin && fecha_fin.isAfter(fecha_actual)) {\n                mostrarToast('danger', 'La fecha de finalización de la experiencia laboral no puede ser una fecha futura.');\n                valido = false;\n            } else if (fecha_inicio && fecha_fin && fecha_fin.isBefore(fecha_inicio)) {\n                mostrarToast('danger', 'La fecha de finalización de la experiencia laboral no puede ser anterior a la fecha de inicio.');\n                valido = false;\n            } else {\n                let experiencia = {\n                    cargo: $('#cargo').val(),\n                    empresa: $('#empresa').val(),\n                    actualmente_trabajo: $('#actualmente_trabajo').prop('checked') ? 1 : 0,\n                    fecha_inicio: $('#fecha_inicio_experiencia').val(),\n                    fecha_fin: $('#fecha_fin_experiencia').val() || null,\n                    funciones: $('#funciones_experiencia').val(),\n                }\n                if (indice_editar == null) {\n                    experiencias.push(experiencia);\n                } else {\n                    experiencias[indice_editar] = experiencia;\n                    indice_editar = null;\n                    certificados_laborales = [];\n                }\n                mostrarExperienciasLaborales();\n                $('#modal-agregar-experiencia-laboral').modal('hide');\n                limpiarFormulario('formulario-experiencia-laboral');\n                mostrarToast('success', 'Experiencia laboral agregada exitosamente.');\n                setTimeout(() => {\n                    $('#formulario-experiencia-laboral').find('input.error , select.error , textarea.error').removeClass('error');\n                    $('#formulario-experiencia-laboral').find('label.error').remove();\n                }, 100);\n            }\n        } else {\n            mostrarToast('danger', 'Faltan datos obligatorios. Revisa la información e inténtalo de nuevo.');\n        }\n        valido = false;\n    } else {\n        let formulario_actual = $('#formulario .nav-pasos.active').first();\n        let id_formulario_actual = $(formulario_actual).attr('href');\n        let errores = $(id_formulario_actual).find('input.error , select.error , textarea.error');\n        if (id_formulario_actual == '#tab-pasos-usuario-datos-generales') {\n            let politicas_aceptadas = $('#aceptar_politicas').is(':checked');\n            if (!politicas_aceptadas) {\n                mostrarToast('danger', 'Debes aceptar las políticas de tratamiento de datos personales.', '', '', 'bi bi-exclamation-lg');\n            }\n            valido = false;\n        } else if (id_formulario_actual == '#tab-pasos-usuario-datos-acceso') {\n            if (validar_contrasena) {\n                if (!usuario_verificado && valido) {\n                    mostrarToast('danger', 'Debes verificar tu cuenta antes de continuar.', '', '', 'bi bi-exclamation-lg');\n                    valido = false;\n                }\n                if (Object.values(estado_validacion_contrasena).includes(false) && valido) {\n                    mostrarToast('danger', 'Tu contraseña no cumple con todos los requisitos de seguridad. Por favor, revisa los elementos marcados en rojo.', '', '', 'bi bi-exclamation-lg');\n                    valido = false;\n                }\n            } else {\n                valido = false;\n            }\n        } else if (id_formulario_actual == '#tab-pasos-usuario-perfil-laboral') {\n            if (errores.length > 0) {\n                mostrarToast('danger', 'Faltan algunos datos obligatorios. Por favor, revisa la información e intenta nuevamente');\n                valido = false;\n            }\n            let salario = parseFloat(limpiarCleave($('#salario').val())) || 0;\n            if (salario < 0) {\n                mostrarToast('danger', 'El salario no puede ser un valor negativo.');\n                valido = false;\n            }\n            if ($('#salario_maximo').length > 0) {\n                let salario_maximo = parseFloat(limpiarCleave($('#salario_maximo').val())) || 0;\n                if (salario_maximo < 0) {\n                    mostrarToast('danger', 'El salario máximo no puede ser un valor negativo.');\n                    valido = false;\n                }\n                if (salario_maximo < salario) {\n                    if (salario_maximo > 0) {\n                        mostrarToast('danger', 'El salario máximo no puede ser menor que el salario mínimo.');\n                    }\n                    valido = false;\n                }\n            }\n            validarRangoSalario();\n            let habilidades_seleccionadas = $('#select_habilidades').val();\n            $('#habilidades').val(Array.isArray(habilidades_seleccionadas) ? habilidades_seleccionadas.join(', ') : '');\n            let herramientas_seleccionadas = $('#select_herramientas_tecnologicas').val();\n            $('#herramientas_tecnologicas').val(Array.isArray(herramientas_seleccionadas) ? herramientas_seleccionadas.join(', ') : '');\n            $('#estudios').val(JSON.stringify(estudios.map(({ nivel_educativo, graduado, ...estudio }) => estudio)));\n            if ($('#no_experiencia').is(':checked')) {\n                $('#experiencias_laborales').val('');\n            } else {\n                $('#experiencias_laborales').val(JSON.stringify(experiencias.map(({ actualmente_trabajo, ...experiencia }) => experiencia)));\n            }\n            let idiomas = $('.idioma');\n            let niveles = $('.nivel-idioma');\n            let idiomas_seleccionados = [];\n            for (let i = 0; i < idiomas.length; i++) {\n                idiomas_seleccionados.push({\n                    idioma_id: parseInt($(idiomas[i]).val()),\n                    nivel    : $(niveles[i]).val()\n                });\n            }\n            if (idiomas_seleccionados.length == 0) {\n                $('#idiomas').val('');\n            } else {\n                $('#idiomas').val(JSON.stringify(idiomas_seleccionados));\n            }\n            let discapacidades_seleccionadas = $('#select_discapacidades').val();\n            let discapacidades_finales = [];\n            if (discapacidades_seleccionadas) {\n                discapacidades_seleccionadas.forEach(discapacidad_id => {\n                    let discapacidad = discapacidades.find(d => d.id == discapacidad_id);\n                    if (discapacidad) {\n                        let otra_discapacidad = null;\n                        if (discapacidad.id == '5') {\n                            otra_discapacidad = $('#otra_discapacidad').val().trim();\n                        }\n                        discapacidades_finales.push({\n                            usuario_id: USUARIO.id,\n                            discapacidad_id: parseInt(discapacidad_id),\n                            otra_discapacidad: otra_discapacidad\n                        });\n                    }\n                });\n                $('#discapacidades').val(JSON.stringify(discapacidades_finales));\n            } else {\n                $('#discapacidades').val('');\n            }\n\n            if (estudios.length == 0) {\n                mostrarToast('danger', 'Debes agregar al menos un nivel educativo para continuar.');\n                valido = false;\n            }\n\n            // Validar que todos los estudios tengan fecha de inicio\n            for (let i = 0; i < estudios.length; i++) {\n                let estudio = estudios[i];\n                if (!estudio.fecha_inicio || estudio.fecha_inicio.trim() === '') {\n                    mostrarToast('danger', `El estudio \"${estudio.titulo || 'Sin título'}\" requiere una fecha de inicio.`);\n                    valido = false;\n                    break;\n                }\n            }\n\n            if (experiencias.length == 0 && !$('#no_experiencia').is(':checked')) {\n                mostrarToast('danger', 'Debes agregar al menos una experiencia laboral para continuar.');\n                valido = false;\n            }\n        }\n    }\n    return valido;\n}\n\n/**\n * Función para ejecutar la acción cuando la petición es exitosa.\n * @param {Object} respuesta Respuesta de la solicitud.\n * @returns {void}\n * @author José Manuel Jiménez\n * @author Andres Gonzalez\n */\nfunction postSuccess(respuesta) {\n    if (respuesta.formulario == 'formulario-perfiles-laborales' || !revision_hv) {\n        localStorage.setItem('notificacionToast', JSON.stringify({\n            tipo_alerta: 'success',\n            texto_1: 'Hoja de vida creada exitosamente',\n        }));\n\n        if (revision_hv) {\n            localStorage.setItem('mostrar_modal_hv', 'true');\n            window.location.href = '/vacantes-postulaciones-aplicantes';\n        } else {\n            window.location.href = '/tareas-pendientes-aplicantes';\n        }\n    } else {\n        mostrarToast('success', respuesta.message);\n    }\n}\n\nfunction abrirModalNivelEducativo() {\n    $('#modal-agregar-nivel-educativo').modal('show');\n    limpiarFormulario('formulario-nivel-educativo');\n    indice_editar = null;\n}\n\n/**\n * Función para seleccionar un nivel de educación.\n *\n * @param {string} nivel Nivel de educación.\n * @returns {void}\n * @author José Manuel Jiménez\n */\nfunction seleccionarNivelEducacionAplicante(nivel) {\n    $('#niveles').empty();\n    let niveles = [];\n    if (nivel === 'Básica y media') {\n        $('#niveles').append(`\n            <div class=\"row align-items-center\">\n                <div class=\"col-12\">\n                    ${crearSelect2({\n                        opciones: niveles_basica_primaria,\n                        id: 'nivel_estudio_id',\n                        name: 'nivel_estudio_id',\n                        class: 'input-dinamico',\n                        input_container_class: 'mb-4',\n                        label: 'Nivel',\n                        required: true,\n                    })}\n                </div>\n            </div>\n        `);\n    } else if (nivel === 'Superior') {\n        $('#niveles').append(`\n            <div class=\"row align-items-center\">\n                <div class=\"col-6\">\n                    ${crearSelect2({\n                        opciones: niveles_superior,\n                        id: 'nivel_estudio_id',\n                        name: 'nivel_estudio_id',\n                        class: 'input-dinamico',\n                        input_container_class: 'mb-4',\n                        label: 'Nivel',\n                        required: true,\n                    })}\n                </div>\n                <div class=\"col-6\">\n                    ${crearSelect2({\n                        opciones: areas_estudio,\n                        id: 'area_estudio_id',\n                        name: 'area_estudio_id',\n                        class: 'input-dinamico',\n                        input_container_class: 'mb-4',\n                        label: 'Área de estudio',\n                        required: true,\n                    })}\n                </div>\n            </div>\n        `);\n    }\n    actualizarSelect2();\n}\n\n/**\n * Función para seleccionar si el usuario es graduado o está cursando estudios.\n * \n * @returns {void}\n * @author José Manuel Jiménez\n * @author Andres Morales\n*/\nfunction seleccionarGraduadoCursando() {\n    let graduado_cursando_estudios = $('#cursando_estudios').prop('checked');\n    $('#fechas-cursando-estudios').empty();\n    if (graduado_cursando_estudios) {\n        $('#fechas-cursando-estudios').append(`\n            <div class=\"row align-items-center\">\n                <div class=\"col-12 col-md-6 mt-2\">\n                    ${crearSelectorMesAnio({\n                        id: 'fecha_inicio_estudio',\n                        name: 'fecha_inicio_estudio',\n                        placeholder: 'mm/yyyy',\n                        disabled: false,\n                        required: true,\n                        input_container_class: 'mb-4',\n                        label: 'Fecha de inicio',\n                        icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n                    })}\n                </div>\n                <div class=\"col-12 col-md-6 mt-2\">\n                    ${crearSelect2({\n                        opciones: modalidades_estudios,\n                        id: 'jornada',\n                        name: 'jornada',\n                        class: 'input-dinamico',\n                        input_container_class: 'mb-4',\n                        label: 'Modalidad',\n                        required: true,\n                    })}\n                </div>\n            </div>\n        `);\n        actualizarSelect2();\n    } else {\n        $('#fechas-cursando-estudios').append(`\n            <div class=\"row align-items-center\">\n                <div class=\"col-12 col-md-6 mt-2\">\n                    ${crearSelectorMesAnio({\n                        id: 'fecha_inicio_estudio',\n                        name: 'fecha_inicio_estudio',\n                        placeholder: 'mm/yyyy',\n                        disabled: false,\n                        required: true,\n                        input_container_class: 'mb-4',\n                        label: 'Fecha de inicio',\n                        icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n                    })}\n                </div>\n                <div class=\"col-12 col-md-6 mt-2\">\n                    ${crearSelectorMesAnio({\n                        id: 'fecha_fin_estudio',\n                        name: 'fecha_fin_estudio',\n                        placeholder: 'mm/yyyy',\n                        disabled: false,\n                        required: true,\n                        input_container_class: 'mb-4',\n                        label: 'Fecha de finalización',\n                        icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n                    })}\n                </div>\n            </div>\n        `);\n    }\n    inicializarFlatpickr();\n}\n\n/**\n * Función para mostrar los niveles educativos del usuario.\n * \n * @returns {void}\n * @author José Manuel Jiménez\n * @author Jair Carvajal\n * */\nfunction mostrarNivelesEducativos() {\n    $('#contenedor-niveles-educativos').empty();\n    if (estudios.length > 0) {\n        // Ordenar estudios usando función global reutilizable\n        let estudios_ordenados = ordenarEstudiosPorFecha(estudios);\n\n        estudios_ordenados.forEach((estudio) => {\n            $('#contenedor-niveles-educativos').append(`\n                <div class=\"col-12 pt-3 px-3 mt-4 border rounded-3\" id=\"nivel-educativo-${estudio.indice_original}\">\n                    <div class=\"row mb-2\">\n                        <div class=\"col-12 col-lg\">\n                            <p class=\"mb-1 fw-bold text-gray-20\">${estudio.titulo}</p>\n                            <p class=\"text-body-3 mb-1\">\n                            ${estudio.fecha_inicio || estudio.fecha_fin ? `<i class=\"bi bi-calendar4 text-headline-5 me-2\"></i>` : ''}\n                            ${\n                                estudio.fecha_inicio\n                                ? moment(estudio.fecha_inicio).format(\"MMM YYYY\")\n                                : ''\n                            }\n                            ${\n                                estudio.fecha_inicio && !estudio.fecha_fin\n                                ? ' - Actualmente'\n                                : estudio.fecha_fin\n                                    ? ` - ${moment(estudio.fecha_fin).format(\"MMM YYYY\")}`\n                                    : ''\n                            }\n                            ${estudio.modalidad_estudio ? ` - ${estudio.modalidad_estudio}` : ''}\n                            </p>\n                            <p class=\"text-body-3 mb-1\"><i class=\"bi bi-buildings text-headline-5 me-2\"></i> ${estudio.institucion_educativa}</p>\n                        </div>\n                        <div class=\"col-auto\">\n                            <div class=\"row justify-content-end\">\n                                ${estudio.certificado ? `\n                                    <div class=\"col-auto ps-0\">\n                                        ${crearBoton({\n                                            clases: 'btn-outline-primary',\n                                            texto: `<i class=\"bi bi-paperclip\"></i> Ver certificado`,\n                                            onclick: `verCertificadoEstudio(${estudio.indice_original})`,\n                                        })}\n                                    </div>\n                                ` : ''}\n                                <div class=\"col-auto ps-0\">\n                                    ${crearBoton({\n                                        clases: 'btn-outline-primary btn-circle',\n                                        texto: '<i class=\"bi bi-pencil-fill\"></i>',\n                                        onclick: `editarNivelEducativo(${estudio.indice_original})`\n                                    })}\n                                </div>\n                                <div class=\"col-auto ps-0\">\n                                    ${crearBoton({\n                                        clases: 'btn-outline-danger btn-circle',\n                                        texto: '<i class=\"bi bi-trash-fill\"></i>',\n                                        onclick: `eliminarNivelEducativo(${estudio.indice_original})`\n                                    })}\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"col-12 mt-3\">\n                            <div class=\"row justify-content-between\">\n                                <div class=\"col-auto\">\n                                    <p class=\"text-body-3 text-gray-10 mb-0\">${estudio.nivel_educativo}</p>\n                                </div>\n                                <div class=\"col-auto\">\n                                    <div class=\"row justify-content-end align-items-center\">\n                                        ${estudio.graduado ? `\n                                            <div class=\"col-auto pe-0\">\n                                                <i class=\"bi bi-mortarboard text-headline-5 text-cta-blue\"></i>\n                                            </div>\n                                            <div class=\"col-auto text-body-3 text-gray-10\">\n                                                Graduado\n                                            </div>\n                                        ` : `\n                                            <div class=\"col-auto pe-0\">\n                                                <i class=\"bi ${estudio.jornada == 'Diurna' ? 'bi-sun' : estudio.jornada == 'Nocturna' ? 'bi-moon' : ''} text-headline-5 text-cta-blue\"></i>\n                                            </div>\n                                            <div class=\"col-auto text-body-3 text-gray-10\">\n                                                ${estudio.jornada ? 'Modalidad:' : ''} ${estudio.jornada || ''}\n                                            </div>\n                                        `}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            `);\n        });\n    }\n}\n\n/**\n * Función para abrir el modal de agregar o editar un nivel educativo.\n * \n * @param {number|null} index Índice del nivel educativo a editar. Si es null, se agrega un nuevo nivel educativo.\n * @return {void}\n * @author José Manuel Jiménez\n */\nfunction editarNivelEducativo(index) {\n    indice_editar = index;\n    let estudio = estudios[index];\n    $('#titulo').val(estudio.titulo);\n    $('#institucion_educativa').val(estudio.institucion_educativa);\n    $('#cursando_estudios').prop('checked', !estudio.graduado).trigger('change');\n    $('#nivel_educativo_id').val(estudio.nivel_educativo_id).trigger('change');\n    $('#fecha_inicio_estudio')[0]._flatpickr.setDate(estudio.fecha_inicio);\n    if ($('#fecha_fin_estudio').length > 0) {\n        $('#fecha_fin_estudio')[0]._flatpickr.setDate(estudio.fecha_fin || '');\n    }\n    $('#jornada').val(estudio.jornada || '').trigger('change');\n    establecerDatosComponentePaisesDepartamentosCiudades({\n        pais: { html_id: 'estudio_pais_id', value: estudio.pais_id },\n        departamento: { html_id: 'estudio_departamento_id', value: estudio.departamento_id },\n        ciudad: { html_id: 'estudio_ciudad_id', value: estudio.ciudad_id },\n    });\n    $('#certificado').attr('data-base64', estudio.certificado || '');\n    $('#modal-agregar-nivel-educativo').modal('show');\n    $('#modal-agregar-nivel-educativo').find('input.error , select.error , textarea.error').removeClass('error');\n    $('#modal-agregar-nivel-educativo').find('label.error').remove();\n}\n\n/**\n * Función para eliminar un nivel educativo.\n * \n * @param {number} index Índice del nivel educativo a eliminar.\n * @return {void}\n * @author José Manuel Jiménez\n */\nfunction eliminarNivelEducativo(index) {\n    estudios.splice(index, 1);\n    mostrarNivelesEducativos();\n}\n\n/**\n * Función para ver el certificado de estudio en una nueva ventana.\n * \n * @param {number} index Índice del nivel educativo cuyo certificado se desea ver.\n * @return {void}\n * @author José Manuel Jiménez\n */\nfunction verCertificadoEstudio(index) {\n    let certificado = estudios[index].certificado;\n    if (certificado) {\n        try {\n            let certificado_base64 = certificado.split(',')[1] || certificado;\n            const binaryString = atob(certificado_base64);\n            const bytes = new Uint8Array(binaryString.length);\n            for (let i = 0; i < binaryString.length; i++) {\n                bytes[i] = binaryString.charCodeAt(i);\n            }\n            let blob = new Blob([bytes], { type: 'application/pdf' });\n            let url = URL.createObjectURL(blob);\n            let nuevaVentana = window.open(url, '_blank');\n            if (nuevaVentana) {\n                nuevaVentana.onload = function() {\n                    setTimeout(() => URL.revokeObjectURL(url), 1000);\n                };\n            }\n        } catch (error) {\n            mostrarToast('danger', 'Error al abrir el certificado.', '', '', 'bi bi-exclamation-lg');\n        }\n    } else {\n        mostrarToast('danger', 'No se encontró el certificado de estudio.', '', '', 'bi bi-exclamation-lg');\n    }\n}\n\nfunction abrirModalExperienciaLaboral() {\n    $('#modal-agregar-experiencia-laboral').modal('show');\n    limpiarFormulario('formulario-experiencia-laboral');\n    indice_editar = null;\n}\n\n/**\n * Función para agregar o editar una experiencia laboral.\n * \n * @param {number|null} index Índice de la experiencia laboral a editar. Si es null, se agrega una nueva experiencia laboral.\n * @return {void}\n * @author José Manuel Jiménez\n * @author Jair Carvajal\n */\nfunction mostrarExperienciasLaborales() {\n    $('#contenedor-experiencias-laborales').empty();\n    if (experiencias.length > 0) {\n        $('#no_experiencia').prop('disabled', true);\n        // Ordenar experiencias usando función global reutilizable\n        let experiencias_ordenadas = ordenarExperienciasPorFecha(experiencias);\n\n        experiencias_ordenadas.forEach((experiencia) => {\n            $('#contenedor-experiencias-laborales').append(`\n                <div class=\"col-12 pt-3 px-3 mt-4 border rounded-3\" id=\"nivel-educativo-${experiencia.indice_original}\">\n                    <div class=\"row mb-2\">\n                        <div class=\"col-lg\">\n                            <p class=\"mb-1 fw-bold text-gray-20\">${experiencia.cargo}</p>\n                            <p class=\"text-body-3 mb-2\">\n                                ${experiencia.fecha_inicio || experiencia.fecha_fin ? `<i class=\"bi bi-calendar4 text-headline-5 me-2\"></i>` : ''}\n                                ${\n                                    experiencia.fecha_inicio\n                                    ? moment(experiencia.fecha_inicio).format(\"MMM YYYY\") +\n                                        (experiencia.fecha_fin\n                                        ? ` - ${moment(experiencia.fecha_fin).format(\"MMM YYYY\")}`\n                                        : \" - Actualmente\")\n                                    : \"\"\n                                }\n                                ${\n                                    experiencia.fecha_inicio && experiencia.fecha_fin\n                                    ? (() => {\n                                        let inicio = moment(experiencia.fecha_inicio);\n                                        let fin = moment(experiencia.fecha_fin);\n\n                                        let anios = fin.diff(inicio, 'years');\n                                        let meses = fin.diff(inicio.add(anios, 'years'), 'months');\n\n                                        let texto = '';\n                                        if (anios > 0) texto += `${anios} año${anios > 1 ? 's' : ''}`;\n                                        if (meses > 0) texto += `${anios > 0 ? ' y ' : ''}${meses} mes${meses > 1 ? 'es' : ''}`;\n\n                                        return texto ? ` | ${texto}` : '';\n                                        })()\n                                    : ''\n                                }\n                            </p>\n                            <p class=\"text-body-3 mb-1 fw-semibold text-gray-10\">${experiencia.empresa}</p>\n                            ${experiencia.funciones ? `\n                                <p class=\"text-body-2 fw-semibold text-gray-10 mt-3 mb-0\">Funciones y responsabilidades</p>\n                                <div class=\"w-100 text-body-3\">${experiencia.funciones}</div>\n                            `\n                            : ''}\n                        </div>\n                        <div class=\"col-auto\">\n                            <div class=\"row justify-content-end\">\n                                <div class=\"col-auto ps-0\">\n                                    ${crearBoton({\n                                        clases: 'btn-outline-primary btn-circle',\n                                        texto: '<i class=\"bi bi-pencil-fill\"></i>',\n                                        onclick: `editarExperienciaLaboral(${experiencia.indice_original})`\n                                    })}\n                                </div>\n                                <div class=\"col-auto ps-0\">\n                                    ${crearBoton({\n                                        clases: 'btn-outline-danger btn-circle',\n                                        texto: '<i class=\"bi bi-trash-fill\"></i>',\n                                        onclick: `eliminarExperienciaLaboral(${experiencia.indice_original})`\n                                    })}\n                                </div>\n                            </div>\n                        </div>\n                        ${experiencia.funciones_principales ? `\n                            <div class=\"col-12 mt-5 mb-3 text-body-2 fw-semibold text-gray-10\">Funciones principales</div>\n                            <div class=\"col-12\">${experiencia.funciones_principales}</div>\n                        ` : ''}\n                    </div>\n                </div>\n            `);\n        });\n    } else {\n        $('#no_experiencia').prop('disabled', false);\n    }\n}\n\n/**\n * Función para abrir el modal de agregar o editar una experiencia laboral.\n * \n * @param {number|null} index Índice de la experiencia laboral a editar. Si es null, se agrega una nueva experiencia laboral.\n * @return {void}\n * @author José Manuel Jiménez\n */\nfunction editarExperienciaLaboral(index) {\n    indice_editar = index;\n    let experiencia = experiencias[index];\n    certificados_laborales = experiencia.certificados || [];\n    $('#cargo').val(experiencia.cargo);\n    $('#empresa').val(experiencia.empresa);\n    $(`input[name=\"cargo_modalidad_trabajo_id\"][value=\"${experiencia.modalidad_trabajo_id}\"]`).prop('checked', true).trigger('change');\n    establecerDatosComponentePaisesDepartamentosCiudades({\n        pais: { html_id: 'experiencia_pais_id', value: experiencia.pais_id },\n        departamento: { html_id: 'experiencia_departamento_id', value: experiencia.departamento_id },\n        ciudad: { html_id: 'experiencia_ciudad_id', value: experiencia.ciudad_id },\n    });\n    $('#funciones_experiencia').val(experiencia.funciones);\n    $(`input[name=\"cargo_jornada_id\"][value=\"${experiencia.jornada_id}\"]`).prop('checked', true);\n    $('#actualmente_trabajo').prop('checked', experiencia.actualmente_trabajo == 1).trigger('change');\n    $('#fecha_inicio_experiencia')[0]._flatpickr.setDate(experiencia.fecha_inicio);\n    if ($('#fecha_fin_experiencia').length) {\n        $('#fecha_fin_experiencia')[0]._flatpickr.setDate(experiencia.fecha_fin || '');\n    }\n    establecerDatosClassicEditor('funciones_principales', experiencia.funciones_principales || '');\n    $('#certificado_laboral').attr('data-base64', experiencia.certificado || '');\n    $('#modal-agregar-experiencia-laboral').modal('show');\n    $('#modal-agregar-experiencia-laboral').find('input.error , select.error , textarea.error').removeClass('error');\n    $('#modal-agregar-experiencia-laboral').find('label.error').remove();\n}\n\n/**\n * Función para eliminar una experiencia laboral.\n * \n * @param {number} index Índice de la experiencia laboral a eliminar.\n * @return {void}\n * @author José Manuel Jiménez\n */\nfunction eliminarExperienciaLaboral(index) {\n    experiencias.splice(index, 1);\n    mostrarExperienciasLaborales();\n}\n\nfunction mostrarCertificadosLaborales() {\n    $('#tbody-certificados-laborales').empty();\n    if (certificados_laborales.length > 0) {\n        certificados_laborales.forEach((certificado, index) => {\n            $('#tbody-certificados-laborales').append(`\n                <tr id=\"certificado-laboral-${index}\">\n                    <td>\n                        <span onclick=\"verCertificadoExperiencia(${index})\">\n                            ${certificado.nombre}\n                        </span>\n                    </td>\n                    <td>\n                        ${crearBoton({\n                            clases: 'btn-outline-danger btn-circle',\n                            texto: '<i class=\"bi bi-trash-fill\"></i>',\n                            onclick: `eliminarCertificadoLaboral(${index})`\n                        })}\n                    </td>\n                </tr>\n            `);\n        });\n    }\n}\n\nfunction eliminarCertificadoLaboral(index) {\n    certificados_laborales.splice(index, 1);\n    mostrarCertificadosLaborales();\n}\n\n/**\n * Función para ver el certificado de experiencia laboral en una nueva ventana.\n * @param {number} index Índice de la experiencia laboral cuyo certificado se desea ver.\n * @return {void}\n * @author José Manuel Jiménez\n */\nfunction verCertificadoExperiencia(index) {\n    let certificado = certificados_laborales[index].certificado;\n    if (certificado) {\n        try {\n            let certificado_base64 = certificado.split(',')[1] || certificado;\n            const binaryString = atob(certificado_base64);\n            const bytes = new Uint8Array(binaryString.length);\n            for (let i = 0; i < binaryString.length; i++) {\n                bytes[i] = binaryString.charCodeAt(i);\n            }\n            let blob = new Blob([bytes], { type: 'application/pdf' });\n            let url = URL.createObjectURL(blob);\n            let nuevaVentana = window.open(url, '_blank');\n            if (nuevaVentana) {\n                nuevaVentana.onload = function() {\n                    setTimeout(() => URL.revokeObjectURL(url), 1000);\n                };\n            }\n        } catch (error) {\n            mostrarToast('danger', 'Error al abrir el certificado.', '', '', 'bi bi-exclamation-lg');\n        }\n    } else {\n        mostrarToast('danger', 'No se encontró el certificado de experiencia laboral.', '', '', 'bi bi-exclamation-lg');\n    }\n}\n\n/**\n * Función para seleccionar si el usuario no tiene experiencia laboral.\n *\n * @param {boolean} marcado Indica si el checkbox \"No tengo experiencia laboral\" está seleccionado.\n * @return {void}\n * @author José Manuel Jiménez\n * @author Andres Morales\n */\nfunction seleccionarNoTengoExperiencia(marcado) {\n    if (marcado) {\n        $('#btn-agregar-experiencia-laboral').addClass('d-none');\n    } else {\n        $('#btn-agregar-experiencia-laboral').removeClass('d-none');\n    }\n}\n\n/**\n * Función para autocompletar los campos del formulario de pruebas de desarrollo.\n * \n * @return {void}\n * @author José Manuel Jiménez\n */\nfunction autocompletarPruebasDesarrollo() {\n    $('#nombres').val('JOSE MANUEL');\n    $('#apellidos').val('JIMENEZ AVILA');\n    $('#fecha_nacimiento')[0]._flatpickr.setDate('1992-03-05');\n    $('#genero_id').val('1').trigger('change').trigger('select2:select');\n    $('#telefono').val('3125532022');\n    establecerDatosComponentePaisesDepartamentosCiudades({\n        pais: {\n            html_id: 'pais_id',\n            value: '13'\n        },\n        departamento: {\n            html_id: 'departamento_id',\n            value: '243'\n        },\n        ciudad: {\n            html_id: 'ciudad_id',\n            value: '2047'\n        },\n    });\n    $('#tipo_documento_id').val('1').trigger('change').trigger('select2:select');\n    $('#documento').val('1232598686');\n    $('#email').val('thejosemanu2@gmail.com');\n    $('#email-enviado').text('thejosemanu2@gmail.com');\n    //Modal de estudios\n    $('#titulo').val('Título de ejemplo');\n    $('#institucion_educativa').val('Institución Educativa Ejemplo');\n    $('#educacion_Superior').click();\n    $('#graduado').click();\n    $('#fecha_inicio_estudio')[0]._flatpickr.setDate('2025-06-15');\n    $('#fecha_fin_estudio')[0]._flatpickr.setDate('2025-06-18');\n    $('#nivel_estudio_id').val('8').trigger('change').trigger('select2:select');\n    $('#area_estudio_id').val('4').trigger('change').trigger('select2:select');\n    establecerDatosComponentePaisesDepartamentosCiudades({\n        pais: {\n            html_id: 'estudio_pais_id',\n            value: '5'\n        },\n        departamento: {\n            html_id: 'estudio_departamento_id',\n            value: '105'\n        },\n        ciudad: {\n            html_id: 'estudio_ciudad_id',\n            value: '1262'\n        },\n    });\n    //Modal de experiencia\n    $('#cargo').val('Cargo de ejemplo');\n    $('#empresa').val('Empresa Ejemplo S.A.');\n    establecerDatosComponentePaisesDepartamentosCiudades({\n        pais: {\n            html_id: 'experiencia_pais_id',\n            value: '1'\n        },\n        departamento: {\n            html_id: 'experiencia_departamento_id',\n            value: '16'\n        },\n        ciudad: {\n            html_id: 'experiencia_ciudad_id',\n            value: '597'\n        },\n    });\n    $('#cargo_jornada_id_1').click();\n    $('#fecha_inicio_experiencia')[0]._flatpickr.setDate('2025-06-16');\n    $('#fecha_fin_experiencia')[0]._flatpickr.setDate('2025-06-19');\n\n    $('#cantidad_vacantes').val('2');\n    $('#salario').val('3');\n    $('#tipo_contrato_id').val('1').trigger('change').trigger('select2:select');\n    $('#dias_laborar').val('Fines de semana').trigger('change').trigger('select2:select');\n    $('#horas_laborar').val('07:00-17:00').trigger('change').trigger('select2:select');\n    $('#experiencia_laboral').val('3').trigger('change').trigger('select2:select');\n    $('#dia_semana_Domingo').prop('checked', false).trigger('change');\n    $('#dia_semana_compensatorio').prop('checked', false).trigger('change');\n    $('#hora_entrada_Sábado').val('07:00').trigger('change').trigger('select2:select');\n    $('#hora_salida_Sábado').val('09:30').trigger('change').trigger('select2:select');\n}\n\nfunction cambioArchivo(archivo, nombre_archivo, tipo_archivo) {\n    if ($(archivo).prop('id') == 'certificado_laboral') {\n        setTimeout(() => {\n            let certificado_laboral = $('#certificado_laboral').attr('data-base64') || null;\n            if (certificado_laboral != null) {\n                certificados_laborales.push({\n                    certificado: certificado_laboral,\n                    nombre: nombre_archivo,\n                });\n                mostrarCertificadosLaborales();\n                $('#certificado_laboral').val('').trigger('change');\n            }\n        }, 1000);\n    }\n}\n\n/**\n * Función para seleccionar si el usuario actualmente trabaja en la experiencia laboral.\n * \n * @param {boolean} seleccionado Indica si el checkbox \"Actualmente trabajo aquí\" está seleccionado.\n * @return {void}\n * @author José Manuel Jiménez\n * @author Andres Morales\n */\nfunction seleccionarActualmenteTrabajo(seleccionado) {\n    $('#fechas-trabajo-experiencia').empty();\n    if (seleccionado) {\n        $('#fechas-trabajo-experiencia').append(`\n            <div class=\"col-12 mt-3\">\n                ${crearSelectorMesAnio({\n                    id: 'fecha_inicio_experiencia',\n                    name: 'fecha_inicio_experiencia',\n                    placeholder: 'mm/yyyy',\n                    disabled: false,\n                    required: true,\n                    input_container_class: 'mb-2',\n                    label: 'Fecha de inicio',\n                    icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n                })}\n            </div>\n        `);\n    } else {\n        $('#fechas-trabajo-experiencia').append(`\n            <div class=\"col-12 col-md-6 mt-3\">\n                ${crearSelectorMesAnio({\n                    id: 'fecha_inicio_experiencia',\n                    name: 'fecha_inicio_experiencia',\n                    placeholder: 'mm/yyyy',\n                    disabled: false,\n                    required: true,\n                    input_container_class: 'mb-2',\n                    label: 'Fecha de inicio',\n                    icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n                })}\n            </div>\n            <div class=\"col-12 col-md-6 mt-3\">\n                ${crearSelectorMesAnio({\n                    id: 'fecha_fin_experiencia',\n                    name: 'fecha_fin_experiencia',\n                    placeholder: 'mm/yyyy',\n                    disabled: false,\n                    required: true,\n                    input_container_class: 'mb-2',\n                    label: 'Fecha de finalización',\n                    icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n                })}\n            </div>\n        `);\n    }\n    inicializarFlatpickr();\n}\n\n/**\n * Función para actualizar el estado visual de una validación de contraseña.\n * \n * @return {void}\n * @author Andres Gonzalez\n */\nfunction actualizarElementoValidacion(elemento_id, es_valido) {\n    const elemento_validacion = $('#' + elemento_id);\n    const icono_validacion = elemento_validacion.find('i');\n\n    if (es_valido) {\n        elemento_validacion.removeClass('invalido').addClass('valido');\n        icono_validacion.removeClass('bi-x-circle').addClass('bi-check-circle');\n    } else {\n        elemento_validacion.removeClass('valido').addClass('invalido');\n        icono_validacion.removeClass('bi-check-circle').addClass('bi-x-circle');\n    }\n}\n/**\n * Función para verificar si todas las validaciones de la contraseña pasan.\n * \n * @return {void}\n * @author Andres Gonzalez\n * @author Jair Carvajal\n */\nfunction verificarTodasLasValidacionesContrasena() {\n    var todas_las_validaciones_pasan = Object.values(estado_validacion_contrasena).every(estado_item => estado_item === true);\n    $('#submit-btn').prop('disabled', !todas_las_validaciones_pasan);\n    \n    if (todas_las_validaciones_pasan) {\n        $('#btn-datos-acceso').prop('disabled', false);\n        $('#submit-btn').removeClass('btn-secondary').addClass('btn-success');\n    } else {\n        $('#btn-datos-acceso').prop('disabled', true);\n        $('#submit-btn').removeClass('btn-success').addClass('btn-primary');\n    }\n}\n\n/**\n * Función para verificar coincidencia de contraseñas.\n * \n * @return {void}\n * @author Andres Gonzalez\n */\nfunction verificarCoincidenciaContrasenas() {\n    const contrasena_original = $('#password').val();\n    const contrasena_confirmacion = $('#password_confirmation').val();\n    \n    if (contrasena_confirmacion.length > 0) {\n        estado_validacion_contrasena.contrasenas_coinciden = contrasena_original === contrasena_confirmacion && contrasena_original.length > 0;\n        actualizarElementoValidacion('contrasena-igual', estado_validacion_contrasena.contrasenas_coinciden);\n    } else {\n        estado_validacion_contrasena.contrasenas_coinciden = false;\n        actualizarElementoValidacion('contrasena-igual', false);\n    }\n}\n\n/**\n * Agregar o modificar datos de la petición.\n *\n * @param {FormData} datos_formulario Objeto FormData que contiene los datos del formulario a procesar\n * @returns {Promise<Array>}\n * @author Andres Gonzalez\n */\nfunction agregarDataForm(datos_formulario) {\n    datos_formulario.delete('undefined');\n    datos_formulario.delete('archivo-avatar-usuario-acciones-imagen');\n    datos_formulario.delete('archivos');\n    return datos_formulario;\n}\n\n/**\n * Función para seleccionar el tipo de salario.\n * \n * @param {string} tipo Tipo de salario seleccionado ('especifico' o 'rango')\n * @returns {void}\n * @author José Manuel Jiménez\n */\nfunction seleccionarSalario(tipo) {\n    $('#contenedor-campos-salario').empty();\n    if (tipo == 'especifico') {\n        $('#contenedor-campos-salario').append(`\n            <div class=\"col-12 col-md-6\">\n                ${crearInput({\n                    id: 'salario',\n                    name: 'salario',\n                    class: 'cleave',\n                    input_container_class: 'mb-0',\n                    label: 'Cantidad',\n                    placeholder: '',\n                    min: 0,\n                    step: 0.01,\n                    required: true,\n                    minlength: 3,\n                    maxlength: 10,\n                    data: [{\n                        texto: 'simbolo-cleave',\n                        value: ''\n                    }],\n                    icono: '<i class=\"bi bi-currency-dollar input-icono1\"></i>',\n                })}\n            </div>\n        `);\n    } else if (tipo == 'rango') {\n        $('#contenedor-campos-salario').append(`\n            <div class=\"col-12 col-md-6\">\n                ${crearInput({\n                    id: 'salario',\n                    name: 'salario',\n                    class: 'cleave',\n                    input_container_class: 'mb-0',\n                    label: 'Desde',\n                    placeholder: '',\n                    step: 0.01,\n                    required: true,\n                    minlength: 3,\n                    maxlength: 10,\n                    onchange: `validarRangoSalario()`,\n                    data: [{\n                        texto: 'simbolo-cleave',\n                        value: ''\n                    }],\n                    icono: '<i class=\"bi bi-currency-dollar input-icono1\"></i>',\n                })}\n            </div>\n            <div class=\"col-12 col-md-6\">\n                ${crearInput({\n                    id: 'salario_maximo',\n                    name: 'salario_maximo',\n                    class: 'cleave',\n                    input_container_class: 'mb-0',\n                    label: 'Hasta',\n                    placeholder: '',\n                    min: 0,\n                    step: 0.01,\n                    required: true,\n                    minlength: 3,\n                    maxlength: 10,\n                    onchange: `validarRangoSalario()`,\n                    data: [{\n                        texto: 'simbolo-cleave',\n                        value: ''\n                    }],\n                    icono: '<i class=\"bi bi-currency-dollar input-icono1\"></i>',\n                })}\n            </div>\n        `);\n    }\n    inputsCleave();\n}\n\n/**\n * Valida el rango de salario\n * @description Verifica que el salario máximo sea mayor o igual al salario mínimo\n * @returns {boolean} true si es válido, false en caso contrario\n * @author José Manuel Jiménez\n */\nfunction validarRangoSalario() {\n    if ($('input[name=\"tipo_salario\"]:checked').val() !== 'rango') {\n        return true;\n    }\n    let salario_desde = parseFloat(limpiarCleave($('#salario').val())) || 0;\n    let salario_maximo = parseFloat(limpiarCleave($('#salario_maximo').val())) || 0;\n    let $input_hasta = $('#salario_maximo');\n    let $contenedor_hasta = $input_hasta.closest('.input-container');\n    $input_hasta.removeClass('error');\n    $contenedor_hasta.siblings('label[for=\"salario_maximo\"].error').remove();\n    if (salario_desde > 99 && salario_maximo > 99 && salario_desde >= salario_maximo) {\n        setTimeout(() => {\n            $input_hasta.addClass('error');\n            $contenedor_hasta.after('<label for=\"salario_maximo\" class=\"error text-red-cta\">El salario hasta no debe ser menor o igual al salario desde</label>');\n            return false;\n        }, 100);\n    }\n    return true;\n}\n\n/**\n * Función para seleccionar si el usuario posee discapacidad.\n * \n * @param {boolean} posee_discapacidad Indica si el usuario posee discapacidad.\n * @returns {void}\n * @author José Manuel Jiménez\n */\nfunction seleccionarTengoDiscapacidad(posee_discapacidad) {\n    $('#contenedor-discapacidad').empty();\n    if (posee_discapacidad) {\n        $('#contenedor-discapacidad').append(`\n            <div class=\"col-12 p-4 border rounded-3\">\n                <div class=\"row align-items-center pb-2\">\n                    <div class=\"col-12\">\n                        <label class=\"form-label fw-semibold\">Discapacidad</label>\n                    </div>\n                    <div class=\"col-6\">\n                        ${crearMultiselect({\n                            opciones: discapacidades,\n                            id: 'select_discapacidades',\n                            name: 'select_discapacidades',\n                            class: 'input-dinamico',\n                            input_container_class: 'mb-0',\n                            placeholder: 'Discapacidad',\n                            onchange: 'seleccionarDiscapacidad(this.value)',\n                            required: true,\n                        })}\n                    </div>\n                    <div class=\"col-6\" id=\"contenedor-otra-discapacidad\"></div>\n                </div>\n            </div>\n        `);\n        inizializarMultiselect();\n    }\n}\n\n/**\n * Función para seleccionar otra discapacidad.\n * \n * @param {number} discapacidad_id ID de la discapacidad seleccionada.\n * @returns {void}\n * @author José Manuel Jiménez\n */\nfunction seleccionarDiscapacidad(discapacidad_id) {\n    let discapacidades_seleccionadas = $('#select_discapacidades').val() || [];\n    if (discapacidades_seleccionadas.includes('5')) {\n        let otra_discapacidad_existente = $('#otra_discapacidad').length > 0;\n        if (!otra_discapacidad_existente) {\n            $('#contenedor-otra-discapacidad').append(`\n                ${crearInput({\n                    id: 'otra_discapacidad',\n                    name: 'otra_discapacidad',\n                    class: 'input-dinamico',\n                    input_container_class: 'mb-0',\n                    label: '¿Cuál?',\n                    required: true,\n                })}\n            `);\n        }\n    } else {\n        $('#contenedor-otra-discapacidad').empty();\n    }\n}\n\n/**\n * Función para crear el perfil manualmente.\n * \n * @returns {void}\n * @author José Manuel Jiménez\n */\nfunction crearPerfilManualmente() {\n    $('#contenedor-campos-perfil').removeClass('d-none');\n    $('#contenedor-opciones-crear-ia').addClass('d-none');\n}\n\n/**\n * Función para manejar el cambio de archivo.\n * \n * @param {HTMLElement} archivo Elemento HTML del archivo cargado.\n * @returns {void}\n * @author José Manuel Jiménez\n */\nfunction cambioArchivo(archivo) {\n    let elemento_html_archivo = $(archivo).prop('id');\n    if (revision_hv_ia && elemento_html_archivo == 'hoja_vida') {\n        generarPerfilHVPorIA(elemento_html_archivo);\n    }\n}","numLines":1506,"startLine":1,"totalLines":1506}},"sourceToolAssistantUUID":"0473097f-2d5f-411e-b007-86077438f7dd"}
{"parentUuid":"8ccb8d91-9410-47c3-a74c-4ab0450e5f70","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","slug":"resilient-gathering-fog","message":{"model":"claude-opus-4-5-20251101","id":"msg_01JTdxm4vFn3CYWMgnrMir13","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Ahora tengo suficiente información para analizar el archivo. También quiero revisar los parciales incluidos en el blade para tener una visión más completa.","signature":"EsgCCkYICxgCKkCRYkPf+DkB4vjsaENL6cryAT/uUpbdY8OSmLUzKizVzSz21++4uUnx66QnVMCYnFCJEEHYIyPNmzvd+0NIkcNcEgx8x8v7CBKh2SP2OEoaDFsxNnNkNNLftnIBUSIwNcEaBr6MUm4ck6APMRPhJQ0bAuMuvVbOdqYTlmfrLs4URdekCiz/y0d3Fq8jHx1OKq8B1/eoT4WkkmCwHXZ0WK2ba11XyTPGhhGTRmqmPVCcVlkvFhb3AQmPea9EsNEYWH008THRzEU4Fb8qsiGcWkfdfag/BitIPF78s4HPpcsm0hrKORsGRzyuWIHpXxQ/J35PYYYoEK2PfllWOgeLFBZLx0lkioRIBu7tP9wjTYllzpXgCAklwnPm1J/4JsD2F9SJg31UOWPtAW2/My1uo4D1XHaCLRL+tYY/ohaLWUTljhgB"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":4112,"cache_creation_input_tokens":24335,"cache_read_input_tokens":31541,"cache_creation":{"ephemeral_5m_input_tokens":24335,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CXWJdjWKaRNpEhupM8mTE","type":"assistant","uuid":"d6b918c3-06c9-4543-b020-c0c482879065","timestamp":"2026-01-26T16:28:15.551Z"}
{"parentUuid":"d6b918c3-06c9-4543-b020-c0c482879065","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","slug":"resilient-gathering-fog","message":{"model":"claude-opus-4-5-20251101","id":"msg_01JTdxm4vFn3CYWMgnrMir13","type":"message","role":"assistant","content":[{"type":"text","text":"## Análisis del archivo `completar-datos-usuario.blade.php`\n\n### Descripción General\nEste es un formulario de **registro/completar datos de aplicantes** para el portal de empleo de PsicoAlianza. Permite a los candidatos completar su perfil en 3 pasos.\n\n### Estructura del Formulario (Wizard de 3 pasos)\n\n| Paso | ID | Descripción |\n|------|----|-------------|\n| 1 | `datos-generales` | Datos personales básicos |\n| 2 | `datos-acceso` | Email, verificación y contraseña |\n| 3 | `perfil-laboral` | Hoja de vida (solo si `$revision_hv` es true) |\n\n### Archivos JS Asociados\n\n**Scripts cargados en orden:**\n1. **[crear.js](public/src/portal-empleo/crear.js)** - Lógica principal del formulario\n2. **[completar-datos-perfil-ia.js](public/src/portal-empleo/completar-datos-perfil-ia.js)** - Integración con IA para leer hojas de vida\n3. **[funciones-seleccion.js](public/js/ofertas-laborales/funciones/funciones-seleccion.js)** - Funciones de selección\n4. **[form-informacion.js](public/js/ofertas-laborales/form-informacion.js)** - Información de formularios\n\n### Funcionalidades Principales\n\n#### 1. **Validación de Contraseña** ([crear.js:8-33](public/src/portal-empleo/crear.js#L8-L33))\n- Mínimo 8 caracteres\n- Al menos una mayúscula\n- Al menos una minúscula\n- Al menos un número\n- Al menos un carácter especial\n- Confirmación de coincidencia\n\n#### 2. **Verificación de Email** ([crear.js:103-173](public/src/portal-empleo/crear.js#L103-L173))\n- Envía código de autorización al email\n- Contador regresivo de 59 segundos para reenvío\n- Validación del código vía AJAX\n\n#### 3. **Gestión de Estudios** ([crear.js:562-867](public/src/portal-empleo/crear.js#L562-L867))\n- Agregar/editar/eliminar niveles educativos\n- Selector de graduado o cursando\n- Validación de fechas\n- Ordenamiento por fecha\n- Visualización de certificados (base64 → blob)\n\n#### 4. **Gestión de Experiencias Laborales** ([crear.js:869-1066](public/src/portal-empleo/crear.js#L869-L1066))\n- CRUD completo de experiencias\n- Toggle \"actualmente trabajo\"\n- Cálculo automático de duración\n- Gestión de certificados laborales\n\n#### 5. **Integración con IA** ([completar-datos-perfil-ia.js](public/src/portal-empleo/completar-datos-perfil-ia.js))\n- Lee hojas de vida (PDF) con IA\n- Autocompletado de estudios, experiencias, habilidades e idiomas\n- Endpoint: `/perfiles-laborales-leer-hv-ia`\n\n### Variables Globales Importantes\n\n```javascript\nconst USUARIO = @json($usuario);           // Datos del usuario\nlet estudios = [];                          // Array de estudios\nlet experiencias = [];                      // Array de experiencias  \nlet certificados_laborales = [];            // Certificados adjuntos\nlet usuario_verificado = false;             // Estado de verificación\nlet estado_validacion_contrasena = {...};   // Estado de validaciones\n```\n\n### Modales Incluidos\n\n1. **`cancelar-creacion-usuario`** - Confirmación de cancelación\n2. **`modal-generando-ia`** - Loading mientras IA procesa\n3. **`modal-agregar-nivel-educativo`** - Formulario de estudios\n4. **`modal-agregar-experiencia-laboral`** - Formulario de experiencias\n\n### Dependencias Externas\n- **Cropper.js** - Recorte de imágenes (avatar)\n- **Moment.js** - Manejo de fechas\n- **Flatpickr** - Selector de fechas\n- **Select2** - Selectores avanzados\n- **jQuery Validate** - Validación de formularios"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":4112,"cache_creation_input_tokens":24335,"cache_read_input_tokens":31541,"cache_creation":{"ephemeral_5m_input_tokens":24335,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CXWJdjWKaRNpEhupM8mTE","type":"assistant","uuid":"1b76ceb0-4afe-4619-9219-5ac42a895bde","timestamp":"2026-01-26T16:28:31.741Z"}
{"type":"queue-operation","operation":"dequeue","timestamp":"2026-01-26T16:34:01.434Z","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340"}
{"type":"file-history-snapshot","messageId":"e1ff4744-84a3-4fd1-a318-f84ea53e2937","snapshot":{"messageId":"e1ff4744-84a3-4fd1-a318-f84ea53e2937","trackedFileBackups":{},"timestamp":"2026-01-26T16:34:01.721Z"},"isSnapshotUpdate":false}
{"parentUuid":"8f87a1a8-7ad7-4eca-9412-e9ace7f86ed4","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","slug":"resilient-gathering-fog","type":"progress","data":{"type":"hook_progress","hookEvent":"PreToolUse","hookName":"PreToolUse:Read","command":"callback"},"toolUseID":"toolu_01REF1Xuyg1J8JMd5wX2s6at","parentToolUseID":"toolu_01REF1Xuyg1J8JMd5wX2s6at","uuid":"a8ee700f-c24e-4049-b8a6-827998b9b9ad","timestamp":"2026-01-26T16:27:58.243Z"}
{"parentUuid":"0224aefd-9afe-4281-a16f-8ce10076fea8","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","slug":"resilient-gathering-fog","type":"progress","data":{"type":"hook_progress","hookEvent":"PreToolUse","hookName":"PreToolUse:Read","command":"callback"},"toolUseID":"toolu_0111F18Vv7GKudSkoFpfuxmZ","parentToolUseID":"toolu_0111F18Vv7GKudSkoFpfuxmZ","uuid":"5dba09ad-ec7b-4f72-9741-030e5b7a12a9","timestamp":"2026-01-26T16:28:08.477Z"}
{"parentUuid":"5dba09ad-ec7b-4f72-9741-030e5b7a12a9","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","slug":"resilient-gathering-fog","type":"progress","data":{"type":"hook_progress","hookEvent":"PreToolUse","hookName":"PreToolUse:Read","command":"callback"},"toolUseID":"toolu_01CoP1mKBnXM7WFcvQ13Abwa","parentToolUseID":"toolu_01CoP1mKBnXM7WFcvQ13Abwa","uuid":"86103f89-aa33-4cf8-93cb-fe322926e8e1","timestamp":"2026-01-26T16:28:08.477Z"}
{"parentUuid":"86103f89-aa33-4cf8-93cb-fe322926e8e1","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","slug":"resilient-gathering-fog","type":"progress","data":{"type":"hook_progress","hookEvent":"PreToolUse","hookName":"PreToolUse:Read","command":"callback"},"toolUseID":"toolu_01Jr4Ghzjph45sVmAoSfAmUu","parentToolUseID":"toolu_01Jr4Ghzjph45sVmAoSfAmUu","uuid":"15f2a69b-fb5d-429e-9666-67b72176dee7","timestamp":"2026-01-26T16:28:08.478Z"}
{"parentUuid":"1b76ceb0-4afe-4619-9219-5ac42a895bde","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","slug":"resilient-gathering-fog","type":"user","message":{"role":"user","content":[{"type":"text","text":"<ide_selection>The user selected the lines 1267 to 1267 from c:\\laragon\\www\\psicoalianza-2\\public\\src\\portal-empleo\\crear.js:\nfunction verificarTodasLasValidacionesContrasena() {\n\nThis may or may not be related to the current task.</ide_selection>"},{"type":"text","text":"mira tengo esta funcion function verificarTodasLasValidacionesContrasena() { que valida si coloca ese boton disable o no pero s eejcuta cuando se configurta la contraseña pero si configuro la contrasela y me salgo y aun me queda un paso que s el tercero ese boton que siguinte queda disable"}]},"uuid":"e1ff4744-84a3-4fd1-a318-f84ea53e2937","timestamp":"2026-01-26T16:34:01.718Z","permissionMode":"default"}
{"parentUuid":"e1ff4744-84a3-4fd1-a318-f84ea53e2937","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","slug":"resilient-gathering-fog","message":{"model":"claude-opus-4-5-20251101","id":"msg_01RsNxRzPqVDwcTXbhcBWNeS","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"El usuario tiene un problema con la función `verificarTodasLasValidacionesContrasena()`. El problema es:\n\n1. Esta función habilita/deshabilita el botón para pasar al siguiente paso basándose en si la contraseña cumple todas las validaciones\n2. Pero si el usuario ya configuró su contraseña previamente (políticas aceptadas), la variable `validar_contrasena` se pone en `false`\n3. Sin embargo, el botón `#btn-datos-acceso` sigue quedando deshabilitado porque la función `verificarTodasLasValidacionesContrasena()` no considera el caso donde `validar_contrasena = false`\n\nMiremos el código:\n\n```javascript\n// En el blade, cuando ya aceptó políticas:\nif (politicas_aceptadas && aceptar_teminos_condiciones) {\n    $('#btn-siguiente-datos-generales').prop('disabled', false);\n    $('#titulo-tab-pasos-usuario-datos-acceso').prop('disabled', false);\n    $('#contenedor-texto-verificacion-cuenta').addClass('d-none');\n    $('#contenedor-mensaje-verificar').addClass('d-none');\n    $('#contenedor-boton-verificar-correo').addClass('d-none');\n    usuario_verificado = true;\n    validar_contrasena = false;  // <-- Aquí se pone en false\n}\n```\n\nY la función problemática:\n\n```javascript\nfunction verificarTodasLasValidacionesContrasena() {\n    var todas_las_validaciones_pasan = Object.values(estado_validacion_contrasena).every(estado_item => estado_item === true);\n    $('#submit-btn').prop('disabled', !todas_las_validaciones_pasan);\n    \n    if (todas_las_validaciones_pasan) {\n        $('#btn-datos-acceso').prop('disabled', false);\n        $('#submit-btn').removeClass('btn-secondary').addClass('btn-success');\n    } else {\n        $('#btn-datos-acceso').prop('disabled', true);  // <-- Este es el problema\n        $('#submit-btn').removeClass('btn-success').addClass('btn-primary');\n    }\n}\n```\n\nEl problema radica en que cuando `validar_contrasena = false`, la función sigue deshabilitando `#btn-datos-acceso` porque `estado_validacion_contrasena` contiene valores en `false` (ya que no se ingresó contraseña). La función necesita verificar si `validar_contrasena` es `false` antes de deshabilitar el botón, permitiendo que el usuario avance cuando ya ha completado la contraseña en un paso anterior.","signature":"Eo8SCkYICxgCKkBsxqhhpZtMhOROFHaf2asxpFgOs5EhqmIZ3Wht+LfOS/OS1zvo3CxSOKTy0yq+qqp/6Sg4jm58vwe2qk5GidrREgzVCViuMbsy77UDmbgaDFVAEWT/Z2ni0QKg9iIwqsgN8eOcSXPgVTI5EunWbob1vyzBRRr0UIN9ikgxGAIkyhEx61uU4rOtVWTfOKRwKvYQkfWi+xu9wXofk01oJ3/gW4MrnbDzvN0KP0wYJfY8Oky2dq9qMhqmn+NskjrTkETWzBtwe4sL8uZjat7Q0e5a6tAARNYG/OWpsxTpGTzWZly0+tBNjLlKfsVHUTRT4yr6ravQhmthWCFOS3gGcBK3GILJs2AIigVDHuYpfJtEVjEsV7uSAyfEfkeoZhvzUl+yz2AbFLxPl1XMvYlYUXbNCBB2L4R49SAAdGErW0dm00RxyKX0XMYrCiNe8sKWibDlWsipRbQ+26nIZtT2a/NS9qv/diePey3wQIYrLnMVoK4yn8B9t3R4RgpvPirw/EI1TnkdeiExxJHxBR5L1tXLVFV0sfTE4pcxmQ+zwaeBvgD2S6MFNa98akj3tav4g32mJVNCkjqPJCvilfmZQdpR0AQ5yPqGahTxF/RwP6b9HqRj5YSKUZeytB5cGtbqSTSjewP/MA2Jk1PoBuYbmKPsZW44N0ETO8VtBCv4PyNzg7GiC6uI+iicFlzXkjNcf5ZC4wSrRhVJrlIbcDsGbgKFZ6YQEi/sl/NKqV5vAUQwRET51u1EPfkdGgFlPnGA3+2qUp4Jfn94d9E+FrJh/5XiqlXO5QsYzPQzJ36NTBIP6lH96U4Dxil/ta2+0nqS0nnomgF6PKLe/H3jdiLzqNXmkU7+6vEpJ+L5pnAs2FI9oDPAu/ORgJKKKpXfmL0ZQDSY08gQgWDB24qZMQpW5dmqHy5Bm6feImJIEUodFSaiQ5l43Od2KfkPl2n/6eHsg1OLOb1L2mWb2/OWy+TEldmK+4sTlEj4PMmJWZ07Ggp1laAtG+j9jIj1xF+n0UMapVBU16UqRec8i54KYNRuv4guXpmqHkCcfpaFxxdlRQw/rTl2vaNHdR49yR/tNbARZRtO1AkQ74e8BguQx/Qc0vfF5ES6sjxarUhUu5Au+WXOrFCXl+wS0H65KUm6RhBSW0THsqIVXCXFaH535efglYgqxSt2RvfQowlYIb6Fc0SEgIbTYtnvuaS06C/DxE+hw0bQN83PObJYl07pv20qvarfEXUYsYqkI4SjB5BL0xTAumzZf+3cQ+ePySo+aZR62xBqGn5/9AP2zsRbv3Xhn34P7xpWSpQ2IjUFz0rW2R/+NSmlb5ul0AaXaaY23PCXND21mvql9dvlV+Ufka2k6aF9JeZv8q0MpRVEkQLxLmdMla7oUmgv0Fba9MGzWRXri1y/SNpuJu1X4OzXvN0YFZRhJjzzWQrkpBayvtykz7qKR4mzj34kjeN0FnIsAbYibHTEjypxi+sxGAxP5pfyuDh/f8OhAkIDCz+FYSmqBQTSkS7I+dgEWUjsRxQ3Pv2Y+bgUXOcZGumTpxVSccZlVdN5QIjw2ERimG7+MgtngxvAXbijXxB4tjquneUxO1ArjlAFxkAFStWBz6ZIPZCP2anG5OgZ5tRLxvp/KB5JbYJ9QrrlA3wIH6K20D0d82DGet4Ib1pzUGx3qvR9NxURXH6hZ9DNwdCwBWVoPO2uxxUVE+6ya33qQesH8jDmgU+ZCntRC+Sk6lK72R0vuGv2ZPw0ap/8QaCtGT2ZRhTXUMAazSDYHkUAAQiJerwufmqM7tnSP7fPEf+A0Rb0cZdsmUYv+WrXT6GY+jZKMsq9xNa2tqMbXMq4LpG0F8CzNCQa0pqARpkvSzsdQuTWctRdRJXwKaPw3PqLyr7eiVljtTh0i4FgYQIk0Ap5mKzeo7lAEH9tcfm+urafggwTjtMmE/f/rFNwkkTq044bLs6CGDExCUztGA8ppmwHfR1dHNDkxC+gOmQnQcPGyRwzoq5lqjBpP14nIm957jqpUpB5ti8QAUdXQGBnu7B7dnZjqEphuH0TXeKRP37n4SBAavL/a5pQ1baZRMFJGKOJc4E84TQPQs8zHLBKw+/9cvQ/oCrf7RwrIhzERUSjwZBr+0wHlNZVnk40FtLvgSLXhcRonXGeXF5S61NnMaaDxW19eFIu0n6APpQfxsaYnbX54Ixd00xVk1NbwzEPpCk6td4sZf0GqS5Q3D0/TGIgjzzkW0UzkdcQPXChuPf3vExBX4Q7GOS4+J0inNqLuq73pjk3uFeNuzwMZwNAQAhhLfB5csWvbebhAVihdvYa6C7iZ7Fth2gqEnV+9s/thtods1CP63pwZOngc3/uVqzukZNfriLS6UZgXJTq2IaJqmCYQ3C4jjFcynbBWL45tN5m+oGN6ET7cc1GQ2FAfMiTdwEy87mqZM/+W+zlK7ab2ATeClGSeTScDiAnGc48lWco3/aYCzvqvqu/RjU0C+p6ieYR6HqJZQiYsZfeuDEW9G2K57vlvUVUHpwF4t7qGf8vPG/ztpGXjKqvbtqZkmbcWMJwyGkxGwlhFzNSwxtlvSxTl3joDpEJWXk7W2kRWjqjE9t3pfGjeYYoAvszBk2AN/KnavU2EnJ983lVzzfKBxQlUzf+Wxb5MDKdX/p/IAQrPVEDhnFLfgtcOYgSIYIhidqW/IUVu5WZeD6YJmn2uFhXAod/KsgR9ye8tY9oULSxrCQxOL9VHxSL6xl2NG2BKB+Kdu04E44WrcDzh32CPskemLnBm4F+C2r7oVUWQ3fJjU64hOIX6QSUx9LEogQJq/VjbPrJPbcnt4o7DmAnD96amflY/s8oSvHKoqTr4ae1Y05+M2rHu1P5K44iVWPe7bb6urTLBD1vMAR2SpEl9lhB7KjhdZFVeI+uz/Q/rFAH+1++bOz1i+2s/iSLhd/CL+zE+e6D6YfSVGtKsz/SwqGpMfas9rMazYY6MW8bSM958/4MDCoGMGizMqK2pdI10ivCU7NNe5hJMXCuDPvzAi2MpvX7rwNFapWOCvmYh+81pE9T6TafAexuioVPGAfFmQ/2bZXOSkv3yqaGgyCxGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":61323,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":61323,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CXWK5X9efhH1g9RBq9r5n","type":"assistant","uuid":"4329f80f-1916-4fc4-8d3f-6be801afee65","timestamp":"2026-01-26T16:34:15.777Z"}
{"parentUuid":"4329f80f-1916-4fc4-8d3f-6be801afee65","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","slug":"resilient-gathering-fog","message":{"model":"claude-opus-4-5-20251101","id":"msg_01RsNxRzPqVDwcTXbhcBWNeS","type":"message","role":"assistant","content":[{"type":"text","text":"Entiendo el problema. La función `verificarTodasLasValidacionesContrasena()` siempre verifica el estado de las validaciones de contraseña, pero cuando el usuario ya tiene las políticas aceptadas (`validar_contrasena = false`), no debería bloquear el botón.\n\nEl problema está en que la función no considera la variable `validar_contrasena`. Necesitas modificarla para que si `validar_contrasena` es `false`, habilite el botón directamente."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":61323,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":61323,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CXWK5X9efhH1g9RBq9r5n","type":"assistant","uuid":"1caa0d53-2310-479c-a861-613ba0aa34d8","timestamp":"2026-01-26T16:34:15.942Z"}
{"parentUuid":"1caa0d53-2310-479c-a861-613ba0aa34d8","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","slug":"resilient-gathering-fog","message":{"model":"claude-opus-4-5-20251101","id":"msg_01RsNxRzPqVDwcTXbhcBWNeS","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01BGQPpJcqnmttAzxTvSveiZ","name":"Edit","input":{"replace_all":false,"file_path":"c:\\laragon\\www\\psicoalianza-2\\public\\src\\portal-empleo\\crear.js","old_string":"function verificarTodasLasValidacionesContrasena() {\n    var todas_las_validaciones_pasan = Object.values(estado_validacion_contrasena).every(estado_item => estado_item === true);\n    $('#submit-btn').prop('disabled', !todas_las_validaciones_pasan);\n    \n    if (todas_las_validaciones_pasan) {\n        $('#btn-datos-acceso').prop('disabled', false);\n        $('#submit-btn').removeClass('btn-secondary').addClass('btn-success');\n    } else {\n        $('#btn-datos-acceso').prop('disabled', true);\n        $('#submit-btn').removeClass('btn-success').addClass('btn-primary');\n    }\n}","new_string":"function verificarTodasLasValidacionesContrasena() {\n    // Si no se requiere validar contraseña, habilitar el botón directamente\n    if (!validar_contrasena) {\n        $('#btn-datos-acceso').prop('disabled', false);\n        return;\n    }\n\n    var todas_las_validaciones_pasan = Object.values(estado_validacion_contrasena).every(estado_item => estado_item === true);\n    $('#submit-btn').prop('disabled', !todas_las_validaciones_pasan);\n\n    if (todas_las_validaciones_pasan) {\n        $('#btn-datos-acceso').prop('disabled', false);\n        $('#submit-btn').removeClass('btn-secondary').addClass('btn-success');\n    } else {\n        $('#btn-datos-acceso').prop('disabled', true);\n        $('#submit-btn').removeClass('btn-success').addClass('btn-primary');\n    }\n}"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":61323,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":61323,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CXWK5X9efhH1g9RBq9r5n","type":"assistant","uuid":"cf459dcd-26a2-47d6-ae67-713312c3e955","timestamp":"2026-01-26T16:34:19.504Z"}
{"type":"file-history-snapshot","messageId":"cf459dcd-26a2-47d6-ae67-713312c3e955","snapshot":{"messageId":"e1ff4744-84a3-4fd1-a318-f84ea53e2937","trackedFileBackups":{"public\\src\\portal-empleo\\crear.js":{"backupFileName":"44d16ab924473a32@v1","version":1,"backupTime":"2026-01-26T16:34:32.920Z"}},"timestamp":"2026-01-26T16:34:01.721Z"},"isSnapshotUpdate":true}
{"parentUuid":"cf459dcd-26a2-47d6-ae67-713312c3e955","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","slug":"resilient-gathering-fog","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01BGQPpJcqnmttAzxTvSveiZ","type":"tool_result","content":"The file c:\\laragon\\www\\psicoalianza-2\\public\\src\\portal-empleo\\crear.js has been updated. Here's the result of running `cat -n` on a snippet of the edited file:\n  1263→ * @return {void}\n  1264→ * @author Andres Gonzalez\n  1265→ * @author Jair Carvajal\n  1266→ */\n  1267→function verificarTodasLasValidacionesContrasena() {\n  1268→    // Si no se requiere validar contraseña, habilitar el botón directamente\n  1269→    if (!validar_contrasena) {\n  1270→        $('#btn-datos-acceso').prop('disabled', false);\n  1271→        return;\n  1272→    }\n  1273→\n  1274→    var todas_las_validaciones_pasan = Object.values(estado_validacion_contrasena).every(estado_item => estado_item === true);\n  1275→    $('#submit-btn').prop('disabled', !todas_las_validaciones_pasan);\n  1276→\n  1277→    if (todas_las_validaciones_pasan) {\n  1278→        $('#btn-datos-acceso').prop('disabled', false);\n  1279→        $('#submit-btn').removeClass('btn-secondary').addClass('btn-success');\n  1280→    } else {\n  1281→        $('#btn-datos-acceso').prop('disabled', true);\n  1282→        $('#submit-btn').removeClass('btn-success').addClass('btn-primary');\n  1283→    }\n  1284→}\n  1285→\n  1286→/**\n  1287→ * Función para verificar coincidencia de contraseñas.\n  1288→ * "}]},"uuid":"fc42f268-e291-49cb-bae5-13840e1bb86c","timestamp":"2026-01-26T16:34:32.943Z","toolUseResult":{"filePath":"c:\\laragon\\www\\psicoalianza-2\\public\\src\\portal-empleo\\crear.js","oldString":"function verificarTodasLasValidacionesContrasena() {\n    var todas_las_validaciones_pasan = Object.values(estado_validacion_contrasena).every(estado_item => estado_item === true);\n    $('#submit-btn').prop('disabled', !todas_las_validaciones_pasan);\n    \n    if (todas_las_validaciones_pasan) {\n        $('#btn-datos-acceso').prop('disabled', false);\n        $('#submit-btn').removeClass('btn-secondary').addClass('btn-success');\n    } else {\n        $('#btn-datos-acceso').prop('disabled', true);\n        $('#submit-btn').removeClass('btn-success').addClass('btn-primary');\n    }\n}","newString":"function verificarTodasLasValidacionesContrasena() {\n    // Si no se requiere validar contraseña, habilitar el botón directamente\n    if (!validar_contrasena) {\n        $('#btn-datos-acceso').prop('disabled', false);\n        return;\n    }\n\n    var todas_las_validaciones_pasan = Object.values(estado_validacion_contrasena).every(estado_item => estado_item === true);\n    $('#submit-btn').prop('disabled', !todas_las_validaciones_pasan);\n\n    if (todas_las_validaciones_pasan) {\n        $('#btn-datos-acceso').prop('disabled', false);\n        $('#submit-btn').removeClass('btn-secondary').addClass('btn-success');\n    } else {\n        $('#btn-datos-acceso').prop('disabled', true);\n        $('#submit-btn').removeClass('btn-success').addClass('btn-primary');\n    }\n}","originalFile":"$(document).ready(function () {\n    configurarFormulario(\"formulario-creacion-aplicante\");\n    configurarFormulario(\"formulario-nivel-educativo\");\n    configurarFormulario(\"formulario-experiencia-laboral\");\n    configurarFormulario(\"formulario-perfiles-laborales\");\n    moment.locale('es');\n\n    $('#password').on('input', function() {\n        var contrasena = $(this).val();\n        \n        // Validar longitud (mínimo 8)\n        estado_validacion_contrasena.longitud_minima = contrasena.length >= 8;\n        actualizarElementoValidacion('longitud-contrasena', estado_validacion_contrasena.longitud_minima);\n        \n        // Validar mayúscula\n        estado_validacion_contrasena.letra_mayuscula = /[A-Z]/.test(contrasena);\n        actualizarElementoValidacion('mayuscula-contrasena', estado_validacion_contrasena.letra_mayuscula);\n        \n        // Validar minúscula\n        estado_validacion_contrasena.letra_minuscula = /[a-z]/.test(contrasena);\n        actualizarElementoValidacion('minuscula-contrasena', estado_validacion_contrasena.letra_minuscula);\n        \n        // Validar número\n        estado_validacion_contrasena.tiene_numero = /\\d/.test(contrasena);\n        actualizarElementoValidacion('numero-contrasena', estado_validacion_contrasena.tiene_numero);\n        \n        // Validar carácter especial\n        estado_validacion_contrasena.caracter_especial = /[!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?]/.test(contrasena);\n        actualizarElementoValidacion('caracter-especial-contrasena', estado_validacion_contrasena.caracter_especial);\n        \n        verificarCoincidenciaContrasenas();\n        verificarTodasLasValidacionesContrasena();\n    });\n\n    $('#password_confirmation').on('input', function() {\n        verificarCoincidenciaContrasenas();\n        verificarTodasLasValidacionesContrasena();\n    });\n\n    verificarTodasLasValidacionesContrasena();\n    inputsCleave();\n    actualizarSelect2();\n    inizializarMultiselect();\n    inicializarTooltips();\n    inicializarIputsFile();\n});\n\nlet usuario_verificado = false;\nlet respuesta_codigo = [];\nlet validando_codigo = false;\nlet estudios = [];\nlet experiencias = [];\nlet certificados_laborales = [];\nlet indice_editar = null;\n\nlet estado_validacion_contrasena = {\n    longitud_minima:       false,\n    letra_mayuscula:       false,\n    letra_minuscula:       false,\n    tiene_numero:          false,\n    caracter_especial:     false,\n    contrasenas_coinciden: false\n};\n\n/**\n * Función para cancelar la creación de un usuario por medio de la apertura de un modal.\n * \n * @returns {void}\n * @author José Manuel Jiménez\n */\nfunction cancelarCreacionUsuario() {\n    $('#cancelar-creacion-usuario').modal('show');\n}\n\n/**\n * Función para validar las políticas de tratamiento de datos personales.\n * @returns {void}\n * @author José Manuel Jiménez\n * @author Andres Gonzalez\n */\nfunction validarPoliticas() {\n    let politicas_aceptadas  = $('#aceptar_politicas').is(':checked');\n    let terminos_condiciones = $('#aceptar_teminos_condiciones').is(':checked');\n    $('#btn-siguiente-datos-generales').prop('disabled', !(politicas_aceptadas && terminos_condiciones));\n}\n\n/**\n * Función para validar el correo electrónico ingresado por el usuario.\n * @returns {void}\n * @author José Manuel Jiménez\n */\nfunction validarEmail() {\n    $('#email-enviado').text($('#email').val());\n}\n\n/**\n * Función para enviar una notificación de un código para verificar el usuario.\n * \n * @param {string} tipo_verificacion Tipo de verificación (correo o celular).\n * @returns {void}\n * @author José Manuel Jiménez\n */\nfunction enviarVerificacion(tipo_verificacion) {\n    let email = $('#email').val();\n    let expresion_regular_email = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (expresion_regular_email.test(email) && email.length > 0) {\n        if (typeof USUARIO !== 'undefined') {\n            $.ajax({\n                type: 'POST',\n                url : '/enviar-codigo-autorizacion',\n                data: {\n                    _token: $('meta[name=\"csrf-token\"]').attr('content'),\n                    id    : USUARIO.id,\n                    email : email\n                }\n            }).done(function (respuesta) {\n                mostrarAlertasCodigoEnviado();\n            }).fail(function (error) {\n                $('#alerta-exito').removeClass('d-block').addClass('d-none');\n                $('#alerta-error').removeClass('d-none').addClass('d-block');\n                $('#alerta-error').html('Ocurrio un error al intentar enviar el código de verificación por correo electrónico.');\n                console.error(error);\n            });\n        } else {\n            $.ajax({\n                type: 'POST',\n                url : '/portales-empleo-enviar-codigo-autorizacion',\n                data: {\n                    _token: $('meta[name=\"csrf-token\"]').attr('content'),\n                    email : $('#email').val()\n                }\n            }).done(function (respuesta) {\n                respuesta_codigo = respuesta.respuesta;\n                mostrarAlertasCodigoEnviado();\n            }).fail(function (error) {\n                console.error(error);\n            });\n        }\n    } else {\n        mostrarToast('danger', 'Por favor, ingresa un correo electrónico válido.', '', '', 'bi bi-exclamation-lg');\n    }\n}\n\n/**\n * Función para mostrar las alertas cuando se ha enviado el código de confirmación.\n * \n * @returns {void}\n * @author José Manuel Jiménez\n */\nfunction mostrarAlertasCodigoEnviado() {\n    $('#contenedor-mensaje-verificar').addClass('d-none');\n    $('#contenedor-mensaje-enviado').removeClass('d-none');\n    $('#contenedor-info-mensaje-enviado').removeClass('d-none');\n    $('#contenedor-codigo-confirmacion').removeClass('d-none col-lg-6');\n    $('#contenedor-reenviar-mensaje').addClass('d-none');\n    $('.boton-verificacion').prop('disabled', true);\n    let segundos_para_reenviar = 59;\n    let intervalo = setInterval(function () {\n    $('#contador-segundos').text(segundos_para_reenviar);\n        if (segundos_para_reenviar <= 0) {\n            clearInterval(intervalo);\n            if (!usuario_verificado) {\n                $('.boton-verificacion').prop('disabled', false);\n                $('#contenedor-info-mensaje-enviado').addClass('d-none');\n                $('#contenedor-mensaje-enviado').addClass('d-none');\n                $('#contenedor-reenviar-mensaje').removeClass('d-none');\n                $('#contenedor-codigo-confirmacion').addClass('col-lg-6');\n                $('#contenedor-boton-reenviar-mensaje').removeClass('d-none');\n            }\n        }\n        segundos_para_reenviar--;\n    }, 1000);\n}\n\n/**\n * Función para validar el código de confirmación ingresado por el usuario.\n * \n * @param {string} codigo Código de confirmación ingresado por el usuario.\n * @return {void}\n * @author José Manuel Jiménez\n */\nfunction validarCodigoConfirmacion(codigo) {\n    if (codigo.length == 6) {\n        $('#contenedor-codigo-incorrecto').addClass('d-none');\n        if (typeof USUARIO !== 'undefined') {\n            if (!validando_codigo) {\n                validando_codigo = true;\n                $.ajax({\n                    type: 'POST',\n                    url : '/verificar-codigo-autorizacion',\n                    data: {\n                        _token: $('meta[name=\"csrf-token\"]').attr('content'),\n                        id    : USUARIO.id,\n                        codigo: codigo\n                    }\n                }).done(function (respuesta) {\n                    validando_codigo = false;\n                    if (respuesta.message === 'El código no es válido') {\n                        $('#contenedor-codigo-incorrecto').removeClass('d-none');\n                    } else {\n                        mostrarAlertasUsuarioVerificado();\n                    }\n                }).fail(function (error) {\n                    mostrarToast('danger', 'Ocurrió un error al intentar verificar el código de autorización.', '', '', '');\n                });\n            }\n        } else {\n            if (codigo == respuesta_codigo.codigo_autorizacion) {\n                mostrarAlertasUsuarioVerificado();\n            } else {\n                $('#contenedor-codigo-incorrecto').removeClass('d-none');\n            }\n        }\n    } else {\n        $('#contenedor-codigo-incorrecto').addClass('d-none');\n    }\n}\n\n/**\n * Función para mostrar las alertas cuando el usuario ha sido verificado.\n * \n * @returns {void}\n * @author José Manuel Jiménez\n */\nfunction mostrarAlertasUsuarioVerificado() {\n    usuario_verificado = true;\n    $('.boton-verificacion').prop('disabled', true);\n    $('#contenedor-codigo-confirmacion').addClass('d-none');\n    $('#contenedor-mensaje-enviado').addClass('d-none');\n    $('#contenedor-info-mensaje-enviado').addClass('d-none');\n    $('#contenedor-boton-reenviar-mensaje').addClass('d-none');\n    $('#contenedor-mensaje-confirmacion').removeClass('d-none');\n    $('#contenedor-reenviar-mensaje').addClass('d-none');\n    $('#contenedor-cuenta-verificada').removeClass('d-none');\n    $('#contenedor-contrasenas').removeClass('d-none');\n    $('#contenedor-codigo-incorrecto').addClass('d-none');\n    $('#contenedor-boton-verificar-correo').addClass('d-none');\n}\n\n/**\n * Ejecutar la acción cuando la petición no es exitosa.\n *\n * @param {Object} respuesta Respuesta de la solicitud.\n * @returns {Promise<Array>}\n * @author Andres Gonzalez\n * @author Jair Carvajal\n */\nfunction postError(respuesta) {\n    if (respuesta.errors) {\n        let errores_mostrados = false;\n\n        if (Array.isArray(respuesta.errors) && respuesta.errors.length > 0) {\n            respuesta.errors.forEach((error) => {\n                mostrarToast('danger', error);\n            });\n            errores_mostrados = true;\n        }\n        else if (typeof respuesta.errors === 'object' && Object.keys(respuesta.errors).length > 0) {\n            Object.values(respuesta.errors).forEach((error_mensajes) => {\n                if (Array.isArray(error_mensajes)) {\n                    error_mensajes.forEach((mensaje) => {\n                        mostrarToast('danger', mensaje);\n                    });\n                } else {\n                    mostrarToast('danger', error_mensajes);\n                }\n            });\n            errores_mostrados = true;\n        }\n\n        if (!errores_mostrados && respuesta.message) {\n            mostrarToast('danger', respuesta.message);\n        }\n    } else if (respuesta.message) {\n        mostrarToast('danger', respuesta.message);\n    } else {\n        mostrarToast('danger', 'Ocurrió un error al procesar la solicitud.');\n    }\n}\n\n\n/**\n * Función para cambiar al siguiénte formulario implementando validaciones\n *\n * @returns {void}\n * @author José Manuel Jiménez\n */\nlet mostrar_modal_horario = true;\nlet cambio_horario = false;\nlet siguiente_paso = false;\nfunction siguienteFormularioPaso() {\n    $('.tab-pane').addClass('d-block');\n    $('#formulario').submit();\n    let formulario_actual = $('#formulario .nav-pasos.active').first();\n    let formulario_actual_id = $(formulario_actual).attr('href');\n    let errores = $(formulario_actual.attr('href')).find('input.error , select.error , textarea.error');\n    if (errores.length == 0) {\n        if (formulario_actual_id == '#tab-pasos-usuario-datos-generales') {\n            let fecha_nacimiento = moment($('#fecha_nacimiento').val(), 'YYYY-MM-DD');\n            let fecha_hoy = moment();\n            let edad = fecha_hoy.diff(fecha_nacimiento, 'years');\n            if (edad < 15) {\n                mostrarToast('danger', 'Debes tener más de 15 años.');\n                return;\n            }\n        }\n        let formulario_siguiente = $(formulario_actual).closest('.tab-pasos').next().next('.tab-pasos').find('.nav-pasos');\n        if ($(formulario_siguiente).attr('href') != '#tab-pasos-usuario-perfil-laboral' || usuario_verificado) {\n            $(formulario_siguiente.attr('href')).find('input.error , select.error , textarea.error').removeClass('error');\n            $(formulario_siguiente.attr('href')).find('label.error').remove();\n            $(formulario_siguiente).prop('disabled', false);\n            $(formulario_siguiente).attr('aria-disabled', false);\n            $(formulario_siguiente).tab('show');\n        }\n    } else {\n        mostrarToast('danger', 'Parece que faltan algunos datos obligatorios. Por favor, revisa la información e intenta nuevamente', '', '', 'bi bi-exclamation-lg');\n    }\n    $('.tab-pane').removeClass('d-block');\n}\n\n/**\n * Función para validar el formulario antes de enviarlo.\n *\n * @param {Object} formulario Formulario a validar.\n * @returns {boolean} Retorna true si el formulario es válido, de lo contrario false.\n * @author José Manuel Jiménez\n  * @author Andres Gonzalez\n */\nfunction validacionAdicional(formulario) {\n    let valido = true;\n    if (formulario == 'formulario-nivel-educativo') {\n        let errores = $('#formulario-nivel-educativo').find('input.error , select.error , textarea.error');\n        if (errores.length == 0) {\n            let fecha_inicio = $('#fecha_inicio_estudio').val() ? moment($('#fecha_inicio_estudio').val(), 'YYYY-MM-DD') : null;\n            let fecha_fin = $('#fecha_fin_estudio').val() ? moment($('#fecha_fin_estudio').val(), 'YYYY-MM-DD') : null;\n            let fecha_actual = moment();\n            if (fecha_inicio && fecha_inicio.isAfter(fecha_actual)) {\n                mostrarToast('danger', 'La fecha de inicio del estudio no puede ser una fecha futura.');\n                valido = false;\n            } else if (fecha_fin && fecha_fin.isAfter(fecha_actual)) {\n                mostrarToast('danger', 'La fecha de finalización del estudio no puede ser una fecha futura.');\n                valido = false;\n            } else if (fecha_inicio && fecha_fin && fecha_fin.isBefore(fecha_inicio)) {\n                mostrarToast('danger', 'La fecha de finalización del estudio no puede ser anterior a la fecha de inicio.');\n                valido = false;\n            } else {\n                let estudio = {\n                    titulo: $('#titulo').val(),\n                    institucion_educativa: $('#institucion_educativa').val(),\n                    nivel_educativo_id: parseInt($('#nivel_educativo_id').val()),\n                    nivel_educativo: $('#nivel_educativo_id option:selected').text().trim(),\n                    graduado: $('#cursando_estudios').prop('checked') ? false : true,\n                    fecha_inicio: $('#fecha_inicio_estudio').val(),\n                    fecha_fin: $('#fecha_fin_estudio').val() || null,\n                    jornada: $('#jornada').val() || null,\n                }\n                if (indice_editar == null) {\n                    estudios.push(estudio);\n                } else {\n                    estudios[indice_editar] = estudio;\n                    indice_editar = null;\n                }\n                mostrarNivelesEducativos();\n                $('#modal-agregar-nivel-educativo').modal('hide');\n                limpiarFormulario('formulario-nivel-educativo');\n                mostrarToast('success', 'Nivel educativo agregado exitosamente.');\n                setTimeout(() => {\n                    $('#formulario-nivel-educativo').find('input.error , select.error , textarea.error').removeClass('error');\n                    $('#formulario-nivel-educativo').find('label.error').remove();\n                }, 100);\n            }\n        } else {\n            mostrarToast('danger', 'Faltan datos obligatorios. Revisa la información e inténtalo de nuevo.');\n        }\n        valido = false;\n    } else if (formulario == 'formulario-experiencia-laboral') {\n        let errores = $('#formulario-experiencia-laboral').find('input.error , select.error , textarea.error');\n        if (errores.length == 0) {\n            let fecha_inicio = $('#fecha_inicio_experiencia').val() ? moment($('#fecha_inicio_experiencia').val(), 'YYYY-MM-DD') : null;\n            let fecha_fin = $('#fecha_fin_experiencia').val() ? moment($('#fecha_fin_experiencia').val(), 'YYYY-MM-DD') : null;\n            let fecha_actual = moment();\n            if (fecha_inicio && fecha_inicio.isAfter(fecha_actual)) {\n                mostrarToast('danger', 'La fecha de inicio de la experiencia laboral no puede ser una fecha futura.');\n                valido = false;\n            } else if (fecha_fin && fecha_fin.isAfter(fecha_actual)) {\n                mostrarToast('danger', 'La fecha de finalización de la experiencia laboral no puede ser una fecha futura.');\n                valido = false;\n            } else if (fecha_inicio && fecha_fin && fecha_fin.isBefore(fecha_inicio)) {\n                mostrarToast('danger', 'La fecha de finalización de la experiencia laboral no puede ser anterior a la fecha de inicio.');\n                valido = false;\n            } else {\n                let experiencia = {\n                    cargo: $('#cargo').val(),\n                    empresa: $('#empresa').val(),\n                    actualmente_trabajo: $('#actualmente_trabajo').prop('checked') ? 1 : 0,\n                    fecha_inicio: $('#fecha_inicio_experiencia').val(),\n                    fecha_fin: $('#fecha_fin_experiencia').val() || null,\n                    funciones: $('#funciones_experiencia').val(),\n                }\n                if (indice_editar == null) {\n                    experiencias.push(experiencia);\n                } else {\n                    experiencias[indice_editar] = experiencia;\n                    indice_editar = null;\n                    certificados_laborales = [];\n                }\n                mostrarExperienciasLaborales();\n                $('#modal-agregar-experiencia-laboral').modal('hide');\n                limpiarFormulario('formulario-experiencia-laboral');\n                mostrarToast('success', 'Experiencia laboral agregada exitosamente.');\n                setTimeout(() => {\n                    $('#formulario-experiencia-laboral').find('input.error , select.error , textarea.error').removeClass('error');\n                    $('#formulario-experiencia-laboral').find('label.error').remove();\n                }, 100);\n            }\n        } else {\n            mostrarToast('danger', 'Faltan datos obligatorios. Revisa la información e inténtalo de nuevo.');\n        }\n        valido = false;\n    } else {\n        let formulario_actual = $('#formulario .nav-pasos.active').first();\n        let id_formulario_actual = $(formulario_actual).attr('href');\n        let errores = $(id_formulario_actual).find('input.error , select.error , textarea.error');\n        if (id_formulario_actual == '#tab-pasos-usuario-datos-generales') {\n            let politicas_aceptadas = $('#aceptar_politicas').is(':checked');\n            if (!politicas_aceptadas) {\n                mostrarToast('danger', 'Debes aceptar las políticas de tratamiento de datos personales.', '', '', 'bi bi-exclamation-lg');\n            }\n            valido = false;\n        } else if (id_formulario_actual == '#tab-pasos-usuario-datos-acceso') {\n            if (validar_contrasena) {\n                if (!usuario_verificado && valido) {\n                    mostrarToast('danger', 'Debes verificar tu cuenta antes de continuar.', '', '', 'bi bi-exclamation-lg');\n                    valido = false;\n                }\n                if (Object.values(estado_validacion_contrasena).includes(false) && valido) {\n                    mostrarToast('danger', 'Tu contraseña no cumple con todos los requisitos de seguridad. Por favor, revisa los elementos marcados en rojo.', '', '', 'bi bi-exclamation-lg');\n                    valido = false;\n                }\n            } else {\n                valido = false;\n            }\n        } else if (id_formulario_actual == '#tab-pasos-usuario-perfil-laboral') {\n            if (errores.length > 0) {\n                mostrarToast('danger', 'Faltan algunos datos obligatorios. Por favor, revisa la información e intenta nuevamente');\n                valido = false;\n            }\n            let salario = parseFloat(limpiarCleave($('#salario').val())) || 0;\n            if (salario < 0) {\n                mostrarToast('danger', 'El salario no puede ser un valor negativo.');\n                valido = false;\n            }\n            if ($('#salario_maximo').length > 0) {\n                let salario_maximo = parseFloat(limpiarCleave($('#salario_maximo').val())) || 0;\n                if (salario_maximo < 0) {\n                    mostrarToast('danger', 'El salario máximo no puede ser un valor negativo.');\n                    valido = false;\n                }\n                if (salario_maximo < salario) {\n                    if (salario_maximo > 0) {\n                        mostrarToast('danger', 'El salario máximo no puede ser menor que el salario mínimo.');\n                    }\n                    valido = false;\n                }\n            }\n            validarRangoSalario();\n            let habilidades_seleccionadas = $('#select_habilidades').val();\n            $('#habilidades').val(Array.isArray(habilidades_seleccionadas) ? habilidades_seleccionadas.join(', ') : '');\n            let herramientas_seleccionadas = $('#select_herramientas_tecnologicas').val();\n            $('#herramientas_tecnologicas').val(Array.isArray(herramientas_seleccionadas) ? herramientas_seleccionadas.join(', ') : '');\n            $('#estudios').val(JSON.stringify(estudios.map(({ nivel_educativo, graduado, ...estudio }) => estudio)));\n            if ($('#no_experiencia').is(':checked')) {\n                $('#experiencias_laborales').val('');\n            } else {\n                $('#experiencias_laborales').val(JSON.stringify(experiencias.map(({ actualmente_trabajo, ...experiencia }) => experiencia)));\n            }\n            let idiomas = $('.idioma');\n            let niveles = $('.nivel-idioma');\n            let idiomas_seleccionados = [];\n            for (let i = 0; i < idiomas.length; i++) {\n                idiomas_seleccionados.push({\n                    idioma_id: parseInt($(idiomas[i]).val()),\n                    nivel    : $(niveles[i]).val()\n                });\n            }\n            if (idiomas_seleccionados.length == 0) {\n                $('#idiomas').val('');\n            } else {\n                $('#idiomas').val(JSON.stringify(idiomas_seleccionados));\n            }\n            let discapacidades_seleccionadas = $('#select_discapacidades').val();\n            let discapacidades_finales = [];\n            if (discapacidades_seleccionadas) {\n                discapacidades_seleccionadas.forEach(discapacidad_id => {\n                    let discapacidad = discapacidades.find(d => d.id == discapacidad_id);\n                    if (discapacidad) {\n                        let otra_discapacidad = null;\n                        if (discapacidad.id == '5') {\n                            otra_discapacidad = $('#otra_discapacidad').val().trim();\n                        }\n                        discapacidades_finales.push({\n                            usuario_id: USUARIO.id,\n                            discapacidad_id: parseInt(discapacidad_id),\n                            otra_discapacidad: otra_discapacidad\n                        });\n                    }\n                });\n                $('#discapacidades').val(JSON.stringify(discapacidades_finales));\n            } else {\n                $('#discapacidades').val('');\n            }\n\n            if (estudios.length == 0) {\n                mostrarToast('danger', 'Debes agregar al menos un nivel educativo para continuar.');\n                valido = false;\n            }\n\n            // Validar que todos los estudios tengan fecha de inicio\n            for (let i = 0; i < estudios.length; i++) {\n                let estudio = estudios[i];\n                if (!estudio.fecha_inicio || estudio.fecha_inicio.trim() === '') {\n                    mostrarToast('danger', `El estudio \"${estudio.titulo || 'Sin título'}\" requiere una fecha de inicio.`);\n                    valido = false;\n                    break;\n                }\n            }\n\n            if (experiencias.length == 0 && !$('#no_experiencia').is(':checked')) {\n                mostrarToast('danger', 'Debes agregar al menos una experiencia laboral para continuar.');\n                valido = false;\n            }\n        }\n    }\n    return valido;\n}\n\n/**\n * Función para ejecutar la acción cuando la petición es exitosa.\n * @param {Object} respuesta Respuesta de la solicitud.\n * @returns {void}\n * @author José Manuel Jiménez\n * @author Andres Gonzalez\n */\nfunction postSuccess(respuesta) {\n    if (respuesta.formulario == 'formulario-perfiles-laborales' || !revision_hv) {\n        localStorage.setItem('notificacionToast', JSON.stringify({\n            tipo_alerta: 'success',\n            texto_1: 'Hoja de vida creada exitosamente',\n        }));\n\n        if (revision_hv) {\n            localStorage.setItem('mostrar_modal_hv', 'true');\n            window.location.href = '/vacantes-postulaciones-aplicantes';\n        } else {\n            window.location.href = '/tareas-pendientes-aplicantes';\n        }\n    } else {\n        mostrarToast('success', respuesta.message);\n    }\n}\n\nfunction abrirModalNivelEducativo() {\n    $('#modal-agregar-nivel-educativo').modal('show');\n    limpiarFormulario('formulario-nivel-educativo');\n    indice_editar = null;\n}\n\n/**\n * Función para seleccionar un nivel de educación.\n *\n * @param {string} nivel Nivel de educación.\n * @returns {void}\n * @author José Manuel Jiménez\n */\nfunction seleccionarNivelEducacionAplicante(nivel) {\n    $('#niveles').empty();\n    let niveles = [];\n    if (nivel === 'Básica y media') {\n        $('#niveles').append(`\n            <div class=\"row align-items-center\">\n                <div class=\"col-12\">\n                    ${crearSelect2({\n                        opciones: niveles_basica_primaria,\n                        id: 'nivel_estudio_id',\n                        name: 'nivel_estudio_id',\n                        class: 'input-dinamico',\n                        input_container_class: 'mb-4',\n                        label: 'Nivel',\n                        required: true,\n                    })}\n                </div>\n            </div>\n        `);\n    } else if (nivel === 'Superior') {\n        $('#niveles').append(`\n            <div class=\"row align-items-center\">\n                <div class=\"col-6\">\n                    ${crearSelect2({\n                        opciones: niveles_superior,\n                        id: 'nivel_estudio_id',\n                        name: 'nivel_estudio_id',\n                        class: 'input-dinamico',\n                        input_container_class: 'mb-4',\n                        label: 'Nivel',\n                        required: true,\n                    })}\n                </div>\n                <div class=\"col-6\">\n                    ${crearSelect2({\n                        opciones: areas_estudio,\n                        id: 'area_estudio_id',\n                        name: 'area_estudio_id',\n                        class: 'input-dinamico',\n                        input_container_class: 'mb-4',\n                        label: 'Área de estudio',\n                        required: true,\n                    })}\n                </div>\n            </div>\n        `);\n    }\n    actualizarSelect2();\n}\n\n/**\n * Función para seleccionar si el usuario es graduado o está cursando estudios.\n * \n * @returns {void}\n * @author José Manuel Jiménez\n * @author Andres Morales\n*/\nfunction seleccionarGraduadoCursando() {\n    let graduado_cursando_estudios = $('#cursando_estudios').prop('checked');\n    $('#fechas-cursando-estudios').empty();\n    if (graduado_cursando_estudios) {\n        $('#fechas-cursando-estudios').append(`\n            <div class=\"row align-items-center\">\n                <div class=\"col-12 col-md-6 mt-2\">\n                    ${crearSelectorMesAnio({\n                        id: 'fecha_inicio_estudio',\n                        name: 'fecha_inicio_estudio',\n                        placeholder: 'mm/yyyy',\n                        disabled: false,\n                        required: true,\n                        input_container_class: 'mb-4',\n                        label: 'Fecha de inicio',\n                        icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n                    })}\n                </div>\n                <div class=\"col-12 col-md-6 mt-2\">\n                    ${crearSelect2({\n                        opciones: modalidades_estudios,\n                        id: 'jornada',\n                        name: 'jornada',\n                        class: 'input-dinamico',\n                        input_container_class: 'mb-4',\n                        label: 'Modalidad',\n                        required: true,\n                    })}\n                </div>\n            </div>\n        `);\n        actualizarSelect2();\n    } else {\n        $('#fechas-cursando-estudios').append(`\n            <div class=\"row align-items-center\">\n                <div class=\"col-12 col-md-6 mt-2\">\n                    ${crearSelectorMesAnio({\n                        id: 'fecha_inicio_estudio',\n                        name: 'fecha_inicio_estudio',\n                        placeholder: 'mm/yyyy',\n                        disabled: false,\n                        required: true,\n                        input_container_class: 'mb-4',\n                        label: 'Fecha de inicio',\n                        icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n                    })}\n                </div>\n                <div class=\"col-12 col-md-6 mt-2\">\n                    ${crearSelectorMesAnio({\n                        id: 'fecha_fin_estudio',\n                        name: 'fecha_fin_estudio',\n                        placeholder: 'mm/yyyy',\n                        disabled: false,\n                        required: true,\n                        input_container_class: 'mb-4',\n                        label: 'Fecha de finalización',\n                        icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n                    })}\n                </div>\n            </div>\n        `);\n    }\n    inicializarFlatpickr();\n}\n\n/**\n * Función para mostrar los niveles educativos del usuario.\n * \n * @returns {void}\n * @author José Manuel Jiménez\n * @author Jair Carvajal\n * */\nfunction mostrarNivelesEducativos() {\n    $('#contenedor-niveles-educativos').empty();\n    if (estudios.length > 0) {\n        // Ordenar estudios usando función global reutilizable\n        let estudios_ordenados = ordenarEstudiosPorFecha(estudios);\n\n        estudios_ordenados.forEach((estudio) => {\n            $('#contenedor-niveles-educativos').append(`\n                <div class=\"col-12 pt-3 px-3 mt-4 border rounded-3\" id=\"nivel-educativo-${estudio.indice_original}\">\n                    <div class=\"row mb-2\">\n                        <div class=\"col-12 col-lg\">\n                            <p class=\"mb-1 fw-bold text-gray-20\">${estudio.titulo}</p>\n                            <p class=\"text-body-3 mb-1\">\n                            ${estudio.fecha_inicio || estudio.fecha_fin ? `<i class=\"bi bi-calendar4 text-headline-5 me-2\"></i>` : ''}\n                            ${\n                                estudio.fecha_inicio\n                                ? moment(estudio.fecha_inicio).format(\"MMM YYYY\")\n                                : ''\n                            }\n                            ${\n                                estudio.fecha_inicio && !estudio.fecha_fin\n                                ? ' - Actualmente'\n                                : estudio.fecha_fin\n                                    ? ` - ${moment(estudio.fecha_fin).format(\"MMM YYYY\")}`\n                                    : ''\n                            }\n                            ${estudio.modalidad_estudio ? ` - ${estudio.modalidad_estudio}` : ''}\n                            </p>\n                            <p class=\"text-body-3 mb-1\"><i class=\"bi bi-buildings text-headline-5 me-2\"></i> ${estudio.institucion_educativa}</p>\n                        </div>\n                        <div class=\"col-auto\">\n                            <div class=\"row justify-content-end\">\n                                ${estudio.certificado ? `\n                                    <div class=\"col-auto ps-0\">\n                                        ${crearBoton({\n                                            clases: 'btn-outline-primary',\n                                            texto: `<i class=\"bi bi-paperclip\"></i> Ver certificado`,\n                                            onclick: `verCertificadoEstudio(${estudio.indice_original})`,\n                                        })}\n                                    </div>\n                                ` : ''}\n                                <div class=\"col-auto ps-0\">\n                                    ${crearBoton({\n                                        clases: 'btn-outline-primary btn-circle',\n                                        texto: '<i class=\"bi bi-pencil-fill\"></i>',\n                                        onclick: `editarNivelEducativo(${estudio.indice_original})`\n                                    })}\n                                </div>\n                                <div class=\"col-auto ps-0\">\n                                    ${crearBoton({\n                                        clases: 'btn-outline-danger btn-circle',\n                                        texto: '<i class=\"bi bi-trash-fill\"></i>',\n                                        onclick: `eliminarNivelEducativo(${estudio.indice_original})`\n                                    })}\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"col-12 mt-3\">\n                            <div class=\"row justify-content-between\">\n                                <div class=\"col-auto\">\n                                    <p class=\"text-body-3 text-gray-10 mb-0\">${estudio.nivel_educativo}</p>\n                                </div>\n                                <div class=\"col-auto\">\n                                    <div class=\"row justify-content-end align-items-center\">\n                                        ${estudio.graduado ? `\n                                            <div class=\"col-auto pe-0\">\n                                                <i class=\"bi bi-mortarboard text-headline-5 text-cta-blue\"></i>\n                                            </div>\n                                            <div class=\"col-auto text-body-3 text-gray-10\">\n                                                Graduado\n                                            </div>\n                                        ` : `\n                                            <div class=\"col-auto pe-0\">\n                                                <i class=\"bi ${estudio.jornada == 'Diurna' ? 'bi-sun' : estudio.jornada == 'Nocturna' ? 'bi-moon' : ''} text-headline-5 text-cta-blue\"></i>\n                                            </div>\n                                            <div class=\"col-auto text-body-3 text-gray-10\">\n                                                ${estudio.jornada ? 'Modalidad:' : ''} ${estudio.jornada || ''}\n                                            </div>\n                                        `}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            `);\n        });\n    }\n}\n\n/**\n * Función para abrir el modal de agregar o editar un nivel educativo.\n * \n * @param {number|null} index Índice del nivel educativo a editar. Si es null, se agrega un nuevo nivel educativo.\n * @return {void}\n * @author José Manuel Jiménez\n */\nfunction editarNivelEducativo(index) {\n    indice_editar = index;\n    let estudio = estudios[index];\n    $('#titulo').val(estudio.titulo);\n    $('#institucion_educativa').val(estudio.institucion_educativa);\n    $('#cursando_estudios').prop('checked', !estudio.graduado).trigger('change');\n    $('#nivel_educativo_id').val(estudio.nivel_educativo_id).trigger('change');\n    $('#fecha_inicio_estudio')[0]._flatpickr.setDate(estudio.fecha_inicio);\n    if ($('#fecha_fin_estudio').length > 0) {\n        $('#fecha_fin_estudio')[0]._flatpickr.setDate(estudio.fecha_fin || '');\n    }\n    $('#jornada').val(estudio.jornada || '').trigger('change');\n    establecerDatosComponentePaisesDepartamentosCiudades({\n        pais: { html_id: 'estudio_pais_id', value: estudio.pais_id },\n        departamento: { html_id: 'estudio_departamento_id', value: estudio.departamento_id },\n        ciudad: { html_id: 'estudio_ciudad_id', value: estudio.ciudad_id },\n    });\n    $('#certificado').attr('data-base64', estudio.certificado || '');\n    $('#modal-agregar-nivel-educativo').modal('show');\n    $('#modal-agregar-nivel-educativo').find('input.error , select.error , textarea.error').removeClass('error');\n    $('#modal-agregar-nivel-educativo').find('label.error').remove();\n}\n\n/**\n * Función para eliminar un nivel educativo.\n * \n * @param {number} index Índice del nivel educativo a eliminar.\n * @return {void}\n * @author José Manuel Jiménez\n */\nfunction eliminarNivelEducativo(index) {\n    estudios.splice(index, 1);\n    mostrarNivelesEducativos();\n}\n\n/**\n * Función para ver el certificado de estudio en una nueva ventana.\n * \n * @param {number} index Índice del nivel educativo cuyo certificado se desea ver.\n * @return {void}\n * @author José Manuel Jiménez\n */\nfunction verCertificadoEstudio(index) {\n    let certificado = estudios[index].certificado;\n    if (certificado) {\n        try {\n            let certificado_base64 = certificado.split(',')[1] || certificado;\n            const binaryString = atob(certificado_base64);\n            const bytes = new Uint8Array(binaryString.length);\n            for (let i = 0; i < binaryString.length; i++) {\n                bytes[i] = binaryString.charCodeAt(i);\n            }\n            let blob = new Blob([bytes], { type: 'application/pdf' });\n            let url = URL.createObjectURL(blob);\n            let nuevaVentana = window.open(url, '_blank');\n            if (nuevaVentana) {\n                nuevaVentana.onload = function() {\n                    setTimeout(() => URL.revokeObjectURL(url), 1000);\n                };\n            }\n        } catch (error) {\n            mostrarToast('danger', 'Error al abrir el certificado.', '', '', 'bi bi-exclamation-lg');\n        }\n    } else {\n        mostrarToast('danger', 'No se encontró el certificado de estudio.', '', '', 'bi bi-exclamation-lg');\n    }\n}\n\nfunction abrirModalExperienciaLaboral() {\n    $('#modal-agregar-experiencia-laboral').modal('show');\n    limpiarFormulario('formulario-experiencia-laboral');\n    indice_editar = null;\n}\n\n/**\n * Función para agregar o editar una experiencia laboral.\n * \n * @param {number|null} index Índice de la experiencia laboral a editar. Si es null, se agrega una nueva experiencia laboral.\n * @return {void}\n * @author José Manuel Jiménez\n * @author Jair Carvajal\n */\nfunction mostrarExperienciasLaborales() {\n    $('#contenedor-experiencias-laborales').empty();\n    if (experiencias.length > 0) {\n        $('#no_experiencia').prop('disabled', true);\n        // Ordenar experiencias usando función global reutilizable\n        let experiencias_ordenadas = ordenarExperienciasPorFecha(experiencias);\n\n        experiencias_ordenadas.forEach((experiencia) => {\n            $('#contenedor-experiencias-laborales').append(`\n                <div class=\"col-12 pt-3 px-3 mt-4 border rounded-3\" id=\"nivel-educativo-${experiencia.indice_original}\">\n                    <div class=\"row mb-2\">\n                        <div class=\"col-lg\">\n                            <p class=\"mb-1 fw-bold text-gray-20\">${experiencia.cargo}</p>\n                            <p class=\"text-body-3 mb-2\">\n                                ${experiencia.fecha_inicio || experiencia.fecha_fin ? `<i class=\"bi bi-calendar4 text-headline-5 me-2\"></i>` : ''}\n                                ${\n                                    experiencia.fecha_inicio\n                                    ? moment(experiencia.fecha_inicio).format(\"MMM YYYY\") +\n                                        (experiencia.fecha_fin\n                                        ? ` - ${moment(experiencia.fecha_fin).format(\"MMM YYYY\")}`\n                                        : \" - Actualmente\")\n                                    : \"\"\n                                }\n                                ${\n                                    experiencia.fecha_inicio && experiencia.fecha_fin\n                                    ? (() => {\n                                        let inicio = moment(experiencia.fecha_inicio);\n                                        let fin = moment(experiencia.fecha_fin);\n\n                                        let anios = fin.diff(inicio, 'years');\n                                        let meses = fin.diff(inicio.add(anios, 'years'), 'months');\n\n                                        let texto = '';\n                                        if (anios > 0) texto += `${anios} año${anios > 1 ? 's' : ''}`;\n                                        if (meses > 0) texto += `${anios > 0 ? ' y ' : ''}${meses} mes${meses > 1 ? 'es' : ''}`;\n\n                                        return texto ? ` | ${texto}` : '';\n                                        })()\n                                    : ''\n                                }\n                            </p>\n                            <p class=\"text-body-3 mb-1 fw-semibold text-gray-10\">${experiencia.empresa}</p>\n                            ${experiencia.funciones ? `\n                                <p class=\"text-body-2 fw-semibold text-gray-10 mt-3 mb-0\">Funciones y responsabilidades</p>\n                                <div class=\"w-100 text-body-3\">${experiencia.funciones}</div>\n                            `\n                            : ''}\n                        </div>\n                        <div class=\"col-auto\">\n                            <div class=\"row justify-content-end\">\n                                <div class=\"col-auto ps-0\">\n                                    ${crearBoton({\n                                        clases: 'btn-outline-primary btn-circle',\n                                        texto: '<i class=\"bi bi-pencil-fill\"></i>',\n                                        onclick: `editarExperienciaLaboral(${experiencia.indice_original})`\n                                    })}\n                                </div>\n                                <div class=\"col-auto ps-0\">\n                                    ${crearBoton({\n                                        clases: 'btn-outline-danger btn-circle',\n                                        texto: '<i class=\"bi bi-trash-fill\"></i>',\n                                        onclick: `eliminarExperienciaLaboral(${experiencia.indice_original})`\n                                    })}\n                                </div>\n                            </div>\n                        </div>\n                        ${experiencia.funciones_principales ? `\n                            <div class=\"col-12 mt-5 mb-3 text-body-2 fw-semibold text-gray-10\">Funciones principales</div>\n                            <div class=\"col-12\">${experiencia.funciones_principales}</div>\n                        ` : ''}\n                    </div>\n                </div>\n            `);\n        });\n    } else {\n        $('#no_experiencia').prop('disabled', false);\n    }\n}\n\n/**\n * Función para abrir el modal de agregar o editar una experiencia laboral.\n * \n * @param {number|null} index Índice de la experiencia laboral a editar. Si es null, se agrega una nueva experiencia laboral.\n * @return {void}\n * @author José Manuel Jiménez\n */\nfunction editarExperienciaLaboral(index) {\n    indice_editar = index;\n    let experiencia = experiencias[index];\n    certificados_laborales = experiencia.certificados || [];\n    $('#cargo').val(experiencia.cargo);\n    $('#empresa').val(experiencia.empresa);\n    $(`input[name=\"cargo_modalidad_trabajo_id\"][value=\"${experiencia.modalidad_trabajo_id}\"]`).prop('checked', true).trigger('change');\n    establecerDatosComponentePaisesDepartamentosCiudades({\n        pais: { html_id: 'experiencia_pais_id', value: experiencia.pais_id },\n        departamento: { html_id: 'experiencia_departamento_id', value: experiencia.departamento_id },\n        ciudad: { html_id: 'experiencia_ciudad_id', value: experiencia.ciudad_id },\n    });\n    $('#funciones_experiencia').val(experiencia.funciones);\n    $(`input[name=\"cargo_jornada_id\"][value=\"${experiencia.jornada_id}\"]`).prop('checked', true);\n    $('#actualmente_trabajo').prop('checked', experiencia.actualmente_trabajo == 1).trigger('change');\n    $('#fecha_inicio_experiencia')[0]._flatpickr.setDate(experiencia.fecha_inicio);\n    if ($('#fecha_fin_experiencia').length) {\n        $('#fecha_fin_experiencia')[0]._flatpickr.setDate(experiencia.fecha_fin || '');\n    }\n    establecerDatosClassicEditor('funciones_principales', experiencia.funciones_principales || '');\n    $('#certificado_laboral').attr('data-base64', experiencia.certificado || '');\n    $('#modal-agregar-experiencia-laboral').modal('show');\n    $('#modal-agregar-experiencia-laboral').find('input.error , select.error , textarea.error').removeClass('error');\n    $('#modal-agregar-experiencia-laboral').find('label.error').remove();\n}\n\n/**\n * Función para eliminar una experiencia laboral.\n * \n * @param {number} index Índice de la experiencia laboral a eliminar.\n * @return {void}\n * @author José Manuel Jiménez\n */\nfunction eliminarExperienciaLaboral(index) {\n    experiencias.splice(index, 1);\n    mostrarExperienciasLaborales();\n}\n\nfunction mostrarCertificadosLaborales() {\n    $('#tbody-certificados-laborales').empty();\n    if (certificados_laborales.length > 0) {\n        certificados_laborales.forEach((certificado, index) => {\n            $('#tbody-certificados-laborales').append(`\n                <tr id=\"certificado-laboral-${index}\">\n                    <td>\n                        <span onclick=\"verCertificadoExperiencia(${index})\">\n                            ${certificado.nombre}\n                        </span>\n                    </td>\n                    <td>\n                        ${crearBoton({\n                            clases: 'btn-outline-danger btn-circle',\n                            texto: '<i class=\"bi bi-trash-fill\"></i>',\n                            onclick: `eliminarCertificadoLaboral(${index})`\n                        })}\n                    </td>\n                </tr>\n            `);\n        });\n    }\n}\n\nfunction eliminarCertificadoLaboral(index) {\n    certificados_laborales.splice(index, 1);\n    mostrarCertificadosLaborales();\n}\n\n/**\n * Función para ver el certificado de experiencia laboral en una nueva ventana.\n * @param {number} index Índice de la experiencia laboral cuyo certificado se desea ver.\n * @return {void}\n * @author José Manuel Jiménez\n */\nfunction verCertificadoExperiencia(index) {\n    let certificado = certificados_laborales[index].certificado;\n    if (certificado) {\n        try {\n            let certificado_base64 = certificado.split(',')[1] || certificado;\n            const binaryString = atob(certificado_base64);\n            const bytes = new Uint8Array(binaryString.length);\n            for (let i = 0; i < binaryString.length; i++) {\n                bytes[i] = binaryString.charCodeAt(i);\n            }\n            let blob = new Blob([bytes], { type: 'application/pdf' });\n            let url = URL.createObjectURL(blob);\n            let nuevaVentana = window.open(url, '_blank');\n            if (nuevaVentana) {\n                nuevaVentana.onload = function() {\n                    setTimeout(() => URL.revokeObjectURL(url), 1000);\n                };\n            }\n        } catch (error) {\n            mostrarToast('danger', 'Error al abrir el certificado.', '', '', 'bi bi-exclamation-lg');\n        }\n    } else {\n        mostrarToast('danger', 'No se encontró el certificado de experiencia laboral.', '', '', 'bi bi-exclamation-lg');\n    }\n}\n\n/**\n * Función para seleccionar si el usuario no tiene experiencia laboral.\n *\n * @param {boolean} marcado Indica si el checkbox \"No tengo experiencia laboral\" está seleccionado.\n * @return {void}\n * @author José Manuel Jiménez\n * @author Andres Morales\n */\nfunction seleccionarNoTengoExperiencia(marcado) {\n    if (marcado) {\n        $('#btn-agregar-experiencia-laboral').addClass('d-none');\n    } else {\n        $('#btn-agregar-experiencia-laboral').removeClass('d-none');\n    }\n}\n\n/**\n * Función para autocompletar los campos del formulario de pruebas de desarrollo.\n * \n * @return {void}\n * @author José Manuel Jiménez\n */\nfunction autocompletarPruebasDesarrollo() {\n    $('#nombres').val('JOSE MANUEL');\n    $('#apellidos').val('JIMENEZ AVILA');\n    $('#fecha_nacimiento')[0]._flatpickr.setDate('1992-03-05');\n    $('#genero_id').val('1').trigger('change').trigger('select2:select');\n    $('#telefono').val('3125532022');\n    establecerDatosComponentePaisesDepartamentosCiudades({\n        pais: {\n            html_id: 'pais_id',\n            value: '13'\n        },\n        departamento: {\n            html_id: 'departamento_id',\n            value: '243'\n        },\n        ciudad: {\n            html_id: 'ciudad_id',\n            value: '2047'\n        },\n    });\n    $('#tipo_documento_id').val('1').trigger('change').trigger('select2:select');\n    $('#documento').val('1232598686');\n    $('#email').val('thejosemanu2@gmail.com');\n    $('#email-enviado').text('thejosemanu2@gmail.com');\n    //Modal de estudios\n    $('#titulo').val('Título de ejemplo');\n    $('#institucion_educativa').val('Institución Educativa Ejemplo');\n    $('#educacion_Superior').click();\n    $('#graduado').click();\n    $('#fecha_inicio_estudio')[0]._flatpickr.setDate('2025-06-15');\n    $('#fecha_fin_estudio')[0]._flatpickr.setDate('2025-06-18');\n    $('#nivel_estudio_id').val('8').trigger('change').trigger('select2:select');\n    $('#area_estudio_id').val('4').trigger('change').trigger('select2:select');\n    establecerDatosComponentePaisesDepartamentosCiudades({\n        pais: {\n            html_id: 'estudio_pais_id',\n            value: '5'\n        },\n        departamento: {\n            html_id: 'estudio_departamento_id',\n            value: '105'\n        },\n        ciudad: {\n            html_id: 'estudio_ciudad_id',\n            value: '1262'\n        },\n    });\n    //Modal de experiencia\n    $('#cargo').val('Cargo de ejemplo');\n    $('#empresa').val('Empresa Ejemplo S.A.');\n    establecerDatosComponentePaisesDepartamentosCiudades({\n        pais: {\n            html_id: 'experiencia_pais_id',\n            value: '1'\n        },\n        departamento: {\n            html_id: 'experiencia_departamento_id',\n            value: '16'\n        },\n        ciudad: {\n            html_id: 'experiencia_ciudad_id',\n            value: '597'\n        },\n    });\n    $('#cargo_jornada_id_1').click();\n    $('#fecha_inicio_experiencia')[0]._flatpickr.setDate('2025-06-16');\n    $('#fecha_fin_experiencia')[0]._flatpickr.setDate('2025-06-19');\n\n    $('#cantidad_vacantes').val('2');\n    $('#salario').val('3');\n    $('#tipo_contrato_id').val('1').trigger('change').trigger('select2:select');\n    $('#dias_laborar').val('Fines de semana').trigger('change').trigger('select2:select');\n    $('#horas_laborar').val('07:00-17:00').trigger('change').trigger('select2:select');\n    $('#experiencia_laboral').val('3').trigger('change').trigger('select2:select');\n    $('#dia_semana_Domingo').prop('checked', false).trigger('change');\n    $('#dia_semana_compensatorio').prop('checked', false).trigger('change');\n    $('#hora_entrada_Sábado').val('07:00').trigger('change').trigger('select2:select');\n    $('#hora_salida_Sábado').val('09:30').trigger('change').trigger('select2:select');\n}\n\nfunction cambioArchivo(archivo, nombre_archivo, tipo_archivo) {\n    if ($(archivo).prop('id') == 'certificado_laboral') {\n        setTimeout(() => {\n            let certificado_laboral = $('#certificado_laboral').attr('data-base64') || null;\n            if (certificado_laboral != null) {\n                certificados_laborales.push({\n                    certificado: certificado_laboral,\n                    nombre: nombre_archivo,\n                });\n                mostrarCertificadosLaborales();\n                $('#certificado_laboral').val('').trigger('change');\n            }\n        }, 1000);\n    }\n}\n\n/**\n * Función para seleccionar si el usuario actualmente trabaja en la experiencia laboral.\n * \n * @param {boolean} seleccionado Indica si el checkbox \"Actualmente trabajo aquí\" está seleccionado.\n * @return {void}\n * @author José Manuel Jiménez\n * @author Andres Morales\n */\nfunction seleccionarActualmenteTrabajo(seleccionado) {\n    $('#fechas-trabajo-experiencia').empty();\n    if (seleccionado) {\n        $('#fechas-trabajo-experiencia').append(`\n            <div class=\"col-12 mt-3\">\n                ${crearSelectorMesAnio({\n                    id: 'fecha_inicio_experiencia',\n                    name: 'fecha_inicio_experiencia',\n                    placeholder: 'mm/yyyy',\n                    disabled: false,\n                    required: true,\n                    input_container_class: 'mb-2',\n                    label: 'Fecha de inicio',\n                    icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n                })}\n            </div>\n        `);\n    } else {\n        $('#fechas-trabajo-experiencia').append(`\n            <div class=\"col-12 col-md-6 mt-3\">\n                ${crearSelectorMesAnio({\n                    id: 'fecha_inicio_experiencia',\n                    name: 'fecha_inicio_experiencia',\n                    placeholder: 'mm/yyyy',\n                    disabled: false,\n                    required: true,\n                    input_container_class: 'mb-2',\n                    label: 'Fecha de inicio',\n                    icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n                })}\n            </div>\n            <div class=\"col-12 col-md-6 mt-3\">\n                ${crearSelectorMesAnio({\n                    id: 'fecha_fin_experiencia',\n                    name: 'fecha_fin_experiencia',\n                    placeholder: 'mm/yyyy',\n                    disabled: false,\n                    required: true,\n                    input_container_class: 'mb-2',\n                    label: 'Fecha de finalización',\n                    icono2: '<i class=\"bi bi-calendar4 input-icono2 pointer\"></i>',\n                })}\n            </div>\n        `);\n    }\n    inicializarFlatpickr();\n}\n\n/**\n * Función para actualizar el estado visual de una validación de contraseña.\n * \n * @return {void}\n * @author Andres Gonzalez\n */\nfunction actualizarElementoValidacion(elemento_id, es_valido) {\n    const elemento_validacion = $('#' + elemento_id);\n    const icono_validacion = elemento_validacion.find('i');\n\n    if (es_valido) {\n        elemento_validacion.removeClass('invalido').addClass('valido');\n        icono_validacion.removeClass('bi-x-circle').addClass('bi-check-circle');\n    } else {\n        elemento_validacion.removeClass('valido').addClass('invalido');\n        icono_validacion.removeClass('bi-check-circle').addClass('bi-x-circle');\n    }\n}\n/**\n * Función para verificar si todas las validaciones de la contraseña pasan.\n * \n * @return {void}\n * @author Andres Gonzalez\n * @author Jair Carvajal\n */\nfunction verificarTodasLasValidacionesContrasena() {\n    var todas_las_validaciones_pasan = Object.values(estado_validacion_contrasena).every(estado_item => estado_item === true);\n    $('#submit-btn').prop('disabled', !todas_las_validaciones_pasan);\n    \n    if (todas_las_validaciones_pasan) {\n        $('#btn-datos-acceso').prop('disabled', false);\n        $('#submit-btn').removeClass('btn-secondary').addClass('btn-success');\n    } else {\n        $('#btn-datos-acceso').prop('disabled', true);\n        $('#submit-btn').removeClass('btn-success').addClass('btn-primary');\n    }\n}\n\n/**\n * Función para verificar coincidencia de contraseñas.\n * \n * @return {void}\n * @author Andres Gonzalez\n */\nfunction verificarCoincidenciaContrasenas() {\n    const contrasena_original = $('#password').val();\n    const contrasena_confirmacion = $('#password_confirmation').val();\n    \n    if (contrasena_confirmacion.length > 0) {\n        estado_validacion_contrasena.contrasenas_coinciden = contrasena_original === contrasena_confirmacion && contrasena_original.length > 0;\n        actualizarElementoValidacion('contrasena-igual', estado_validacion_contrasena.contrasenas_coinciden);\n    } else {\n        estado_validacion_contrasena.contrasenas_coinciden = false;\n        actualizarElementoValidacion('contrasena-igual', false);\n    }\n}\n\n/**\n * Agregar o modificar datos de la petición.\n *\n * @param {FormData} datos_formulario Objeto FormData que contiene los datos del formulario a procesar\n * @returns {Promise<Array>}\n * @author Andres Gonzalez\n */\nfunction agregarDataForm(datos_formulario) {\n    datos_formulario.delete('undefined');\n    datos_formulario.delete('archivo-avatar-usuario-acciones-imagen');\n    datos_formulario.delete('archivos');\n    return datos_formulario;\n}\n\n/**\n * Función para seleccionar el tipo de salario.\n * \n * @param {string} tipo Tipo de salario seleccionado ('especifico' o 'rango')\n * @returns {void}\n * @author José Manuel Jiménez\n */\nfunction seleccionarSalario(tipo) {\n    $('#contenedor-campos-salario').empty();\n    if (tipo == 'especifico') {\n        $('#contenedor-campos-salario').append(`\n            <div class=\"col-12 col-md-6\">\n                ${crearInput({\n                    id: 'salario',\n                    name: 'salario',\n                    class: 'cleave',\n                    input_container_class: 'mb-0',\n                    label: 'Cantidad',\n                    placeholder: '',\n                    min: 0,\n                    step: 0.01,\n                    required: true,\n                    minlength: 3,\n                    maxlength: 10,\n                    data: [{\n                        texto: 'simbolo-cleave',\n                        value: ''\n                    }],\n                    icono: '<i class=\"bi bi-currency-dollar input-icono1\"></i>',\n                })}\n            </div>\n        `);\n    } else if (tipo == 'rango') {\n        $('#contenedor-campos-salario').append(`\n            <div class=\"col-12 col-md-6\">\n                ${crearInput({\n                    id: 'salario',\n                    name: 'salario',\n                    class: 'cleave',\n                    input_container_class: 'mb-0',\n                    label: 'Desde',\n                    placeholder: '',\n                    step: 0.01,\n                    required: true,\n                    minlength: 3,\n                    maxlength: 10,\n                    onchange: `validarRangoSalario()`,\n                    data: [{\n                        texto: 'simbolo-cleave',\n                        value: ''\n                    }],\n                    icono: '<i class=\"bi bi-currency-dollar input-icono1\"></i>',\n                })}\n            </div>\n            <div class=\"col-12 col-md-6\">\n                ${crearInput({\n                    id: 'salario_maximo',\n                    name: 'salario_maximo',\n                    class: 'cleave',\n                    input_container_class: 'mb-0',\n                    label: 'Hasta',\n                    placeholder: '',\n                    min: 0,\n                    step: 0.01,\n                    required: true,\n                    minlength: 3,\n                    maxlength: 10,\n                    onchange: `validarRangoSalario()`,\n                    data: [{\n                        texto: 'simbolo-cleave',\n                        value: ''\n                    }],\n                    icono: '<i class=\"bi bi-currency-dollar input-icono1\"></i>',\n                })}\n            </div>\n        `);\n    }\n    inputsCleave();\n}\n\n/**\n * Valida el rango de salario\n * @description Verifica que el salario máximo sea mayor o igual al salario mínimo\n * @returns {boolean} true si es válido, false en caso contrario\n * @author José Manuel Jiménez\n */\nfunction validarRangoSalario() {\n    if ($('input[name=\"tipo_salario\"]:checked').val() !== 'rango') {\n        return true;\n    }\n    let salario_desde = parseFloat(limpiarCleave($('#salario').val())) || 0;\n    let salario_maximo = parseFloat(limpiarCleave($('#salario_maximo').val())) || 0;\n    let $input_hasta = $('#salario_maximo');\n    let $contenedor_hasta = $input_hasta.closest('.input-container');\n    $input_hasta.removeClass('error');\n    $contenedor_hasta.siblings('label[for=\"salario_maximo\"].error').remove();\n    if (salario_desde > 99 && salario_maximo > 99 && salario_desde >= salario_maximo) {\n        setTimeout(() => {\n            $input_hasta.addClass('error');\n            $contenedor_hasta.after('<label for=\"salario_maximo\" class=\"error text-red-cta\">El salario hasta no debe ser menor o igual al salario desde</label>');\n            return false;\n        }, 100);\n    }\n    return true;\n}\n\n/**\n * Función para seleccionar si el usuario posee discapacidad.\n * \n * @param {boolean} posee_discapacidad Indica si el usuario posee discapacidad.\n * @returns {void}\n * @author José Manuel Jiménez\n */\nfunction seleccionarTengoDiscapacidad(posee_discapacidad) {\n    $('#contenedor-discapacidad').empty();\n    if (posee_discapacidad) {\n        $('#contenedor-discapacidad').append(`\n            <div class=\"col-12 p-4 border rounded-3\">\n                <div class=\"row align-items-center pb-2\">\n                    <div class=\"col-12\">\n                        <label class=\"form-label fw-semibold\">Discapacidad</label>\n                    </div>\n                    <div class=\"col-6\">\n                        ${crearMultiselect({\n                            opciones: discapacidades,\n                            id: 'select_discapacidades',\n                            name: 'select_discapacidades',\n                            class: 'input-dinamico',\n                            input_container_class: 'mb-0',\n                            placeholder: 'Discapacidad',\n                            onchange: 'seleccionarDiscapacidad(this.value)',\n                            required: true,\n                        })}\n                    </div>\n                    <div class=\"col-6\" id=\"contenedor-otra-discapacidad\"></div>\n                </div>\n            </div>\n        `);\n        inizializarMultiselect();\n    }\n}\n\n/**\n * Función para seleccionar otra discapacidad.\n * \n * @param {number} discapacidad_id ID de la discapacidad seleccionada.\n * @returns {void}\n * @author José Manuel Jiménez\n */\nfunction seleccionarDiscapacidad(discapacidad_id) {\n    let discapacidades_seleccionadas = $('#select_discapacidades').val() || [];\n    if (discapacidades_seleccionadas.includes('5')) {\n        let otra_discapacidad_existente = $('#otra_discapacidad').length > 0;\n        if (!otra_discapacidad_existente) {\n            $('#contenedor-otra-discapacidad').append(`\n                ${crearInput({\n                    id: 'otra_discapacidad',\n                    name: 'otra_discapacidad',\n                    class: 'input-dinamico',\n                    input_container_class: 'mb-0',\n                    label: '¿Cuál?',\n                    required: true,\n                })}\n            `);\n        }\n    } else {\n        $('#contenedor-otra-discapacidad').empty();\n    }\n}\n\n/**\n * Función para crear el perfil manualmente.\n * \n * @returns {void}\n * @author José Manuel Jiménez\n */\nfunction crearPerfilManualmente() {\n    $('#contenedor-campos-perfil').removeClass('d-none');\n    $('#contenedor-opciones-crear-ia').addClass('d-none');\n}\n\n/**\n * Función para manejar el cambio de archivo.\n * \n * @param {HTMLElement} archivo Elemento HTML del archivo cargado.\n * @returns {void}\n * @author José Manuel Jiménez\n */\nfunction cambioArchivo(archivo) {\n    let elemento_html_archivo = $(archivo).prop('id');\n    if (revision_hv_ia && elemento_html_archivo == 'hoja_vida') {\n        generarPerfilHVPorIA(elemento_html_archivo);\n    }\n}","structuredPatch":[{"oldStart":1265,"oldLines":9,"newStart":1265,"newLines":15,"lines":["  * @author Jair Carvajal","  */"," function verificarTodasLasValidacionesContrasena() {","+    // Si no se requiere validar contraseña, habilitar el botón directamente","+    if (!validar_contrasena) {","+        $('#btn-datos-acceso').prop('disabled', false);","+        return;","+    }","+","     var todas_las_validaciones_pasan = Object.values(estado_validacion_contrasena).every(estado_item => estado_item === true);","     $('#submit-btn').prop('disabled', !todas_las_validaciones_pasan);","-    ","+","     if (todas_las_validaciones_pasan) {","         $('#btn-datos-acceso').prop('disabled', false);","         $('#submit-btn').removeClass('btn-secondary').addClass('btn-success');"]}],"userModified":false,"replaceAll":false},"sourceToolAssistantUUID":"cf459dcd-26a2-47d6-ae67-713312c3e955"}
{"parentUuid":"fc42f268-e291-49cb-bae5-13840e1bb86c","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","slug":"resilient-gathering-fog","message":{"model":"claude-opus-4-5-20251101","id":"msg_01KYbUYW8ACJWZXZfHFEHLYM","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"La modificación se aplicó correctamente. Ahora cuando `validar_contrasena` es `false` (porque el usuario ya tiene políticas aceptadas y ya verificó su cuenta previamente), la función habilitará el botón `#btn-datos-acceso` directamente sin verificar las validaciones de contraseña.\n\nEsto debería resolver el problema donde el botón quedaba deshabilitado aunque el usuario ya hubiera completado los pasos anteriores.","signature":"EtAECkYICxgCKkB1Nn1KME3vM0rm93BeGXxWeQCI+Mu/1I+nGe2yqZZofpSRMBJEdmL9euQp99KxLmuh72F2xAWWk0z4I6k3djxgEgy4WunRzif8STF/OwwaDMZ0uwXHFhdUBMVeRCIwJCcyDv5IkJI3rdLoAVdYi2iteLoF2DLFLo9rvin2gNh7ULIuB5A3c1R5B2nGykldKrcDyWRwlBjpM6UXvrtTFN8oURWL9v+NBUvH/EohiCbWVR234TqS1bcJXgaum4DMJyW2C0yC8eOTbpxwnL2HJo7PIQd5Q3g+PkBh+4vNYPZx72q8eYSlBAsnc5JSEtMXEEwBuJR6jbiX8A1bC1MNEc/nNS3IFKkKVL6lROCHVcqg8M52LFHmkOg3yEvGb7ORNBSdT4WKYy7ywHkmkQCX6iUIjyY4lku/y4+RQyGB/xYOTSL4Uvqz+GGu7c2m38Ta1xh7veV9PhuPh9X1xMMH/Qf/UIpgu+j8KAjrhUN2kPeVC1hHnhAfri8eKJyjTzeZpGtfN3KpkEuCLvPN9dZIMA8TCMH9h3y0ViHBl19kcqrCeEnSSlaw4k3OEy2p184dBauRTgpmJsNvdUyAlUKKUafU76OKI+2Q7ZQ0lhZEl99Gnhjksv4dKhAtKUa3byq08FvsIBCNi2qFrOFOyhXEqUMHtIWMozdpkCHOedWMTSBjPxoGVr9WX8dmwFgSKC5jWM9EHa/nhHPpk5i/DMKqhjtQBuHWmbvgcuGhd2chYlThQvc3Z8jZBY6nHFRzL25NCXD2e0tfndQLNxgB"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":1859,"cache_read_input_tokens":61323,"cache_creation":{"ephemeral_5m_input_tokens":1859,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXWK7wwhyDHATRCmA9zwB","type":"assistant","uuid":"0a5d48fc-7a39-4fb5-8b63-b893935d2a31","timestamp":"2026-01-26T16:34:38.543Z"}
{"parentUuid":"0a5d48fc-7a39-4fb5-8b63-b893935d2a31","isSidechain":false,"userType":"external","cwd":"c:\\laragon\\www\\psicoalianza-2","sessionId":"14e5a780-72ee-44a3-9764-d4eb59a94340","version":"2.1.17","gitBranch":"AJUSTE-PASOS","slug":"resilient-gathering-fog","message":{"model":"claude-opus-4-5-20251101","id":"msg_01KYbUYW8ACJWZXZfHFEHLYM","type":"message","role":"assistant","content":[{"type":"text","text":"Listo. Agregué una verificación al inicio de la función que:\n\n1. Si `validar_contrasena` es `false` (usuario ya verificado previamente), habilita el botón `#btn-datos-acceso` directamente\n2. Hace `return` para evitar ejecutar el resto de la lógica de validación de contraseña\n\nAhora cuando el usuario ya tenga las políticas aceptadas y la cuenta verificada, el botón para pasar al paso 3 estará habilitado sin requerir que configure una nueva contraseña."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":8,"cache_creation_input_tokens":1859,"cache_read_input_tokens":61323,"cache_creation":{"ephemeral_5m_input_tokens":1859,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXWK7wwhyDHATRCmA9zwB","type":"assistant","uuid":"480c15f9-e251-45de-9027-98f96618dccc","timestamp":"2026-01-26T16:34:41.000Z"}
{"type":"summary","summary":"API Error: 500 {\"type\":\"error\",\"error\":{\"type\":\"api_error\",\"message\":\"Internal server error\"},\"request_id\":\"req_011CXmQ9jT4yqcNNq452oCEJ\"}","leafUuid":"480c15f9-e251-45de-9027-98f96618dccc"}
